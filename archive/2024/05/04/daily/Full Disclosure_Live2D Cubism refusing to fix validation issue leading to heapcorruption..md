---
title: Live2D Cubism refusing to fix validation issue leading to heap	corruption.
url: https://seclists.org/fulldisclosure/2024/May/1
source: Full Disclosure
date: 2024-05-04
fetch_date: 2025-10-06T17:17:45.116347
---

# Live2D Cubism refusing to fix validation issue leading to heap	corruption.

[![](/shared/images/nst-icons.svg#menu)](#menu)
![](/shared/images/nst-icons.svg#close)
[![Home page logo](/images/sitelogo.png)](/)

[Nmap.org](https://nmap.org/)
[Npcap.com](https://npcap.com/)
[Seclists.org](https://seclists.org/)
[Sectools.org](https://sectools.org)
[Insecure.org](https://insecure.org/)

![](/shared/images/nst-icons.svg#search)

[![fulldisclosure logo](/images/fulldisclosure-logo.png)](/fulldisclosure/)

## [Full Disclosure](/fulldisclosure/) mailing list archives

[![Previous](/images/left-icon-16x16.png)](0)
[By Date](date.html#1)
[![Next](/images/right-icon-16x16.png)](2)

[![Previous](/images/left-icon-16x16.png)](0)
[By Thread](index.html#1)
[![Next](/images/right-icon-16x16.png)](2)

![](/shared/images/nst-icons.svg#search)

# Live2D Cubism refusing to fix validation issue leading to heap corruption.

---

*From*: PT via Fulldisclosure <fulldisclosure () seclists org>
*Date*: Wed, 01 May 2024 12:47:41 +0000

---

```
Live2D Cubism is the dominant "vtuber" software suite for 2D avatars for use in livestreaming and integrating them in
other software.
They publish various SDKs and a frameworks for integrating their libraries with your own program. You're supposed to
use those to deserialize and render/animate the models created with their main software - often untrusted files from
random people on the internet.
While their main java-based programs and their web toolkit seem to have at least minimal sanity checks for input, the
same is not true for their "native" (C/C++) framework.
This is trivially, unintentionally and repeatedly triggered by people just testing it with janky rips available broadly
on the internet, such as this model of a Discord moderator:
https://github.com/Eikanya/Live2d-model/tree/master/%E4%B8%BA%E7%BE%8E%E5%A5%BD%E7%9A%84%E4%B8%96%E7%95%8C%E7%8C%AE%E4%B8%8A%E7%A5%9D%E7%A6%8F%EF%BC%81Fantastic%20Days/1399100

Those models have nonsense numbers of total segments and points for the animation curves because the Unity live2d asset
ripper which was used to generate them calculates the totals wrong. The framework happily trusts the totals and lets
you squirt as many bytes (or, more accurately, floating point numbers) as there is contiguous memory allocated. If you
hit the upper bound you will segfault, otherwise your allocator will probably panic only on the next free() or
allocation.

e.g. https://github.com/MizunagiKB/gd_cubism/issues/52

TLDR: They don't validate that the total numbers of points and segments in animations actually match the total numbers
in the corresponding arrays in serialized models. I sent them a patch to recalculate those numbers and ignore the
totals, as it's really annoying to have to validate every model manually with an external python script, but they
refuse to apply it because the data wasn't generated by their official program and they think this is a customer
support issue ?

This leaves gaping wide open a heap corruption issue that I don't have the skill or time to actually exploit in any
interesting way, but I'm just going to leave this here because fuck those guys. They also like to send their deranged
fanboys after anyone reporting on their incompetence and negligence, because if you're not willing to spend thankless
weeks/months trying to get RCE then your bug isn't really el8 enough:
https://github.com/UlyssesWu/D2Evil/issues/6#issuecomment-1685596304

PT
```

**Attachment:
[publickey - pt4fd@pm.me - 0xD91D7AF6.asc](att-1/publickey_-_pt4fd%40pm_me_-_0xD91D7AF6_asc.bin)**
*Description:*

**Attachment:
[signature.asc](att-1/signature_asc.bin)**
*Description:* OpenPGP digital signature

```
_______________________________________________
Sent through the Full Disclosure mailing list
https://nmap.org/mailman/listinfo/fulldisclosure
Web Archives & RSS: https://seclists.org/fulldisclosure/
```

---

[![Previous](/images/left-icon-16x16.png)](0)
[By Date](date.html#1)
[![Next](/images/right-icon-16x16.png)](2)

[![Previous](/images/left-icon-16x16.png)](0)
[By Thread](index.html#1)
[![Next](/images/right-icon-16x16.png)](2)

### Current thread:

* **Live2D Cubism refusing to fix validation issue leading to heap corruption.** *PT via Fulldisclosure (May 03)*

![](/shared/images/nst-icons.svg#search)

## [Nmap Security Scanner](https://nmap.org/)

* [Ref Guide](https://nmap.org/book/man.html)* [Install Guide](https://nmap.org/book/install.html)* [Docs](https://nmap.org/docs.html)* [Download](https://nmap.org/download.html)* [Nmap OEM](https://nmap.org/oem/)

## [Npcap packet capture](https://npcap.com/)

* [User's Guide](https://npcap.com/guide/)* [API docs](https://npcap.com/guide/npcap-devguide.html#npcap-api)* [Download](https://npcap.com/#download)* [Npcap OEM](https://npcap.com/oem/)

## [Security Lists](https://seclists.org/)

* [Nmap Announce](https://seclists.org/nmap-announce/)* [Nmap Dev](https://seclists.org/nmap-dev/)* [Full Disclosure](https://seclists.org/fulldisclosure/)* [Open Source Security](https://seclists.org/oss-sec/)* [BreachExchange](https://seclists.org/dataloss/)

## [Security Tools](https://sectools.org)

* [Vuln scanners](https://sectools.org/tag/vuln-scanners/)* [Password audit](https://sectools.org/tag/pass-audit/)* [Web scanners](https://sectools.org/tag/web-scanners/)* [Wireless](https://sectools.org/tag/wireless/)* [Exploitation](https://sectools.org/tag/sploits/)

## [About](https://insecure.org/)

* [About/Contact](https://insecure.org/fyodor/)* [Privacy](https://insecure.org/privacy.html)* [Advertising](https://insecure.org/advertising.html)* [Nmap Public Source License](https://nmap.org/npsl/)

[![](/shared/images/nst-icons.svg#twitter)](https://twitter.com/nmap "Visit us on Twitter")
[![](/shared/images/nst-icons.svg#facebook)](https://facebook.com/nmap "Visit us on Facebook")
[![](/shared/images/nst-icons.svg#github)](https://github.com/nmap/ "Visit us on Github")
[![](/shared/images/nst-icons.svg#reddit)](https://reddit.com/r/nmap/ "Discuss Nmap on Reddit")