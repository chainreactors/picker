---
title: Wechat2RSS:更新频率策略设计
url: https://blog.xlab.app/p/d73537b/
source: 明天的乌云
date: 2023-03-14
fetch_date: 2025-10-04T09:30:23.046897
---

# Wechat2RSS:更新频率策略设计

[明天的乌云](/)

透明人博客

* [首页](/)
* [分类](/categories/)
* [归档](/archives/)
* [日报专栏](https://daily.xlab.app/)
* [我的推荐](/links/)
* [友情链接](/friends/)
* [关于](/about/)
* 搜索

* 文章目录
* 站点概览

1. [1. RSS更新频率](#RSS%E6%9B%B4%E6%96%B0%E9%A2%91%E7%8E%87)
2. [2. 预测](#%E9%A2%84%E6%B5%8B)
3. [3. 更新时间](#%E6%9B%B4%E6%96%B0%E6%97%B6%E9%97%B4)
4. [4. 最后](#%E6%9C%80%E5%90%8E)
5. [5. 2023.3.26 更新](#2023-3-26-%E6%9B%B4%E6%96%B0)
6. [6. 2024.5.31 更新](#2024-5-31-%E6%9B%B4%E6%96%B0)
7. 7. 相关文章

![透明人](/images/logo.png)

透明人

Tmr Blog

[197
日志](/archives/)

[33
分类](/categories/)

[159
标签](/tags/)

0%

链接

* [透明日报](https://daily.xlab.app/ "https://daily.xlab.app")

# Wechat2RSS:更新频率策略设计

发表于
2023-03-13

分类于

[其他](/categories/%E5%85%B6%E4%BB%96/)

阅读次数：

本文字数：
995

阅读时长 ≈
1 分钟

上个周末重写了这块逻辑，实现在较低的请求频率下，尽可能快速的获取到更新信息

## RSS更新频率

常见的RSS更新情况是设定一个时间间隔，每过一个间隔就检查一次，最开始Wechat2RSS也是这样设计的

设计每3个小时检查一次

把这些公众号的请求时间平摊到3个小时里慢慢请求，每3个小时完成一次轮询

随着公众号数量的增加，3个小时逐渐增加到12个小时，300+个公众号平摊下来大概2分钟一个

仍然频繁的触发微信端的限频

再后来又增加了限频后自动休眠和限频提醒，然后手动解封，周末重新设计了这块的逻辑

## 预测

绝大多数微信公众号的最大更新频率是一天一更，所以请求的频率不用很高

同时又有历史文章数据，可以通过历史更新时间来预测这个作者的下次更新时间

只要在下次更新时间之后检查更新，就能以最小的请求数量，最快的速度获取到更新

简简单单的线性预测，就能得到下次更新时间

考虑到有些作者的更新频率不稳定，且时间间隔较长，订阅的很多可能一年也就更新几次，时间间隔可能在几天到几个月不等，这时线性预测就不太行了，作者突然明天更新，我可能要等几个星期才能收到

为了确保能尽快的获取到更新，每个账号每24个小时都要检查一次，这似乎又回到了原点

## 更新时间

公众号的更新时间要比更新日期更加稳定，毕竟打工人几乎不会在工作时间更新文章

所以可以把更新时间作为预测的依据，来规划什么时间去检查这个公众号

贫瘠的数学知识让我想起了平均数+标准差来描述这个期望

预计更新时间=平均更新时间

检查时间=预计更新时间+一个标准差

## 最后

差点忘记写了，那个限频提醒已经24小时没有出现了

第一次在数学之外使用标准差，赞美数学

## 2023.3.26 更新

统计从”文章发布“到”RSS更新“的时间差

平均10小时，大部分都在5小时以内，24小时左右的也有不少

![](/p/d73537b/stat.png)

发现统计的“文章发布时间”有问题，统计的是作者在微信后台点发布的时间

比如说作者今晚写完，设置明天定时发送，那么统计的就是今晚的时间

导致这里存在特别大的时间差，甚至超过24小时（理论上说是不会超过24小时的）

## 2024.5.31 更新

后续有全文功能后，更新时间按照实际发送时间计算了，上面的统计问题也就不存在了

对于有些账号能每天发多次，比如一些政务、新闻号

根据历史文章发布情况能够识别出来：在x-y时间段，保持z小时更新一次

那么在x-y时间段，可得第i次检测时间：x+i\*z

超出范围时，那就是每天的 x+z 时间检测更新

## 相关文章

* [Wechat2RSS: self-hosted版本发布](https://blog.xlab.app/p/fd57c4cf/)
* [用RSSHub替代Feed43](https://blog.xlab.app/p/1209a846/)
* [RSSHub规则化架构设计](https://blog.xlab.app/p/9c76cef/)
* [Wechat2RSS:架构演进](https://blog.xlab.app/p/a207c8e3/)
* [先知社区RSS](https://blog.xlab.app/p/6041ed53/)

欢迎关注我的其它发布渠道

[Twitter](https://twitter.com/tmr11235)

[Telegram](https://t.me/tm_daily)

[RSS](/atom.xml)

[RSS](/tags/RSS/)
 [微信公众号](/tags/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7/)
 [Wechat2RSS](/tags/Wechat2RSS/)

[Wechat2RSS:架构演进](/p/a207c8e3/ "Wechat2RSS:架构演进")

[GPT技术发展和未来预测](/p/52465be0/ "GPT技术发展和未来预测")

[地球ICP备42号](https://beian.miit.gov.cn/)

© 2016 –
2025

透明人

站点总字数：
343k

Theme NexT works best with JavaScript enabled