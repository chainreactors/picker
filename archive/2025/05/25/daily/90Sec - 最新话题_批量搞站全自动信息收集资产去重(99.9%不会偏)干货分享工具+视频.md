---
title: 批量搞站全自动信息收集资产去重(99.9%不会偏)干货分享工具+视频
url: https://forum.90sec.com/t/topic/2503
source: 90Sec - 最新话题
date: 2025-05-25
fetch_date: 2025-10-06T22:24:17.458319
---

# 批量搞站全自动信息收集资产去重(99.9%不会偏)干货分享工具+视频

[90Sec](/)

# [批量搞站全自动信息收集资产去重(99.9%不会偏)干货分享工具+视频](/t/topic/2503)

[工具资源](/c/tools/8)

[82303224](https://forum.90sec.com/u/82303224)

2025 年5 月 24 日 21:34

1

安装方法：
D:\ziweiqi\ 这个路径是写死了，
D:\ziweiqi\soft\ 软件打包

1. 安装pythonpy：thon-3.9.11.exe
2. 设置阿里云pip源： aliyunpip.bat
3. 安装pip包：pipinstall.bat
4. 安装wincap
5. 安装微软VC++运行库合集.exe
6. 下载安装D:\EmpireServer 这个路径也是写死的
   <http://d.phome.net/down/EmpireServer.rar>
7. D:\EmpireServer\ 帝国cms官网的也是写死的。
   运行资产收集之前先开启mysql，
   配置aiqicha cookie D:\ziweiqi\enscan\config.yaml
   登录aiqicha之后按F12 ，快点暂停，然后去找cookie 按了F12有限制。
   配置fofa key 路径D:\ziweiqi\FofaMap\fofa.ini

无聊 分享一下干活，批量搞站
请用于授权的安全检测和hw 我主要也使用于 护网的资产信息收集还有平常时候工作的渗透测试资产收集
省去了手工和去重。减少工作量，之前也是这个思路，但是一直手动操作。任务量不少。

1. 先演示使用方法和效果。
   先找几个单位名称或者根域名
   思路1： 根域名备案单位获取根域名进行资产信息收集
   思路2： 自己手动输入根域名进行资产信息收集
   先演示这个
   带有ziyuming的py 是根据 自己手动输入根域名进行资产信息收集
2. 先fofa进行子域名收集， 并提取web资产
   湖南的好像这里没有做限制，只做了cn的匹配
3. 根据根域名，利用整合的子域名工具跑
   ksubdomain 会先本地探测宽带 然后再跑子域名。先简单跑一下。软件本身也可以过滤一些 触发泛解析子域名。尽可能的过滤泛解析域名，还是可能会有遗漏。。
   现在就是等他跑完。跑到哪里，说下作用
   不带有ziyuming的py 就是多了个 enscan 利用aiqicha 提取备案的根域名和备案ip
   湖南的会做一个湘的匹配。
   跑子域名会分割根域名。这样就不会因为多而卡死
   现在是整合 fofa子域名和工具跑的子域名 右侧匹配过滤掉垃圾子域名
   导入mysql数据库 右侧匹配过子域名 第一重防止高偏
   然后批量获取子域名对应的ip地址，如果cdn和反向代理多个ip的 ip不会保存下来。
   保存下来的ip+enscan备案的ip（带有ziyuming的py 就没有需要自己输入到mubiaodanwei.txt里面）
   整合一起使用masscan扫描20个端口 如果开放10个以上说明存在泛端口打开ip 然后去掉这个ip
   现在就是fscan扫描4000端口，之前的思路是利用fscan -nobr -nopoc --full -pa 佛法的端口
   现在改了固定的4000端口 ，也可以使用1-65535，因为 本身会提取fofa的web，而且fscan4000端口也很快。。。
   enscan这个更自动 但是aiqicha老抽风，
   自己手动输入资产会更全面。
   enscan的话就更自动，基本上也全。。
   快扫完了 在继续 先
   提取到了fscan的web了 现在weblive2扫描子域名的80和443（只判断存活） 又是一批web + 之前fofa的web
   整合web 全行匹配 去掉不符合的web，保存匹配的web 防止资产偏。
   使用weblive 这个去获取web
   的 no', 'url', 'ip', 'port', 'state', 'state\_code', 'title', 'server', 'length', 'hash', 'other 等等
   然后清空数据库重新导入新的mysql数据库，
   一般学校 很多子站都是跟官网一起的，基本上不用测
   这些都是去重复的和垃圾web的一些语句 可以自己新增和修改。
   还是会有一些重复的站，不过任务量已经少很多了 ，尽可能的保留能测的web
   本来有4000多个 去重之后335
   enscan这个 演示前面一下
   下一次运行 之前的记录会保存 方便护网的时候进行溯源资产归属。
   使用enscan的还可以 实时删除出局单位资产
   [e[31mErrore[0m] 【AQC】需要安全验证，请打开链接进行验证后操作，10秒后重试！ <https://aiqicha.baidu.com/company_detail_31204241308513>
   使用最新版试试。。还是用老板的好一点，我的账号都被扳了， 重新登录抓取最新的 cookie替换即可。。

收集的web后续：
放入afrog afrog -T url.txt -oob dnslogcn -o url\_results.html
放入xray+rad
放入 rad+ burp插件
fuzz 目录和文件
推荐几个工具
Dirscan1.5.2 优点就是快，缺点就是可能遗漏扫描，用脚本出现不通的时候记录目标到dirwaf.txt， 脚本结果会排序。最好自定义过滤掉302，扫描百度33个结果
dirsx 优点就是快，缺点不详 可能就是排序看的没那么舒服，还有默认不管有没有结果都会输出结果txt。已优化 没有结果不输出，然后结果会排序，扫描百度36个结果
dirmapw 优点就是算快，缺点不详
dirsearch 速度跟上面的比感觉就是慢了
批量扫：
python38 dirsearch.py -l url.txt -w w/dicc.txt -x 500,503,502,400,420,301,302,404,406 -t 5 --delay=0.5 --random-agent --timeout=5
会判断存活，针对于时间比较急的时候用 会判断存货 如果有waf或者目标不是很稳定的时候会自动中断 跳过扫下一个。
因此我做了记录 默认改小了点
Threads=15
有时候搞小程序或者app 本身没啥东西搞了这个时候可以搞目标的服务器和其他的指向这个服务器ip的其他域名
这个时候也可以上之前的资产收集方法 收集资产之后。。。加入小程序抓的资产是
[sxzx.baidu.cn](http://sxzx.baidu.cn) 那么可以搞 [sxzx.baidu.cn](http://sxzx.baidu.cn) 和 解析在这个ip上面的子域名资产
输入域名 [sxzx.baidu.cn](http://sxzx.baidu.cn) 这样去提取。。
如果还想继续搜集子域名 或者搞的更深的话
这个时候 思路是 抓取搜集的资产的 url 提取子域名。或者抓取url的路径进行测试。
我是建议先收集的资产 把上面的看完一般是登录之后 整合接口地址。在使用HeartKplusV2 自改了一下
利用findesomething + URLFinder.exe + katana.exe 提取url 和等等一些，看演示
需要安装：node-v12.22.12-x64.msi 和 谷歌浏览器
.edu.cn 这里还需要处理 正常的域名没问题，后面在改下
spring用的少，所以api比较少，
这里几个api的地方 提取api + 登录之后 整合接口地址 整合一起再过一道 afrog 和 dir
太多了估计要抓很久随机20个 看看的地方手工也看看
results\_find\_all\_html.txt 去掉垃圾的 webrquest.jar 手工也看看说不定未授权。

工具下载地址：链接：[文件分享](https://share.weiyun.com/irZBApVJ) 密码：thtif3
后续工具下载地址：链接：[文件分享](https://share.weiyun.com/KMQIo5eb) 密码：i2n4hv
视频下载地址：链接：[文件分享](https://share.weiyun.com/AKSbSgOl) 密码：cn9g2g

1 个赞

[82303224](https://forum.90sec.com/u/82303224)

2025 年5 月 26 日 07:07

2

之前的取消了， 补充链接：后续工具下载地址链接：[文件分享](https://share.weiyun.com/RPS1h3KC) 密码：axj68x

* [首页](/)
* [类别](/categories)
* [准则](/guidelines)
* [服务条款](/tos)
* [隐私政策](/privacy)

由 [Discourse](https://www.discourse.org) 提供技术支持，启用 JavaScript 以获得最佳体验