---
title: å¦‚ä½•ç›‘æ§åˆ«äººçš„ç½‘ç«™
url: https://blog.upx8.com/3227
source: é»‘æµ·æ´‹ - WIKI
date: 2023-02-21
fetch_date: 2025-10-04T07:37:46.864923
---

# å¦‚ä½•ç›‘æ§åˆ«äººçš„ç½‘ç«™

# [é»‘æµ·æ´‹ - Wiki](/ "é»‘æµ·æ´‹ - Wiki - ç‚¹å‡»è¿”å›é¦–é¡µ")

# å¦‚ä½•ç›‘æ§åˆ«äººçš„ç½‘ç«™

å‘å¸ƒæ—¶é—´:
2023-02-20

åˆ†ç±»:
[Webå¼€å‘/Code](https://blog.upx8.com/code/)

çƒ­åº¦:
14052

åœºæ™¯
å¯èƒ½æ˜¯ä½ ç”¨ä¸åˆ°ï¼Œä½†æ˜¯æˆ‘é‡åˆ°äº†è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æˆ‘æƒ³è¯¦ç»†äº†è§£æˆ‘çš„ç«äº‰å¯¹æ‰‹çš„ç½‘ç«™ï¼ˆç”µå•†ç±»ï¼‰é”€å”®æƒ…å†µå’Œæ–°å“ä¸Šæ¶æƒ…å†µï¼Œä½†æ˜¯æˆ‘æ€»ä¸è‡³äºåƒç›¯ç›˜ä¸€æ ·ï¼Œåœ¨ç”µè„‘æˆ–è€…æ‰‹æœºä¸Šä¸€ç›´çœ‹ç€è¿™ä¸ªç«™å§ï¼

äºæ˜¯æˆ‘æƒ³åˆ°ç”¨ä¸€ä¸ªè„šæœ¬æ¥æ£€æµ‹ï¼Œè„šæœ¬çš„åŠŸèƒ½æ˜¯å¦‚æœå‘ç°å¯¹æ‰‹å‡ºå”®äº†å•†å“ï¼Œå°±å‘é€æˆ‘å”®å‡ºå•†å“çš„åç§°ï¼Œä»·æ ¼ï¼›å¦‚æœæ˜¯æ–°ä¸Šçº¿äº†å•†å“ï¼Œå°±è¦é‚®ä»¶å‘Šè¯‰æˆ‘æ–°å“çš„åç§°ï¼Œä»·æ ¼ï¼Œè¿™å¯¹äºæˆ‘åˆ†æå¯¹æ‰‹çš„é”€é‡å’Œè¶‹åŠ¿ï¼Œç„¶ååœ¨æˆ‘çš„åº—é“ºä¸­æ‹©ä¼˜ä¸Šè´§æ˜¯æœ‰ä¸€å®šå¸®åŠ©ä½œç”¨çš„ã€‚

å¦å¤–ï¼Œè¿™ä¸ªè„šæœ¬ä½œç”¨ä¸ä»…ä»…å¦‚æ­¤ï¼Œä½ ä¹Ÿå¯ä»¥ä¿®æ”¹ä¸€ä¸‹ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºç›‘æ§è‡ªå·±çš„æŠ–éŸ³ç²‰ä¸ä¸Šå‡è¶‹åŠ¿ã€å…¶ä»–äº‹ä»¶æ–°é—»è¿›å±•ã€ç”šè‡³æ˜¯å½“å‰çƒ­ç‚¹ç­‰ç­‰ã€‚

ç°æˆçš„äº§å“
å½“ç„¶ï¼Œæˆ‘å‰é¢çš„æƒ³æ³•åœ¨ç°å®ä¸­æ¯ä¸ªå…¬å¸ã€åº—é“ºéƒ½ç”¨å¾—åˆ°ï¼Œè€Œä¸”æœ‰äººä¸“é—¨å¼€å‘ç¨‹åºä¸ºæ­¤è€ŒæœåŠ¡ï¼Œæ¯”æ–¹è¯´æ¯”è¾ƒå¥½çš„ç½‘é¡µç›‘æ§å·¥å…·ï¼šVisualpingã€Distill Web Monitorã€Wacheteç­‰ï¼Œä»–ä»¬éƒ½æ˜¯åšè¿™ä¸ªçš„ä¹Ÿéƒ½å¾ˆä¸“ä¸šï¼Œä½†æ˜¯è¦æƒ³æ·±åº¦ä½¿ç”¨ï¼Œå°±è¦æ”¶è´¹äº†ï¼›

å›½å†…ä¹Ÿæœ‰ç±»ä¼¼çš„äº§å“ï¼Œæˆ‘å°è¯•è¿‡ã€‚ä¸è¿‡ä¹Ÿæœ‰é™åˆ¶ï¼Œæ¯å¤©1ä¸ªç½‘é¡µå˜åŒ–åªç»™10å°é‚®ä»¶ï¼Œç”³è¯·å†å¤šä¹Ÿè¦æ”¶è´¹ï¼

æ‰€ä»¥å§ï¼Œè‡ªå·±å†™æ¥è‡ªå·±ç”¨å§ï¼

ä»£ç 

import requests
from bs4 import BeautifulSoup
import smtplib
from email.mime.text import MIMEText

# ç½‘ç«™ URL
url = "https://"

# å‘é€é‚®ä»¶çš„å‚æ•°
sender = 'ä½ çš„å‘ä»¶äººé‚®ç®±'
receiver = 'ä½ çš„æ”¶ä»¶äººé‚®ç®±'
smtp\_server = 'smtp.xxx.com' # å‘ä»¶äººé‚®ç®±çš„ SMTP æœåŠ¡å™¨åœ°å€
smtp\_port = 465 # å‘ä»¶äººé‚®ç®±çš„ SMTP ç«¯å£
username = 'ä½ çš„å‘ä»¶äººé‚®ç®±'
password = 'ä½ çš„å‘ä»¶äººé‚®ç®±å¯†ç '

def send\_email(subject, body):
 # åˆ›å»º MIMEText é‚®ä»¶
 msg = MIMEText(body)
 msg['Subject'] = subject
 msg['From'] = sender
 msg['To'] = receiver

 # å‘é€é‚®ä»¶
 with smtplib.SMTP\_SSL(smtp\_server, smtp\_port) as server:
 server.login(username, password)
 server.sendmail(sender, receiver, msg.as\_string())

def get\_product\_info(product\_url):
 # è·å–å•†å“ä¿¡æ¯
 response = requests.get(product\_url)
 soup = BeautifulSoup(response.text, 'html.parser')
 title = soup.find('h1', class\_='h3').text
 price = soup.find('span', class\_='h2').text
 stock = soup.find('span', class\_='js-product-stock').text
 return (title, price, stock)

def check\_product\_sold\_out(product\_url):
 # æ£€æŸ¥å•†å“æ˜¯å¦å·²å”®å‡º
 response = requests.get(product\_url)
 soup = BeautifulSoup(response.text, 'html.parser')
 if soup.find('div', class\_='product-sold-out'):
 return True
 else:
 return False

# å®šæœŸæ£€æŸ¥å•†å“
while True:
 # è·å–ç½‘é¡µå†…å®¹
 response = requests.get(url)
 soup = BeautifulSoup(response.text, 'html.parser')

 # æŸ¥æ‰¾å•†å“åˆ—è¡¨
 product\_list = soup.find('div', class\_='js-product-list')

 # æ£€æŸ¥æ¯ä¸ªå•†å“æ˜¯å¦å”®å‡º
 for product in product\_list.find\_all('a', class\_='product-card'):
 product\_url = product['href']
 product\_title = product.find('h2').text
 if check\_product\_sold\_out(product\_url):
 # å•†å“å·²å”®å‡ºï¼Œå‘é€é‚®ä»¶é€šçŸ¥
 subject = f'å•†å“å·²å”®å‡ºï¼š{product\_title}'
 body = f'å•†å“åç§°ï¼š{product\_title}\n'
 send\_email(subject, body)
 else:
 # å•†å“æœªå”®å‡ºï¼Œæ£€æŸ¥æ˜¯å¦ä¸ºæ–°å•†å“
 try:
 # å°è¯•è·å–å•†å“ä¿¡æ¯ï¼Œå¦‚æœè·å–å¤±è´¥åˆ™è¯´æ˜æ˜¯æ–°å•†å“
 product\_title, product\_price, product\_stock = get\_product\_info(product\_url)
 except:
 # æ–°å•†å“ï¼Œå‘é€é‚®ä»¶é€šçŸ¥
 subject = f'æ–°å•†å“ä¸Šæ¶ï¼š{product\_title}'
 body = f'å•†å“åç§°ï¼š{product\_title}\nåº“å­˜ï¼š{product\_stock}\nä»·æ ¼ï¼š{product\_price}\n'
 send\_email(subject, body)

 # ç­‰å¾…ä¸€æ®µæ—¶é—´åå†æ¬¡æ£€æŸ¥
 time.sleep(300)
è§£é‡Šï¼šè¿™ä¸ªå°±æ˜¯ç½‘åº—çš„ç›‘æ§ç¨‹åºï¼Œæ–°å“ä¸Šæ¶ï¼Œå•†å“å”®å‡ºä¼šåƒé—´è°ä¸€æ ·åŠæ—¶é€šçŸ¥ä½ ï¼

å†èµ é€ä¸€ä¸ªï¼š

import requests
import hashlib
import time
import smtplib
from email.mime.text import MIMEText

url = 'https://'

def get\_hash(url):
 response = requests.get(url)
 return hashlib.sha256(response.content).hexdigest()

def send\_email(content):
 sender = ''
 receiver = ''
 password = ''
 smtp\_server = ''
 smtp\_port = 465

 message = MIMEText(content)
 message['From'] = sender
 message['To'] = receiver
 message['Subject'] = 'Website Change Alert'

 server = smtplib.SMTP\_SSL(smtp\_server, smtp\_port)
 server.login(sender, password)
 server.sendmail(sender, receiver, message.as\_string())
 server.quit()

current\_hash = get\_hash(url)
while True:
 new\_hash = get\_hash(url)
 if new\_hash != current\_hash:
 send\_email('Website content has changed.')
 current\_hash = new\_hash
 else:
 time.sleep(30)

è§£é‡Šï¼šè¿™ä¸ªä»£ç å¾ˆç®€å•ï¼Œæ¯”è¾ƒçš„æ˜¯ç½‘é¡µå“ˆå¸Œï¼Œåªè¦æœ‰å˜åŒ–å°±ä¼šé‚®ä»¶é€šçŸ¥ï¼Œå¯ç”¨äºä»»ä½•åœºæ™¯ï¼

å¦‚ä½•ä½¿ç”¨
ä¸Šé¢çš„ä»£ç æ˜¯pythonçš„ï¼Œä¿®æ”¹åå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚åå°è¿è¡Œçš„æ–¹æ³•ï¼š

nohup python3 jiankong.py > output.log 2>&1 &

[å–æ¶ˆå›å¤](https://blog.upx8.com/3227#respond-post-3227)

### åœ¨ä¸‹æ–¹ç•™ä¸‹æ‚¨çš„è¯„è®º.[åŠ å…¥TGç¾¤](https://t.me/).[æ‰“èµğŸ—](/reward.html)

æäº¤è¯„è®º

* [Post](/author/1)
* [Link](/links.html)
* [å·¥å…·](https://tools.upx8.com/)
* [å…³äº](/about.html)
* [æ–‡åº“](/WooyunDrops)

[![](/usr/uploads/ypyun.png)](https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral "èµåŠ©å•†")
Copyright Â© 2024 é»‘æµ·æ´‹. All rights reserved.
[çœ‹é›ªèµåŠ©](https://www.kanxue.com/ "çœ‹é›ªå­¦é™¢èµåŠ©")

[æµ™ICPå¤‡2021040518å·](http://beian.miit.gov.cn "æµ™ICPå¤‡2021040518å·") [Sitemap](sitemap.xml?type=index "Sitemap")