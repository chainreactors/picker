---
title: ç”¨æœºå™¨äººè®©åšå®¢æ–°å‘å¸ƒçš„æ–‡ç« åœ¨telegramç¾¤ç»„é‡Œè¿›è¡Œè‡ªåŠ¨æ¨é€
url: https://blog.upx8.com/3277
source: é»‘æµ·æ´‹ - WIKI
date: 2023-03-18
fetch_date: 2025-10-04T09:58:06.670698
---

# ç”¨æœºå™¨äººè®©åšå®¢æ–°å‘å¸ƒçš„æ–‡ç« åœ¨telegramç¾¤ç»„é‡Œè¿›è¡Œè‡ªåŠ¨æ¨é€

# [é»‘æµ·æ´‹ - Wiki](/ "é»‘æµ·æ´‹ - Wiki - ç‚¹å‡»è¿”å›é¦–é¡µ")

# ç”¨æœºå™¨äººè®©åšå®¢æ–°å‘å¸ƒçš„æ–‡ç« åœ¨telegramç¾¤ç»„é‡Œè¿›è¡Œè‡ªåŠ¨æ¨é€

å‘å¸ƒæ—¶é—´:
2023-03-17

åˆ†ç±»:
[Webå¼€å‘/Code](https://blog.upx8.com/code/)

çƒ­åº¦:
20670

## å‰è¨€

ä¸ºäº†è®©åšå®¢æ–°å‘å¸ƒçš„æ–‡ç« èƒ½è‡ªåŠ¨æ¨é€åˆ°telegramçš„åšå®¢äº¤æµç¾¤ï¼Œæ‰€ä»¥å†™äº†è¿™ä¸ªæœºå™¨äººä»£ç ï¼Œå®ç°äº†å•ä¸ªæˆ–å¤šä¸ªç¾¤ç»„åŒæ—¶æ¨é€æ–‡ç« ã€‚åªæœ‰ä½ ç½‘ç«™æ”¯æŒRSSå°±å¯ä»¥ç”¨ã€‚ä¸å¤šè¯´ï¼Œç›´æ¥ä¸Šæ•™ç¨‹ã€‚

## ç¬¬ä¸€æ­¥ï¼ˆå®‰è£…mwé¢æ¿ï¼‰

å› ä¸ºè¿™ä¸ªä»£ç æ˜¯åŸºäºMWé¢æ¿ã€tgbot 0.1ã€‘æ’ä»¶å†™çš„ï¼Œæ‰€ä»¥è¿™ä¸ªé¢æ¿å®‰è£…ä¸ºå¿…é¡»æ­¥éª¤ã€‚å…·ä½“å®‰è£…æ­¥éª¤çœ‹ä»¥ä¸‹æ–‡ç« 

[Linuxä¸»æœºå¼€æºé¢æ¿ï¼šmdserver-webï¼Œå®Œå…¨å…è´¹ï¼Œç•Œé¢ä»¿å®å¡”é¢æ¿](https://blog.upx8.com/go/aHR0cHM6Ly9naXRodWIuY29tL21pZG9rcy9tZHNlcnZlci13ZWI)

mdserver-webï¼šæ”¯æŒCentosã€Debianã€Ubuntuç­‰ç³»ç»Ÿè‡³äºä¸ºä»€ä¹ˆæ¨èè¿™ä¸ªé¢æ¿å‘¢ï¼Ÿå› ä¸ºæ˜¯å®Œå…¨å¼€æºçš„ï¼Œå†è€…å°±æ˜¯å®å¡”ï¼ˆåé—¨å¡”ï¼‰çš„å„ç§ä¸Šä¼ ç”¨æˆ·éšç§äº‹ä»¶å®å¡”ä¸Šä¼ ç”¨æˆ·éšç§æ•°æ®æ–°é—»äºŒMWé¢æ¿çš„ç¯å¢ƒç»„ä»¶å…¨éƒ½æ˜¯ä»å®˜æ–¹ç›´è¿ä¸‹è½½å®‰è£…çš„ï¼Œemmmï¼Œè§£é‡Šä¸€ä¸‹æ˜¯ä»€ä¹ˆå®˜æ–¹ï¼Œæ¯”å¦‚ä½ å®‰è£…PHPé‚£ä¹ˆå°±æ˜¯ä»P...

## ç¬¬äºŒæ­¥ï¼ˆå®‰è£…ä¾èµ–ï¼‰

è¿è¡Œä»¥ä¸‹ä»£ç å®‰è£…æœºå™¨äººæ‰€éœ€ä¾èµ–

```
pip install feedparser && pip install schedule
```

å¦‚æœå®‰è£…å‡ºç°æŠ¥é”™ä¸èƒ½æ­£å¸¸è¿›è¡Œå®‰è£…ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£…ï¼ˆè£…äº†é¢æ¿ï¼Œå…ˆè·‘è¿™ä¸ªå‘½ä»¤ï¼‰

```
cd /www/server/mdserver-web && source bin/a* && pip install feedparser && pip install schedule
```

## ç¬¬ä¸‰æ­¥ï¼ˆå®‰è£…é…ç½®tgbot 0.1æ’ä»¶ï¼‰

1. å¦‚å›¾æ‰€ç¤ºï¼Œåœ¨é¢æ¿æ‰¾åˆ°ã€è½¯ä»¶ç®¡ç†ã€‘-ã€å…¶ä»–æ’ä»¶ã€‘ä½ç½®å®‰è£…æ’ä»¶è¿›è¡Œæ“ä½œã€‚

[![2023-03-16T09:48:30.png](https://cdn.jsdelivr.net/gh/notetoday/img/usr/uploads/2023/03/16/1678960111.png "2023-03-16T09:48:30.png")](https://cdn.jsdelivr.net/gh/notetoday/img/usr/uploads/2023/03/16/1678960111.png "2023-03-16T09:48:30.png")

2. B.å®‰è£…å®Œæ¯•æ’ä»¶åæ‰“å¼€æ’ä»¶çš„è®¾ç½®ï¼Œåœ¨ã€boté…ç½®ã€‘çš„ã€app\_tokenã€‘å¤„å¡«å†™ä½ åˆ›å»ºçš„æœºå™¨äººçš„tokenç„¶åä¿å­˜ï¼›åˆ›å»ºæœºå™¨äººå’Œè·å–tokenéƒ½åœ¨telegramçš„@BotFatheré‡Œè¿›è¡Œçš„ã€‚

[![2023-03-16T09:51:30.png](https://cdn.jsdelivr.net/gh/notetoday/img/usr/uploads/2023/03/16/1678960291.png "2023-03-16T09:51:30.png")](https://cdn.jsdelivr.net/gh/notetoday/img/usr/uploads/2023/03/16/1678960291.png "2023-03-16T09:51:30.png")

åœ¨æ’ä»¶è®¾ç½®çš„å‰é¢æœ‰ä¸ªã€æ–‡ä»¶å¤¹ã€‘çš„å›¾æ ‡ï¼Œç‚¹å‡»å›¾æ ‡è¿›å…¥æ’ä»¶çš„å®‰è£…ç›®å½•ï¼Œè¿›å…¥ã€extendã€‘æ–‡ä»¶å¤¹ï¼Œæ–°å»ºã€push\_blog\_new.pyã€‘æ–‡ä»¶ï¼Œå°†ä»¥ä¸‹ä»£ç ç²˜è´´åˆ°æ–°å»ºçš„æ–‡ä»¶é‡Œå¹¶ä¿å­˜ã€‚
**å®æ—¶ç‰ˆæœ¬**

```
import sys
import io
import os
import time
import re
import json
import base64
import threading
import feedparser

sys.path.append(os.getcwd() + "/class/core")
import mw

import telebot
from telebot import types
from telebot.util import quick_markup

sent_posts_file = 'sent_timestamp.json'
push_lock = threading.Lock()

def get_latest_blog_post():
    rss_url = 'https://www.google.com/rss/' # æŠŠç½‘å€æ›¿æ¢ä¸ºä½ ç½‘ç«™çš„RSSåœ°å€
    feed = feedparser.parse(rss_url)

    latest_post = {
        'title': feed.entries[0].title,
        'link': feed.entries[0].link,
        'timestamp': time.mktime(feed.entries[0].published_parsed)
    }

    return latest_post

def load_last_sent_timestamp():
    if os.path.exists(sent_posts_file):
        with open(sent_posts_file, 'r') as f:
            timestamp = json.load(f)
            return float(timestamp)
    else:
        return None

def save_last_sent_timestamp(timestamp):
    with open(sent_posts_file, 'w') as f:
        json.dump(float(timestamp), f)

def send_blog_post_to_group(bot, chat_ids):
    with push_lock:
        last_sent_timestamp = load_last_sent_timestamp()
        latest_post = get_latest_blog_post()
        if last_sent_timestamp is None or float(last_sent_timestamp) < latest_post['timestamp']:
            message_text = f"{latest_post['title']}:\n{latest_post['link']}"
            for chat_id in chat_ids:
                bot.send_message(chat_id, message_text)
            save_last_sent_timestamp(latest_post['timestamp'])

def schedule_blog_post_check(bot, chat_ids):
    threading.Timer(600, schedule_blog_post_check, args=(bot, chat_ids)).start()
    send_blog_post_to_group(bot, chat_ids)

def run(bot_instance):
    chat_ids = [-1001578009023]   # è¿™é‡Œå¡«å†™ä½ çš„ç¾¤IDï¼Œæ ¹æ®éœ€è¦æ·»åŠ æ›´å¤šç¾¤ç»„çš„IDï¼Œæ ¼å¼ä¸º-1001578009023, -1001578009024, -1001578009025
    schedule_blog_post_check(bot_instance, chat_ids)
```

**å®šæ—¶ç‰ˆæœ¬**

```
import sys
import io
import os
import time
import re
import json
import base64
import feedparser
import schedule

sys.path.append(os.getcwd() + "/class/core")
import mw

import telebot
from telebot import types
from telebot.util import quick_markup

sent_posts_file = 'sent_timestamp.json'

def get_latest_blog_post():
    rss_url = 'https://www.google.com/rss/'  # æŠŠç½‘å€æ›¿æ¢ä¸ºä½ ç½‘ç«™çš„RSSåœ°å€
    feed = feedparser.parse(rss_url)

    latest_post = {
        'title': feed.entries[0].title,
        'link': feed.entries[0].link,
        'timestamp': time.mktime(feed.entries[0].published_parsed)
    }

    return latest_post

def load_last_sent_timestamp():
    if os.path.exists(sent_posts_file):
        with open(sent_posts_file, 'r') as f:
            timestamp = json.load(f)
            return float(timestamp)
    else:
        return None

def save_last_sent_timestamp(timestamp):
    with open(sent_posts_file, 'w') as f:
        json.dump(float(timestamp), f)

def send_blog_post_to_group(bot, chat_ids):
    last_sent_timestamp = load_last_sent_timestamp()
    latest_post = get_latest_blog_post()
    if last_sent_timestamp is None or float(last_sent_timestamp) < latest_post['timestamp']:
        message_text = f"{latest_post['title']}:\n{latest_post['link']}"
        for chat_id in chat_ids:
            bot.send_message(chat_id, message_text)
        save_last_sent_timestamp(latest_post['timestamp'])

def run_schedule(bot, chat_ids):
    while True:
        schedule.run_pending()
        time.sleep(1)

def schedule_blog_post_check(bot, chat_ids):
    schedule.every(5).minutes.do(send_blog_post_to_group, bot, chat_ids) # schedule.every(5)å°†5æ”¹ä¸º10å°±æ˜¯10åˆ†é’Ÿæ£€æµ‹ä¸€æ¬¡æ˜¯å¦æœ‰æœ€æ–°æ–‡ç« ã€‚

def run(bot_instance):
    chat_ids = [-1001578009023]  # è¿™é‡Œå¡«å†™ä½ çš„ç¾¤IDï¼Œæ ¹æ®éœ€è¦æ·»åŠ æ›´å¤šç¾¤ç»„çš„IDï¼Œæ ¼å¼ä¸º-1001578009023, -1001578009024, -1001578009025
    schedule_blog_post_check(bot_instance, chat_ids)
    run_schedule(bot_instance, chat_ids)
```

## ç¬¬å››æ­¥ï¼ˆå¯åŠ¨æœºå™¨äººæ‰©å±•ï¼‰

åœ¨ã€è½¯ä»¶ç®¡ç†ã€‘-ã€å·²å®‰è£…ã€‘æ‰¾åˆ°æ’ä»¶ï¼Œç‚¹å‡»ã€è®¾ç½®ã€‘åæ‰¾åˆ°ã€æ‰©å±•åˆ—è¡¨ã€‘ï¼Œå¯ä»¥çœ‹è§æœ‰ã€push\_blog\_new.pyã€‘çš„æ‰©å±•ï¼Œç‚¹å‡»åé¢çš„è¿è¡ŒæŒ‰é’®ï¼Œæœºå™¨äººå³å¯æ¨é€åšå®¢æ–‡ç« äº†ï¼ˆ**å‰ææ˜¯æœºå™¨äººå·²ç»åœ¨ç›¸å…³çš„ç¾¤é‡Œ**ï¼‰ã€‚
[![2023-03-16T10:14:13.png](https://cdn.jsdelivr.net/gh/notetoday/img/usr/uploads/2023/03/16/1678961654.png "2023-03-16T10:14:13.png")](https://cdn.jsdelivr.net/gh/notetoday/img/usr/uploads/2023/03/16/1678961654.png "2023-03-16T10:14:13.png")

ç›¸å…³ï¼šhttps://www.notetoday.net/note/538.html

[å–æ¶ˆå›å¤](https://blog.upx8.com/3277#respond-post-3277)

### åœ¨ä¸‹æ–¹ç•™ä¸‹æ‚¨çš„è¯„è®º.[åŠ å…¥TGç¾¤](https://t.me/).[æ‰“èµğŸ—](/reward.html)

æäº¤è¯„è®º

* [Post](/author/1)
* [Link](/links.html)
* [å·¥å…·](https://tools.upx8.com/)
* [å…³äº](/about.html)
* [æ–‡åº“](/WooyunDrops)

[![](/usr/uploads/ypyun.png)](https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral "èµåŠ©å•†")
Copyright Â© 2024 é»‘æµ·æ´‹. All rights reserved.
[çœ‹é›ªèµåŠ©](https://www.kanxue.com/ "çœ‹é›ªå­¦é™¢èµåŠ©")

[æµ™ICPå¤‡2021040518å·](http://beian.miit.gov.cn "æµ™ICPå¤‡2021040518å·") [Sitemap](sitemap.xml?type=index "Sitemap")