---
title: redteamå®æˆ˜ä¸­çš„Frpå¤šçº§ä»£ç†
url: https://www.svenbeast.com/post/NIsft997g/
source: æ”»åŸè‚¾é€shi | sv3nbeast
date: 2022-12-03
fetch_date: 2025-10-04T00:22:53.042971
---

# redteamå®æˆ˜ä¸­çš„Frpå¤šçº§ä»£ç†

[æ”»åŸè‚¾é€shi | sv3nbeast](https://www.svenbeast.com)

[é¦–é¡µ](/)
[ğŸ“ƒæ–‡ç« åˆ—è¡¨](/posts)
[ğŸ“–å½’æ¡£](/archives)
[ğŸ·ï¸æ ‡ç­¾](/tags)
[ğŸ”¥å…³äº](/post/about)
[ ]

[æ”»åŸè‚¾é€shi | sv3nbeast](https://www.svenbeast.com)

Dark

\u6697\u9ED1

â˜° Menu

â˜° èœå•

[é¦–é¡µ](/)
[ğŸ“ƒæ–‡ç« åˆ—è¡¨](/posts)
[ğŸ“–å½’æ¡£](/archives)
[ğŸ·ï¸æ ‡ç­¾](/tags)
[ğŸ”¥å…³äº](/post/about)

# redteamä¹‹å®æˆ˜éš§é“ä»£ç†æ–¹æ¡ˆ

Author:
[æ–¯æ–‡](/)

Date: 2022-12-02
Reading Time:4.5 mins
words:1162

Category:
[çº¢é˜Ÿ](https://www.svenbeast.com/tag/kroo8dSGd/)
[ä»£ç†](https://www.svenbeast.com/tag/XT2Jo3goU/)
[ç¬”è®°](https://www.svenbeast.com/tag/rwt8EXIMSg/)

share:

ä½œè€…:
[æ–¯æ–‡](/)
æ—¥æœŸ: 2022-12-02
é˜…è¯»æ—¶é—´:4.5 åˆ†é’Ÿ
å­—æ•°:1162
åˆ†ç±»:
[çº¢é˜Ÿ](https://www.svenbeast.com/tag/kroo8dSGd/)
[ä»£ç†](https://www.svenbeast.com/tag/XT2Jo3goU/)
[ç¬”è®°](https://www.svenbeast.com/tag/rwt8EXIMSg/)

åˆ†äº«:

### 0x01 æµ…è¨€

â€‹ åœ¨çº¢é˜Ÿè¡ŒåŠ¨ä¸­ï¼Œæ­å»ºéš§é“å‡ ä¹å¯ä»¥è¯´æ˜¯å¿…é‡åˆ°çš„æ”»å‡»åœºæ™¯ä¹‹ä¸€ï¼Œæ‰€ä»¥æå‰å‡†å¤‡å¥½ç›¸åº”çš„éš§é“ä»£ç†æ–¹æ¡ˆå¯¹äºæé«˜æ”»å‡»æ•ˆç‡å°¤ä¸ºé‡è¦ï¼Œå®é™…é¡¹ç›®ä¸­ä¼šé‡åˆ°çš„é—®é¢˜ä¹Ÿæ˜¯æœ¬æ–‡ä¸»è¦è§£å†³çš„é—®é¢˜å¦‚ä¸‹:

* 1.æ¯å¤šä¸€å±‚ä»£ç†å°±é‡å¤´å¼€å§‹æ­å»ºä¸€æ¬¡éš§é“ï¼Œæ— åºä¸”æ··ä¹±
* 2.æ€è½¯æŸ¥æ€
* 3.ä»£ç†è¿›ç¨‹ç‰¹å¾æ˜æ˜¾ï¼Œè¢«ç›®æ ‡æˆ–å…¶ä»–é˜Ÿä¼å‘ç°å¼‚å¸¸å¯¼è‡´ä»£ç†æ‰çº¿ï¼Œå°†æ—¶é—´æµªè´¹åœ¨é‡å¤æ­å»ºçš„è¿‡ç¨‹ä¸­

### 0x02 æ‹“æ‰‘å›¾åŠå·¥å…·

é¡¹ç›®åœ°å€: https://github.com/DongHuangT1/Frp

* æ­¤äºŒå¼€ç‰ˆæ”¯æŒwebsocketåè®®çš„åŸŸå‰ç½®ï¼Œå°†ç”¨åšå…¥å£ç‚¹æœºå™¨çš„éš§é“æ­å»º

é¡¹ç›®åœ°å€: https://github.com/Goqi/Erfrp

* æ­¤äºŒå¼€ç‰ˆä¿®æ”¹äº†æµé‡ç‰¹å¾ï¼Œå°†ç”¨åšå†…ç½‘æœºå™¨çš„éš§é“æ­å»º

FRPå¤šçº§ä»£ç†æ‹“æ‰‘å›¾: https://github.com/sv3nbeast/Frp-Mapping

* æ–‡å­—æè¿°ç¹çä¸”ä¸å¥½ç†è§£ï¼Œè¿™é‡Œç”»ä¸€ä¸ªå¤šçº§ä»£ç†çš„æ‹“æ‰‘å›¾æ–¹ä¾¿ç†è§£

![](https://www.svenbeast.com/post-images/1670510756528.png)

â€‹ å®é™…ä¸Šfrpç»è¿‡ä¿®æ”¹è¿‡çš„æºç æ€è½¯æŸ¥æ€å¹¶ä¸ä¸¥é‡ï¼Œæ‰€ä»¥äºŒå¼€è¿‡çš„frpï¼Œè¿‡æ€è½¯å¯ä»¥ç®—æ˜¯ä¸€ä¸ªè¢«åŠ¨æŠ€èƒ½ï¼Œè‹¥æœ‰ä¹ æƒ¯å…¶ä»–ä¼˜ç§€éš§é“è½¯ä»¶çš„ï¼Œå¦‚stowawayã€fusoã€npsç­‰ï¼Œæ¨èæŒ‰æ­¤æ–‡ç†æ¸…ä»£ç†é€»è¾‘è¿›è¡Œæ–¹æ¡ˆå¤åˆ»ã€‚

### 0x03 ä»£ç†æµç¨‹

â€‹ é€šè¿‡ç¼–å†™çš„å¤šçº§ä»£ç†æ‹“æ‰‘å›¾å¯ä»¥å‘ç°ä¸åŒå±‚çº§ä»£ç†çš„ä¸€ç‚¹åŒºåˆ«ï¼Œæ— è®ºæ˜¯å…¥å£ç‚¹æœºå™¨è¿˜æ˜¯å†…ç½‘æœºå™¨æ— éå°±æ˜¯æå‰åœ¨å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶å†…å†™å¥½å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„ç«¯å£å¯¹åº”ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆä¸ä»ä¸€å¼€å§‹å°±ä½¿ç”¨å¤šçº§ä»£ç†çš„é…ç½®æ–‡ä»¶ä»è€Œé¿å…å†…ç½‘æ¨ªå‘åé‡æ–°æ­å»ºäºŒå±‚ã€ä¸‰å±‚ä»£ç†å‘¢ï¼Œé‚è¿™é‡Œæä¾›ä¸ªäººåœ¨ä½¿ç”¨çš„æœ€é«˜æ”¯æŒä¸‰çº§ä»£ç†çš„é…ç½®æ–‡ä»¶ã€‚

![](https://www.svenbeast.com/post-images/1670510764674.png)!

#### 1.å…¬ç½‘æœåŠ¡ç«¯

```
#frps.ini
[common]
token = xxxxxx
bind_port = 80
websocket_path = /xxxxx
dingding_token =
```

#### 2.å…¥å£ç‚¹å®¢æˆ·ç«¯

```
#frpc.ini
[common]
token = xxxxxx
del_enable = true
server_addr = author.xxx.com.xx.xx.com.cn
server_port = 80
protocol = websocket
websocket_path = /xxxxx
websocket_host = author.xxx.com

[socks5_to_1]
type = tcp
remote_port = 20000
plugin = socks5
plugin_user = admin
plugin_passwd = admin123
use_encryption = true
use_compression = true

[socks5_to_2]
type = tcp
local_ip = 127.0.0.1
local_port = 10088
remote_port = 12020

[socks5_to_3]
type = tcp
local_ip = 127.0.0.1
local_port = 11088
remote_port = 13020
```

#### 3.å…¥å£ç‚¹æœåŠ¡ç«¯

```
#frps.ini
[common]
bind_port = 7000
```

#### 4.äºŒçº§ä»£ç†æœºå®¢æˆ·ç«¯

```
#frpc.ini
[common]
#å…¥å£ç‚¹æœåŠ¡ç«¯æœºå™¨çš„IP
server_addr = 192.168.3.75
server_port = 7000

[socks5_to_1]
type = tcp
plugin = socks5
remote_port = 10088

[socks5_to_2]
type = tcp
local_ip = 127.0.0.1
local_port = 12088
remote_port = 11088
```

#### 5.äºŒçº§ä»£ç†æœºæœåŠ¡ç«¯

```
#frps.ini
[common]
bind_port = 7000
```

#### 6.ä¸‰çº§ä»£ç†æœºå®¢æˆ·ç«¯

```
#frpc.ini
[common]
#äºŒçº§ä»£ç†æœåŠ¡ç«¯æœºå™¨çš„IP
server_addr = 192.168.3.144
server_port = 7000

[socks5_to_1]
type = tcp
plugin = socks5
remote_port = 12088
```

#### ä¸åŒå±‚çº§ä»£ç†è¿æ¥åœ°å€

```
å…¥å£ç‚¹æœºå™¨ä»£ç†
socks5 100.100.100.100:20000   admin  admin123

äºŒçº§ä»£ç†æœºå™¨ä»£ç†
socks5 100.100.100.100:12020  æ— å¯†ç 

ä¸‰çº§ä»£ç†æœºå™¨ä»£ç†
socks5 100.100.100.100:13020  æ— å¯†ç 
```

â€‹ ä¸Šé¢æ˜¯æœ€å¤šæ”¯æŒä¸‰çº§ä»£ç†çš„å„ä¸ªé…ç½®æ–‡ä»¶å’Œè¿æ¥ä¿¡æ¯ï¼Œæ¯æ¬¡é¡¹ç›®å¼€å§‹æ­å»ºç¬¬ä¸€ä¸ªéš§é“æ—¶ç›´æ¥æŒ‰ç…§ä¸‰çº§ä»£ç†çš„å±‚çº§è¿›è¡Œæ­å»ºå³å¯ï¼Œæ¯å¤šä¸€å±‚ç›´æ¥åœ¨ä¸‹ä¸€å°æœºå™¨è¿›è¡Œè¿æ¥ã€‚

**æ³¨: å› ä¸ºä½¿ç”¨äº†2ç§äºŒå¼€ç‰ˆfrpï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨æ—¶éœ€ä¿è¯å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¸ºåŒä¸€ç§frp**

### 0x04 ç®—ä¸ä¸Štipsçš„tips

#### å¯åŠ¨æ–¹å¼

â€‹ frpé»˜è®¤ä¼šåŠ è½½å½“å‰ç›®å½•ä¸‹çš„frpc.iniæ–‡ä»¶ï¼Œå»ºè®®ç›´æ¥ä¿®æ”¹æºå¸¦ä¼ªè£…æ€§çš„frpæ–‡ä»¶åå­—ï¼Œå¦‚linuxçš„agentã€windowsçš„svchost.exeï¼Œå¹¶ä¸Šä¼ frpc.iniåˆ°å½“å‰ç›®å½•ï¼Œè¿™æ ·ç›´æ¥å¯åŠ¨ä¸éœ€è¦æºå¸¦ä»»ä½•å‚æ•°ï¼Œç„¶ååˆ é™¤é…ç½®æ–‡ä»¶å³å¯ï¼Œè™½ç„¶å¾ˆå¤šäººä½¿ç”¨çš„frpæ”¯æŒhttpè¿œç¨‹åŠ è½½å’ŒåŠ å¯†å‚æ•°ä¼ è¾“ï¼Œä½†å°±ç‰¹å¾è€Œè¨€ï¼Œæ˜¯å¾ˆæ˜æ˜¾çš„ï¼Œé€šè¿‡ä¼ å‚è¿›è¡Œç¡®å®šæ›¾ç»killè¿‡å¾ˆå¤šå…¶ä»–é˜Ÿä¼çš„ä»£ç†å·¥å…·ï¼Œæ‰€ä»¥ä¸å»ºè®®ä¼ ä»»ä½•å‚æ•°ã€‚

![](https://www.svenbeast.com/post-images/1670510837573.png)

å¦‚æœè§‰å¾—ä¸Šä¼ frpc.iniæ–‡ä»¶ä¸ä¹ æƒ¯ï¼Œå¯ä»¥ä¿®æ”¹æ­¤æ–‡ä»¶`/cmd/frpc/sub/root.go`ï¼Œå°†é»˜è®¤åŠ è½½çš„é…ç½®æ–‡ä»¶æ”¹æˆå…¶ä»–åå­—é‡æ–°ç¼–è¯‘ã€‚

#### åˆ é™¤æ–‡ä»¶

â€‹ linuxå¯åŠ¨ä»£ç†åä¸å…‰å¯ä»¥åˆ é™¤é…ç½®æ–‡ä»¶ï¼ŒäºŒè¿›åˆ¶æ–‡ä»¶ä¹Ÿå¯ä»¥ä¸€èµ·åˆ æ‰ï¼Œä¸ä¼šå½±å“å·²å¯åŠ¨å¾—ä»£ç†è¿›ç¨‹ï¼Œåœ¨linuxæœºä¸­å…»æˆå¥½ä¹ æƒ¯ï¼Œè¿è¡Œååˆ é™¤æ–‡ä»¶

### 0x05 ç»“æŸ

å†æ€»ç»“ä¸€ä¸‹ä¼˜ç‚¹:

* æŒ‰éƒ¨å°±ç­ï¼Œé€»è¾‘æ¸…æ™°ï¼Œæ¯æ¬¡åªéœ€ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„ip
* æ­å»ºå¥½åå¯ä»¥ä»»æ„é€‰æ‹©å±‚çº§è¿›è¡Œè¿æ¥ï¼Œè€Œä¸æ˜¯åªèƒ½è¿æ¥ä¸€å±‚
* ä¸å¿…è€ƒè™‘æ€è½¯
* æ— è¿›ç¨‹ç‰¹å¾

* + - [0x01 æµ…è¨€](#0x01-%E6%B5%85%E8%A8%80)
    - [0x02 æ‹“æ‰‘å›¾åŠå·¥å…·](#0x02-%E6%8B%93%E6%89%91%E5%9B%BE%E5%8F%8A%E5%B7%A5%E5%85%B7)
    - [0x03 ä»£ç†æµç¨‹](#0x03-%E4%BB%A3%E7%90%86%E6%B5%81%E7%A8%8B)
      * [1.å…¬ç½‘æœåŠ¡ç«¯](#1%E5%85%AC%E7%BD%91%E6%9C%8D%E5%8A%A1%E7%AB%AF)
      * [2.å…¥å£ç‚¹å®¢æˆ·ç«¯](#2%E5%85%A5%E5%8F%A3%E7%82%B9%E5%AE%A2%E6%88%B7%E7%AB%AF)
      * [3.å…¥å£ç‚¹æœåŠ¡ç«¯](#3%E5%85%A5%E5%8F%A3%E7%82%B9%E6%9C%8D%E5%8A%A1%E7%AB%AF)
      * [4.äºŒçº§ä»£ç†æœºå®¢æˆ·ç«¯](#4%E4%BA%8C%E7%BA%A7%E4%BB%A3%E7%90%86%E6%9C%BA%E5%AE%A2%E6%88%B7%E7%AB%AF)
      * [5.äºŒçº§ä»£ç†æœºæœåŠ¡ç«¯](#5%E4%BA%8C%E7%BA%A7%E4%BB%A3%E7%90%86%E6%9C%BA%E6%9C%8D%E5%8A%A1%E7%AB%AF)
      * [6.ä¸‰çº§ä»£ç†æœºå®¢æˆ·ç«¯](#6%E4%B8%89%E7%BA%A7%E4%BB%A3%E7%90%86%E6%9C%BA%E5%AE%A2%E6%88%B7%E7%AB%AF)
      * [ä¸åŒå±‚çº§ä»£ç†è¿æ¥åœ°å€](#%E4%B8%8D%E5%90%8C%E5%B1%82%E7%BA%A7%E4%BB%A3%E7%90%86%E8%BF%9E%E6%8E%A5%E5%9C%B0%E5%9D%80)
    - [0x04 ç®—ä¸ä¸Štipsçš„tips](#0x04-%E7%AE%97%E4%B8%8D%E4%B8%8Atips%E7%9A%84tips)
      * [å¯åŠ¨æ–¹å¼](#%E5%90%AF%E5%8A%A8%E6%96%B9%E5%BC%8F)
      * [åˆ é™¤æ–‡ä»¶](#%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6)
    - [0x05 ç»“æŸ](#0x05-%E7%BB%93%E6%9D%9F)

Author:
æ–¯æ–‡

Permalink:
<https://www.svenbeast.com/post/NIsft997g/>

License:
MIT License

ä½œÂ Â Â è€…:
æ–¯æ–‡

æ°¸ä¹…é“¾æ¥:
<https://www.svenbeast.com/post/NIsft997g/>

åÂ Â Â è®®:
MIT License

Tag(s):

[# çº¢é˜Ÿ](https://www.svenbeast.com/tag/kroo8dSGd/)
[# ä»£ç†](https://www.svenbeast.com/tag/XT2Jo3goU/)
[# ç¬”è®°](https://www.svenbeast.com/tag/rwt8EXIMSg/)

back

æ ‡ç­¾:

[# çº¢é˜Ÿ](https://www.svenbeast.com/tag/kroo8dSGd/)
[# ä»£ç†](https://www.svenbeast.com/tag/XT2Jo3goU/)
[# ç¬”è®°](https://www.svenbeast.com/tag/rwt8EXIMSg/)

è¿”å›

[é’ˆå¯¹"çº¢é˜Ÿäººå‘˜"çš„Githubé¡¹ç›®æŠ•æ¯’å‘ç°åŠåˆ†æ](https://www.svenbeast.com/post/ZVscVsf50/)
[Pentesting active directory æ€è·¯ä¸€è§ˆå›¾](https://www.svenbeast.com/post/flYRjNxuy/)

èµ  ![support](https://www.svenbeast.com/media/images/alipay.png)**æ”¯ä»˜å®**   ![support](https://www.svenbeast.com/media/images/wechat.png)**å¾®ä¿¡**

[äº¬ICPå¤‡19028185å·](http://beian.miit.gov.cn/)

æ”»åŸè‚¾é€shi | sv3nbeast Â©Copyright
 ![dandan](https://i.loli.net/2020/03/31/kG71rUoEW5YQq4h.gif)

/\*
\*/

å¬å”¤ä¼Šæ–¯ç‰¹ç“¦å°”