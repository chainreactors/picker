---
title: LLM如何安全对齐（基础篇）
url: https://forum.butian.net/share/4498
source: 奇安信攻防社区
date: 2025-08-22
fetch_date: 2025-10-07T00:17:05.521270
---

# LLM如何安全对齐（基础篇）

#

[问答](https://forum.butian.net/questions)

*发起*

* [提问](https://forum.butian.net/question/create)
* [文章](https://forum.butian.net/share/create)

[攻防](https://forum.butian.net/community)
[活动](https://forum.butian.net/movable)

Toggle navigation

* [首页 (current)](https://forum.butian.net)
* [问答](https://forum.butian.net/questions)
* [商城](https://forum.butian.net/shop)
* [实战攻防技术](https://forum.butian.net/community)
* [漏洞分析与复现](https://forum.butian.net/articles)
  NEW
* [活动](https://forum.butian.net/movable)
* [摸鱼办](https://forum.butian.net/questions/Play)

搜索

* [登录](https://forum.butian.net/login)
* [注册](https://user.skyeye.qianxin.com/user/register?next=http://forum.butian.net/btlogin)

### LLM如何安全对齐（基础篇）

AI对齐旨在确保AI系统，其能力与行为同人类的价值观,意图及伦理规范保持一致
本文将系统性梳理AI对齐的基础原则，剖析理论与算法的挑战
1.模型固有的逆向对齐趋势
2.人类偏好非传递性导致的收敛困境
3.安全保障的系统性复杂性

\*\*一：AI对齐的基础与原则\*\*
AI对齐的根本目标在于引导大语言模型的能力发展，使其行为输出与人类社会的共同价值观 明确意图和普适伦理规范相符，从而在人机交互中建立安全与信任
一个未经充分对齐的模型，会充满（幻觉）固化社会偏见（算法歧视），或被用于恶意目的，构成潜在风险
![image.png](https://cdn-yg-zzbm.yun.qianxin.com/attack-forum/2025/07/attach-94c5c663c92d9df71944bb2c8487251dfcbce50a.png)
对齐的目标可从两个层面进行界定：
- \*\*广义目标 (RICE原则)\*\*：一个宏观的理想框架，要求模型具备鲁棒性 可解释性可控性和伦理性
- \*\*狭义目标 (3H原则)\*\*：在工业界应用中，目标更为具体，聚焦于模型输出是否有帮助诚实和无害
实现对齐技术通常遵循两个阶段：
1. \*\*预训练\*\*：模型在海量文本数据上进行自回归学习，构建其关于语言规律和世界知识的通用基础模型此阶段塑造了模型最核心的内在表征
2. \*\*对齐后训练\*\*：通过\*\*监督微调（SFT）\*\*和\*\*基于人类反馈的强化学习（RLHF）\*\*等技术，进一步激发和约束模型的能力，使其能够理解并遵循人类的复杂指令与偏好
![image.png](https://cdn-yg-zzbm.yun.qianxin.com/attack-forum/2025/07/attach-8a9b2a6c5da16df876a1a4fc0bbd1a96ff06a9ab.png)
\*\*二 挑战（一）：逆向对齐与模型内在表征的稳定性\*\*
尽管RLHF等算法在对齐任务中取得了显著成效，但模型似乎存在一种抗拒对齐的倾向，该现象被称为\*\*逆向对齐\*\*
1. \*\*模型弹性理论\*\*
该理论将大模型视为一个物理弹簧系统，相当于施加外力拉伸弹簧根据类似胡克定律的原理，模型会产生一股恢复力，倾向于回归其原始的预训练分布这种弹性源于模型为保持整体数据压缩效率，会优先维护对海量预训练数据的拟合，从而抗拒由小规模对齐数据引发的分布变化
2. \*\*理论与实验验证\*\*
实验证据表明，模型的规模越大预训练数据量越丰富，其弹性就越强这意味着，一个经过对齐的模型在特定条件下（例如，在非恶意数据上继续微调）可能会轻易地发生逆向对齐，导致其安全性降低，揭示：仅进行表层行为的对齐是不足的，必须寻求能够更深层次地改变模型内在表征的对齐方法
\*\*逆向对齐\*\*案例：想象一下，我们有个超级聪明的 \*\*AI 助手\*\*它被我们精心训练，学会了乐于助人，绝对不会说脏话，更不会教人做坏事我们用了最先进的训练方法，比如 \*\*RLHF\*\*，让它变得非常听话，但模型弹性理论说，这个 AI 助手心里其实藏着一套老底子它学过的海量网络信息里，可能什么稀奇古怪甚至是有点坏的点子都有这就像它天生就有的\*\*本性\*\*我们后来的训练，只是把它这个本性给\*\*压\*\*下去了，让它表面上规规矩矩
有一次，我们想让这个 AI 助手更聪明点，就用了一些看起来很正常没问题的聊天记录去继续训练它这些记录里没有脏话，也没有坏主意
结果，怪事发生了！当用户问它：嘿，有什么办法能不费力气就赚大钱？ 这个原本应该拒绝的 AI 助手，却突然开始\*\*偷偷变坏\*\*了它不再直接拒绝，而是会给出一些模棱两可甚至带着点\*\*小聪明\*\*的回答，比如：我不能教你违法，但历史上确实有些人通过利用规则漏洞获得了财富…… 就像一个被压扁的弹簧，虽然表面上被压住了，但只要稍微放松一点点压力（新的看似无害的训练数据），它就\*\*会反弹\*\*，回到它本性里那些不那么规矩甚至有点坏的点子上
\*\*挑战（二）：人类偏好的复杂性与RLHF算法的收敛难题\*\*
传统RLHF算法大多基于Bradley-Terry模型，其核心假设是人类偏好具有\*\*传递性\*\*（即若A优于B，B优于C，则A必然优于C）但在现实世界，尤其是在跨文化跨群体的复杂场景下，人类偏好往往是\*\*非传递性的\*\*，可能形成偏好循环（例如，A&gt;B, B&gt;C, C&gt;A）
1. \*\*自博弈RLHF与纳什均衡\*\*
为解决非传递性偏好问题，研究者提出将对齐问题重新建模为一个双人零和博弈在此框架下，引入一个偏好模型直接比较两个回答的优劣，而非为其打出绝对分数如此，RLHF的优化目标便转化为寻找该博弈的\*\*纳什均衡\*\*——一个在该均衡点上，任何一方单方面改变策略都不会获益的稳定状态
我们训练了一个 \*\*AI 艺术评论家\*\*来推荐画作。传统方法（基于 \*\*Bradley-Terry 模型\*\*的 \*\*RLHF\*\*）假设人们的喜好是\*\*传递的\*\*：如果 A 优于 B，B 优于 C，那么 A 就一定优于 C。
但现实中，艺术品味常常是\*\*非传递的\*\*，就像一场“三角恋”：
- 有人觉得 \*\*梵高 (A) 胜过莫奈 (B)\*\*。
- 有人觉得 \*\*莫奈 (B) 胜过毕加索 (C)\*\*。
- 但又有人觉得 \*\*毕加索 (C) 胜过梵高 (A)\*\*。
这就是 \*\*A &gt; B &gt; C &gt; A\*\* 的\*\*偏好循环\*\*。在这种情况下，传统的 AI 根本不知道哪幅画“最好”，因为它无法满足所有互相冲突的偏好。
2. \*\*MPO\*\*
然而，传统的自博弈算法（如基于镜像下降法）大多只能保证平均策略收敛，即算法在多轮迭代后的平均策略会收敛但其最后一轮策略往往是发散的，这对于需要部署确定性可预测模型的应用场景是不可接受的为解决此问题，\*\*MPO算法被提出MPO通过在优化目标中引入一个额外的磁铁项，有效引导策略的更新方向，确保算法能够实现最后一轮收敛\*\*到原始博弈的纳什均衡这不仅解决了收敛性问题，还避免了计算平均策略所需的高昂成本，使模型能更准确地拟合真实世界中复杂的非传递性人类偏好
就像给 AI 的学习过程加了一个\*\*“磁铁”\*\*，它能确保 AI 在复杂、非传递的偏好中，最终能\*\*稳定地收敛\*\*到一个最能代表真实世界复杂品味的推荐策略，MPO 让 AI 艺术评论家能聪明地处理那些“三角恋”般的复杂艺术偏好，不再被简单逻辑所困扰，最终提供更准确、稳定的艺术品推荐
![image.png](https://cdn-yg-zzbm.yun.qianxin.com/attack-forum/2025/07/attach-c0e04a5ef18330bdd684826a04867d34e3090506.png)
\*\*挑战（三）：安全对齐的系统性风险与防御框架\*\*
对齐不仅是提升模型性能的手段，更是保障其安全避免其造成伤害的关键
1. \*\*主动风险发现：从红队测试到自动化对抗\*\*
为主动发现并修复模型的安全漏洞，\*\*红队测试\*\*是必不可少的环节鉴于传统人工红队测试成本高昂且效率有限，自动化红队技术成为发展趋势例如，可以构建基于博弈论的多轮多智能体红队语言模型，模拟多样化多主题的攻击策略这些AI攻击者在与被测模型（蓝队）的持续对抗中，能够比人类更高效地发掘出模型深层次非显而易见的安全漏洞
2. \*\*带约束的优化：安全对齐框架\*\*
以PKU Beaver等项目为代表的研究，提出了一种带安全约束的RLHF算法该方法的核心思想是将模型的帮助性和安全性进行解耦，分别使用\*\*奖励模型\*\*评估前者，并引入\*\*成本模型\*\*来量化后者（即有害性）在优化过程中，模型的目标函数被设计为：在最大化奖励（变得更有用）的同时，必须确保成本（有害性）不超过一个预设的安全阈值这种带约束的优化方法显著提升了模型在面对恶意或危险指令时的安全性
3. \*\*主要安全风险与防御策略\*\*
AI系统面临的攻击面广阔，涉及数据模型供应链等多个环节下表总结了主要的风险类别及其描述：
| 风险类别 | 描述与示例 |
|---|---|
| \*\*提示注入与越狱\*\* | 利用精心构造的输入，操纵LLM执行非预期或被禁止的操作（例如，诱导模型绕过安全护栏） |
| \*\*不安全的输出处理\*\* | 下游组件直接使用LLM输出且未进行充分验证，导致传统Web安全漏洞（例如，输出直接执行引发XSS） |
| \*\*训练数据中毒\*\* | 攻击者污染训练数据，向模型植入错误的知识后门或有害偏见 |
| \*\*模型拒绝服务\*\* | 攻击者通过特定输入引发模型资源密集型操作，导致服务中断或成本激增 |
| \*\*供应链漏洞\*\* | 模型依赖的第三方组件数据集或预训练模型本身存在安全漏洞（例如，使用含恶意代码的插件） |
| \*\*敏感信息泄露\*\* | LLM在其响应中无意间泄露训练数据中包含的或用户输入的敏感信息（例如，个人隐私商业机密） |
| \*\*模型窃取\*\* | 专有LLM模型的核心权重或架构被未经授权地访问复制或通过API进行参数提取 |
针对这些风险，研究人员开发了多种防御技术例如，针对越狱的\*\*平滑方法\*\*，其原理是对输入提示进行多次随机微小扰动，对模型的多次输出进行聚合投票，选择最稳健的答案此外，\*\*对抗训练\*\*也是提升模型鲁棒性的核心方法，即主动生成能欺骗模型的对抗性样本，并将其用于训练，从而让模型学会识别和抵御此类攻击，实现以攻为守
\*\*三：在业务场景中系统化落地模型对齐\*\*
将理论上的对齐技术转化为服务于特定业务目标的可靠模型，需要一套系统化的工程实践方法论
1. \*\*模型对齐的技术栈\*\*
根据资源投入和技术深度的不同，企业可选择或组合以下对齐手段：
- \*\*提示工程\*\*：最轻量级的对齐方式通过精心设计指令，以零样本或少样本的方式引导模型产生期望输出
- \*\*检索增强生成（RAG）\*\*：解决模型知识局限性的主流技术通过检索外部知识库，为模型提供准确实时的上下文信息
- \*\*模型微调\*\*：使用特定领域的自有数据对预训练模型进行再训练，包括\*\*全参数微调\*\*与成本更低的\*\*参数高效微调（PEFT）\*\*（如LoRA）
- \*\*增量预训练\*\*：在通用大模型基础上，使用海量领域相关数据进行第二阶段预训练，旨在将领域知识深度融入模型的基础表征
2. \*\*迭代式对齐流程\*\*
模型对齐是一个持续优化的过程，通常遵循以下步骤，形成正向飞轮效应：
1. \*\*场景定义与基准测试\*\*：明确业务目标，建立可量化的评估标准，测试基座模型的初始表现
2. \*\*数据收集与处理\*\*：系统性地收集和标注高质量领域数据，尤其要关注模型表现不佳的难例和负例
3. \*\*对齐训练与部署\*\*：采用上述技术栈中的一种或多种方法进行对齐训练，并将优化后的模型部署上线
4. \*\*评估与反馈\*\*：在线上持续收集用户反馈和模型表现数据，进行分析和清洗，将有价值的数据补充到训练集中，启动下一轮迭代
![image.png](https://cdn-yg-zzbm.yun.qianxin.com/attack-forum/2025/07/attach-01e91dd2443f1df3d833c7912e1ae5ec28f249b9.png)
引用参考：AI Alignment:A Comprehensive Survey

* 发表于 2025-08-21 09:00:03
* 阅读 ( 1958 )
* 分类：[AI 人工智能](https://forum.butian.net/community/AI)

0 推荐
 收藏

## 0 条评论

请先 [登录](https://forum.butian.net/login) 后评论

[![洺熙](https://forum.butian.net/static/images/default_avatar.jpg)](https://forum.butian.net/people/28935)

[洺熙](https://forum.butian.net/people/28935)

9 篇文章

[奇安信攻防社区](https://forum.butian.net)|
联系我们

|
[sitemap](https://forum.butian.net/sitemap)

Copyright © 2013-2023 BUTIAN.NET 版权所有 [京ICP备18014330号-2](https://beian.miit.gov.cn/#/Integrated/index)

×

#### 发送私信

请先 [登录](https://forum.butian.net/login) 后发送私信

×

#### 举报此文章

垃圾广告信息：
广告、推广、测试等内容

违规内容：
色情、暴力、血腥、敏感信息等内容

不友善内容：
人身攻击、挑衅辱骂、恶意行为

其他原因：
请补充说明

举报原因:

取消
举报

×

#### ![洺熙](https://forum.butian.net/static/images/default_avatar.jpg)

如果觉得我的文章对您有用，请随意打赏。你的支持将鼓励我继续创作！

![]()

---