---
title: 很刑啊！把全校学生信息都搞出来了！
url: https://www.secpulse.com/archives/198003.html
source: 安全脉搏
date: 2023-03-22
fetch_date: 2025-10-04T10:14:23.709658
---

# 很刑啊！把全校学生信息都搞出来了！

[![](https://www.secpulse.com/wp-content/themes/secpulse2017/img/logo-header.png)](https://www.secpulse.com "安全脉搏")

* [首页](https://www.secpulse.com/)
* [分类阅读](https://www.secpulse.com/archives/category/category)

  #### 脉搏文库

  - [内网渗透](https://www.secpulse.com/archives/category/articles/intranet-penetration)
  - |
  - [代码审计](https://www.secpulse.com/archives/category/articles/code-audit)
  - |
  - [安全文献](https://www.secpulse.com/archives/category/articles/sec-doc)
  - |
  - [Web安全](https://www.secpulse.com/archives/category/articles/web)
  - |
  - [移动安全](https://www.secpulse.com/archives/category/articles/mobile-security)
  - |
  - [系统安全](https://www.secpulse.com/archives/category/articles/system)
  - |
  - [工控安全](https://www.secpulse.com/archives/category/articles/industrial-safety)
  - |
  - [CTF](https://www.secpulse.com/archives/category/exclusive/ctf-writeup)
  - |
  - [IOT安全](https://www.secpulse.com/archives/category/iot-security)
  - |

#### 安全建设

+ [业务安全](https://www.secpulse.com/archives/category/construction/businesssecurity)
+ |
+ [安全管理](https://www.secpulse.com/archives/category/construction/securityissue)
+ |
+ [数据分析](https://www.secpulse.com/archives/category/construction/bigdata)
+ |

#### 其他

+ [资讯](https://www.secpulse.com/archives/category/news)
+ |
+ [漏洞](https://www.secpulse.com/archives/category/vul)
+ |
+ [工具](https://www.secpulse.com/archives/category/tools)
+ |
+ [人物志](https://www.secpulse.com/archives/category/people)
+ |
+ [区块链安全](https://www.secpulse.com/archives/category/exclusive/block_chain_security)
+ |
+ [安全招聘](https://www.secpulse.com/archives/category/hiring)
+ |

- [安全问答](https://www.secpulse.com/newpage/question_list)
- [金币商城](https://www.secpulse.com/shop?donotcachepage=c010349fd98847cb9d6e07d3cbc19288)
- [安全招聘](https://www.secpulse.com/archives/category/hiring)
- [活动日程](https://www.secpulse.com/newpage/activity)
- [live课程](https://www.secpulse.com/live)
- [企业服务](https://duoyinsu.com/service.html)
- [插件社区](https://x.secpulse.com/)

小程序

![脉搏小程序](https://www.secpulse.com/wp-content/themes/secpulse2017/img/wxchat.jpg)
[登录](https://www.secpulse.com/user_login)
|
[注册](https://www.secpulse.com/user-register)

# 很刑啊！把全校学生信息都搞出来了！

[Web安全](https://www.secpulse.com/archives/category/articles/web)

[潇湘信安](https://www.secpulse.com/newpage/author?author_id=37983)
![]( https://www.secpulse.com/wp-content/themes/secpulse2017/img/renzheng3.png)

2023-03-21

13,582

|  |
| --- |
| **声明：**该公众号大部分文章来自作者日常学习笔记，也有部分文章是经过作者授权和其他公众号白名单转载，未经授权，严禁转载，如需转载，联系开白。  请勿利用文章内的相关技术从事非法测试，如因此产生的一切不良后果与文章作者和本公众号无关。 |

链接：https://www.freebuf.com/vuls/358037.html

前言：本文中涉及到的相关漏洞已报送厂商并得到修复，本文仅限技术研究与讨论，严禁用于非法用途，否则产生的一切后果自行承担！！！

## **0x00 漏洞成因**

事情的起因是这样的，在某一天我用谷歌做信息收集的时候：inurl:xxx.edu.cn pdf，突然查找到这样一份pdf文件，看完整个人都笑出了花，有位同学转专业，被学校调剂错了，然后被公示出来，学号和sfz都泄露了。

![](https://secpulseoss.oss-cn-shanghai.aliyuncs.com/wp-content/uploads/1970/01/beepress-image-198003-1679370612.jpeg)

接着我就好心的找了一下他们学校的统一登陆的地方，发现初始登陆的密码是sfz的后六位。

![](https://secpulseoss.oss-cn-shanghai.aliyuncs.com/wp-content/uploads/1970/01/beepress-image-198003-1679370613.jpeg)

直接登陆成功了，真是我的好兄弟啊。

![](https://secpulseoss.oss-cn-shanghai.aliyuncs.com/wp-content/uploads/1970/01/beepress-image-198003-16793706131.jpeg)

##

## **0x01 漏洞发现**

进入之后发现，只有日常事务这一个模块能登陆进去，先进去看看的。

![](https://secpulseoss.oss-cn-shanghai.aliyuncs.com/wp-content/uploads/1970/01/beepress-image-198003-1679370614.jpeg)

进入之后测了很多地方，sql注入，文件上传之类的漏洞是统统没有啊，还有很多应用居然没有权限，但是她提醒我没有权限这一点，让我想到，会不会有未授权，但是抓包测试半天都没有成功。

但是好在天无绝人之路，我突然看到一个功能点，反馈这个功能点。

![](https://secpulseoss.oss-cn-shanghai.aliyuncs.com/wp-content/uploads/1970/01/beepress-image-198003-16793706141.jpeg)

输入了一些内容之后，抓取数据包看了一下。

![](https://secpulseoss.oss-cn-shanghai.aliyuncs.com/wp-content/uploads/1970/01/beepress-image-198003-1679370615.jpeg)

```
POST /api/apps/feedback HTTP/1.1
Host: xxx.xxx.xxx:80
Content-Length: 79
Accept: application/json, text/plain, */*
X-Requested-With: XMLHttpRequest
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36Edg/110.0.1587.41
Content-Type: application/json;charset=UTF-8
Origin: http://xxx.xxx.xxx:80
Referer: http://xxx.xxx.xxx:80/
Accept-Encoding: gzip, deflate
Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6,ko;q=0.5,zh-TW;q=0.4
Cookie: sid=7e670c0c-9529-4a1b-87b6-6c6aec4edbc1Connection: close
{"jybh":"d997E5ee-17B6-6C9A-13c1-83EAFE09F831","bt":"1","yddh":"11","jynr":"1"}
```

是这样一个数据包，也没有注入点之类的，感觉没啥东西啊，想着就把/api/apps/feedback这个直接拼接到url上看看，因为看到api就会让人想到信息泄露之类的。

拼接上去之后，告诉我缺少pageNum这个参数，我把这个参数拼接上去。

[![image.png](https://secpulseoss.oss-cn-shanghai.aliyuncs.com/wp-content/uploads/2023/03/image2.png "image2.png")](https://secpulseoss.oss-cn-shanghai.aliyuncs.com/wp-content/uploads/2023/03/image2.png)

结果又告诉我缺少pageSize这个参数。

![](https://secpulseoss.oss-cn-shanghai.aliyuncs.com/wp-content/uploads/1970/01/beepress-image-198003-16793706152.jpeg)

全部拼接上去之后发现，是一条学生的信息。

![](https://secpulseoss.oss-cn-shanghai.aliyuncs.com/wp-content/uploads/1970/01/beepress-image-198003-1679370616.jpeg)

改变这个pageNum和pageSize后面数字的大小可以看到更多信息，但是只有几个学生有反馈问题，得到的信息泄露少之又少，就只要这么一点点，够谁吃啊，再来一罐，一人一罐（刘德华bushi）。

![](https://secpulseoss.oss-cn-shanghai.aliyuncs.com/wp-content/uploads/1970/01/beepress-image-198003-16793706161.jpeg)

## **0x02 漏洞深挖**

虽然说挖到这样一个漏洞，但是毫无作用啊，感觉到有些挫败的时候，突然想到，这个信息泄露肯定是整个系统的问题，找一个学生信息多的地方，拼接url，看看能不能泄露的更多。

直接找到个人信息这一块，编辑然后抓包看一下。

![](https://secpulseoss.oss-cn-shanghai.aliyuncs.com/wp-content/uploads/1970/01/beepress-image-198003-16793706162.jpeg)

观察一下我抓到的这个数据包，首先我想到上面拼接语句的时候，是直接url发送数据的，所以请求方法应该是GET，并且我之前请求的时候是没有body这个部分的，所以body也要删除，然后拼接上pageNum和pageSize这两个参数。

```
POST /api/base/user/basic/update HTTP/1.1
Host: xxx.xxx.xxx:80
Content-Length: 748
Accept: application/json, text/plain, */*
X-Requested-With: XMLHttpRequest
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.41
Content-Type: application/json;charset=UTF-8
Origin: http://xxx.xxx.xxx:80
Referer: http://xxx.xxx.xxx:80/
Accept-Encoding: gzip, deflate
Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6,ko;q=0.5,zh-TW;q=0.4
Cookie: sid=7e670c0c-9529-4a1b-87b6-6c6aec4edbc1
Connection: close
{"yhbh":"xxxxxxxxxxxx","xm":"xxx","nc":"1","zt":"0","pxh":0,"yddh":"189xxxxxxx","dzyx":"xxxxxxxxxxxx","qq":null,"wechatUnion":null,"wechatOpenid":null,"salt":"test","xbm":"1","yhlx":"0","tx":"xxxxxxxxxxxx_avatar","pf":"defaultSkin","bmmc":"19xx1","bmbh":"xxxxxxxxxxxx","jzbmbh":[],"yhjs":["XS"],"positionIds":null,"userLog":{"bh":"7d83f326-7cee-4ad4-b242-17faef9fdc90","yhbh":"xxxxxxxxxxxx","dlsj":"2023-02-12 23:12:40","tcsj":"2023-02-13 11:22:25","khdczxt":"Windows","khdllq":"Chrome-110.0.0.0","khdipdz":"117.92.247.178","khdlx":"PC"},"gwbh":[],"gwmc":[],"sfzjh":null,"personalSkin":null,"personalSkinThum":null,"value":null,"id":"xxxxxxxxxxxx","nickname":"1","phone":"18xxxxxx","email":"20xxxxxxxxxxxx4@xxx.edu.cn"}
```

但是我修改后发现请求失败了，告诉我没有权限。

![](https://secpulseoss.oss-cn-shanghai.aliyuncs.com/wp-content/uploads/1970/01/beepress-image-198003-1679370617.jpeg)

感觉好像还是有地方差点意思，发现直接语句的后面只拼接了三个目录，那我尝试也只拼接三个目录试试呢。

![](https://secpulseoss.oss-cn-shanghai.aliyuncs.com/wp-content/uploads/1970/01/beepress-image-198003-16793706171.jpeg)

终于这一次出现了别的学生信息，这里的话可能是五层目录没有权限，但是三层目录有权限，导致了信息泄露。

![](https://secpulseoss.oss-cn-shanghai.aliyuncs.com/wp-content/uploads/1970/01/beepress-image-198003-1679370618.jpeg)

然后我修改pageNum和pageSize这两个参数的大小，结果测试后pageNum=1,2,3,4,5和pageSize=1000的时候，分别泄露不同的一千个人的信息，pageNum后面的数字超过5之后，就没有信息了(这个学校的学生可能就这么多了)。并且pageSize后面的数值太大会造成超时。

所以我成功获取了全校四千多名学生的姓名、班级、学号、邮箱、sfz等信息（厚码码死谢谢）

![](https://secpulseoss.oss-cn-shanghai.aliyuncs.com/wp-content/uploads/1970/01/beepress-image-198003-16793706181.jpeg)

最后提交edusrc，做一个守法公民。

![](https://secpulseoss.oss-cn-shanghai.aliyuncs.com/wp-content/uploads/1970/01/beepress-image-198003-16793706182.jpeg)

## **0x03 漏洞总结**

1. 肯定还是要做好信息收集，有的时候获得了账号比没有账号好出漏洞。

2. 挖漏洞的时候一定要坚持住，这套系统我来回测...