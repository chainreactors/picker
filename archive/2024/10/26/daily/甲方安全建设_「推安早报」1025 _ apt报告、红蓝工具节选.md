---
title: 「推安早报」1025 | apt报告、红蓝工具节选
url: https://mp.weixin.qq.com/s?__biz=MzU0MDcyMTMxOQ==&mid=2247487746&idx=1&sn=b9fb556b77eda920dbd5eca110e709ac&chksm=fb35b8cacc4231dc1fb158047cd3be0f3598864eddd8098a668a0484a1e06ed16af3492fee69&scene=58&subscene=0#rd
source: 甲方安全建设
date: 2024-10-26
fetch_date: 2025-10-06T18:56:17.129963
---

# 「推安早报」1025 | apt报告、红蓝工具节选

![cover_image](https://mmbiz.qpic.cn/sz_mmbiz_jpg/icqm3vRUymZmJNnhzN4MHpcYicDvJ184EAXNaDCpmPGaK2L6nicZsLrSma8kAh27vl4sxgqcXXghyoX2k1Z5TnNRA/0?wx_fmt=jpeg)

# 「推安早报」1025 | apt报告、红蓝工具节选

red4blue

甲方安全建设

# 2024-10-25 「红蓝热点」每天快人一步

> 1. 推送`「新、热、赞」`，帮部分人`阅读提效`
> 2. 学有`精读浅读深读`，艺有`会熟精绝化`，觉知此事`重躬行`。推送只在`浅读预览`
> 3. 机读为主，人工辅助，每日数万网站，10w推特速读
> 4. 推送可能`大众或小众`，不代表本人偏好或认可
> 5. 因渲染和外链原因，公众号`甲方安全建设`发送`日报`或日期,如`20241025`获取`图文评论版pdf`

### 目录

> 0x01 【2024-1018】中国背景APT团伙“IcePeony”利用‘996’工作文化进行网络攻击
> 0x02 【2024-1018】利用.NET反序列化漏洞部署Specula后门
> 0x03 【2024-1018】CVE-2024-30090：Windows本地提权漏洞PoC公布
> 0x04 【2024-1020】使用LLMs进行零样本漏洞发现的工具
> 0x05 【2024-1020】COM对象激活的陷阱与解决方案
> 0x06 【2024-1020】Grafana中的CVE-2024-9264漏洞允许执行任意DuckDB SQL查询
> 0x07 【2024-1021】SAP NetWeaver AS Java 代码注入漏洞修复
> 0x08 【2024-1021】活动目录渗透测试全面指南
> 0x09 【2024-1021】近期最珍贵的Android用户空间漏洞CVE-2024-31317分析
> 0x0a 【2024-1022】Servicelens：枚举和分析Microsoft 365域名服务
> 0x0b 【2024-1022】使用CSS泄露HTML文本节点的挑战
> 0x0c 【2024-1022】远程Chrome滥用概念验证工具remotechrome
> 0x0d 【2024-1023】微软远程注册表客户端中的权限提升漏洞
> 0x0e 【2024-1023】黑客基础：Linux 日志系统
> 0x0f 【2024-1024】在URL凭证中隐藏有效载荷
> 0x10 【2024-1024】Kubernetes权限提升攻击分析（第一部分）
> 0x11 【2024-1024】国家间谍利用FortiManager漏洞进行网络攻击
> 0x12 【2024-1025】将有效载荷嵌入PNG文件的GitHub项目
> 0x13 【2024-1025】Spip内容管理系统0-day漏洞研究
> 0x14 【2024-1025】Lazarus APT组织的加密游戏：投资者与零日漏洞的对决
> 0x15 【2024-1025】开放目录中发现Rekoobe后门，或针对TradingView用户

### 0x01 中国背景APT团伙“IcePeony”利用‘996’工作文化进行网络攻击

> 研究人员发现了一起名为“IcePeony”的中国背景高级持续性威胁（APT）团伙，该团伙自2023年起活跃，采用SQL注入等手段攻击包括印度、毛里求斯和越南等国家的政府机构、学术机构和政治组织，目的是窃取凭证信息。

![](https://mmbiz.qpic.cn/sz_mmbiz_png/icqm3vRUymZmJNnhzN4MHpcYicDvJ184EAVibRrqqsLJU5qZJp2UibaYWAoLPcR2Zbgk6oEm5ia6lwDCyVQKIFafHdg/640?from=appmsg)
![](https://mmbiz.qpic.cn/sz_mmbiz_png/icqm3vRUymZmJNnhzN4MHpcYicDvJ184EAMrkocpFNfm7z6weOa3jHlBR0zsicKwSv3MpGs9nXbeicj81XsIdOuib8w/640?from=appmsg)

<<<左右滑动见更多 >>>

### 热评

* 揭秘未知APT组织：冰凌花
* IcePeony 揭露 '996' 工作文化

### 关键信息点

* IcePeony是一起具有中国背景的APT团伙，自2023年起针对亚洲国家的政府和教育机构进行攻击。
* 他们的攻击手段通常包括SQL注入、部署Webshell和后门以及窃取凭证信息。
* 攻击者使用了多种开源工具，并且定制了一些自己的工具，如StaX、ProxyChains、IceCache和IceEvent。
* IceCache是针对IIS服务器的定制恶意软件，基于开源项目reGeorge，增加了文件传输和命令执行功能。

🏷️: IcePeony, APT, 网络攻击, 中国背景, 996工作文化

### 0x02 利用.NET反序列化漏洞部署Specula后门

> 本文介绍了如何利用.NET反序列化漏洞，通过Specula工具在工作站上部署后门。

### 热评

### 关键信息点

* .NET反序列化是一种可以被利用用于红队行动的技术。
* Specula工具可以用来在工作站上部署后门，通过设置特定的注册表项来实现。
* 利用.NET反序列化时，直接执行C#代码比通过cmd.exe执行命令更为隐蔽和有效。
* 对于ysoserial这样的工具，理解其内部工作机制对于有效利用和进一步的工具改进至关重要。

🏷️: .NET, 反序列化, Specula, 后门, 漏洞利用

### 0x03 CVE-2024-30090：Windows本地提权漏洞PoC公布

> CVE-2024-30090 是由 DEVCORE 的 Angelboy 发现的一个本地提权（LPE）漏洞，该漏洞的 PoC（概念证明）已公布。

![](https://mmbiz.qpic.cn/sz_mmbiz_png/icqm3vRUymZmJNnhzN4MHpcYicDvJ184EA2Hh7DjRv5VJXL5VD3AxlbCia8EXicELox1ia9sITupHX6ZiaQghIxgfVxA/640?from=appmsg)

### 热评

* CVE-2024-30090 漏洞利用PoC：提权至SYSTEM
* CVE-2024-30090 漏洞利用 PoC 实现，可提升至 SYSTEM 权限

### 关键信息点

* CVE-2024-30090 是一个严重的安全漏洞，它允许攻击者在受影响的 Windows 系统上提升权限。
* Angelboy 的工作显示了如何编译 x86 程序来利用这个漏洞，以及如何通过 `NtQuerySystemInformation` 函数获取内核基地址。
* 此 PoC 的开发得益于社区的资源和指导，包括 Cedric Halbronn 的教程和 bruno-1337 的 SeDebugPrivilege 利用代码。
* 资源 & 引用部分提供了深入的学习材料，包括技术文章和视频，这些内容对于理解和学习如何从 Windows 内核中传播和利用漏洞至关重要。

🏷️: CVE, LPE, Windows, 漏洞, PoC

### 0x04 使用LLMs进行零样本漏洞发现的工具

> Vulnhuntr 是一个利用大型语言模型（LLMs）和静态代码分析来识别远程可利用漏洞的工具，专注于 Python 代码库，并支持发现包括本地文件包含（LFI）、任意文件覆盖（AFO）、远程代码执行（RCE）、跨站脚本（XSS）、SQL 注入（SQLI）、服务器端请求伪造（SSRF）和不安全的直接对象引用（IDOR）等漏洞类型。

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/icqm3vRUymZmJNnhzN4MHpcYicDvJ184EAChDkoiadBoVVscXk3eb9W8cGIvcHmxklfE7mLQRfEfcxncRibed3MOPA/640?from=appmsg)
![](https://mmbiz.qpic.cn/sz_mmbiz_png/icqm3vRUymZmJNnhzN4MHpcYicDvJ184EAMibmo69NicXY8ZpVqNqvXHHerpAbL8htCRpyssXVHBlWj2QeONeCPxYQ/640?from=appmsg)

<<<左右滑动见更多 >>>

### 热评

* Vulnhuntr 发布 14 个 LLM 发现的 0day 漏洞
* Vulnhuntr发布！首款AI发现0day漏洞的静态代码分析工具

### 关键信息点

* Vulnhuntr 是首个利用 LLMs 发现 0day 漏洞的工具，它采用了独特的方法来识别和分析漏洞。
* 该工具的核心优势在于能够结合大型语言模型的分析能力和静态代码分析，提供更全面的安全检查。
* Vulnhuntr 的分析过程包括 LLM 对代码的总体分析和针对特定漏洞的深入分析，以及对代码中的函数、类和变量进行的上下文请求，以完成从用户输入到服务器处理的整个调用链。
* 分析报告中包含了漏洞的置信度评分，这有助于开发者评估和优先处理潜在的安全风险。

🏷️: LLMs, 漏洞发现, 代码分析, Python, 网络安全

### 0x05 COM对象激活的陷阱与解决方案

> 本文讨论了在使用COM对象（如ICorPublish接口）时，由于版本不兼容导致的问题，并提供了解决方案。

![](https://mmbiz.qpic.cn/sz_mmbiz_png/icqm3vRUymZmJNnhzN4MHpcYicDvJ184EAIJcPMibzic3HIIvuFb3NLYKApFQOdUnPy7o6a2Hr7wb9exKd7dLHIadA/640?from=appmsg)
![](https://mmbiz.qpic.cn/sz_mmbiz_png/icqm3vRUymZmJNnhzN4MHpcYicDvJ184EATibaDr6Z6wVNbSwF7DS7z0AicX8HbFiaicKg6khzoWxt0vAKkkicR6zQdkg/640?from=appmsg)

<<<左右滑动见更多 >>>

### 热评

* COM 对象激活的陷阱：.NET 非托管 API 的安全风险
* COM 对象激活的陷阱：.NET 非托管 API 的安全问题

### 关键信息点

* COM接口在.NET应用程序的调试和托管中起着关键作用，但是在实际使用中可能会遇到与CLR版本不兼容的问题。
* COM对象的创建API（如`CreateInstance`等）可能会加载错误版本的`mscordbi.dll`，导致无法预测的行为，往往是方法调用失败。
* 通过`DllGetClassObjectInternal` Win32 API获取正确版本的`mscordbi.dll`是解决问题的关键步骤。
* 手动激活COM类并确保与CLR版本兼容可以避免接口方法调用失败的问题，文章中的C++代码示例说明了这一点。

🏷️: COM, ICorPublish, 版本兼容性, 解决方案

### 0x06 Grafana中的CVE-2024-9264漏洞允许执行任意DuckDB SQL查询

> 网页主要介绍了Grafana中的CVE-2024-9264漏洞利用方法，该漏洞允许经过身份验证的用户通过修改Grafana仪表板中的表达式执行任意DuckDB SQL查询，从而读取文件系统中的任意文件。

![](https://mmbiz.qpic.cn/sz_mmbiz_png/icqm3vRUymZmJNnhzN4MHpcYicDvJ184EAeX8Rd4Qd96m7EhsnpINLibMSzBRkMFiabVEvyoNcCVqOX294gjtfeQcg/640?from=appmsg)

### 热评

* Grafana 认证 RCE 漏洞分析：CVE-2024-9264
* Grafana 任意文件读取漏洞 (CVE-2024-9264) 利用

### 关键信息点

* CVE-2024-9264是一个严重的安全漏洞，可以被用来读取Grafana服务器上的任意文件，这对于系统的安全性和数据的保密性构成了严重威胁。
* 漏洞的存在与否取决于DuckDB的安装状态。默认情况下，Grafana不包含DuckDB，因此在默认安装的Grafana服务器上，该漏洞不可利用。
* Grafana团队已经提供了修复方案，即完全移除了SQL表达式功能，这是一种有效的修复策略，能够完全阻止漏洞的利用。
* 安全更新是防止漏洞利用的关键。用户应该及时更新到最新的修复版本，以确保他们的Grafana环境不受攻击。

🏷️: CVE, Grafana, SQL注入, DuckDB, 漏洞利用

### 0x07 SAP NetWeaver AS Java 代码注入漏洞修复

> SAP 发布了安全更新 3433192，解决了 SAP NetWeaver AS Java 管理员日志查看器插件中的关键代码注入漏洞（CVE-2024-22127），该漏洞可能允许攻击者上传恶意文件，危及系统的保密性、完整性和可用性。

![](https://mmbiz.qpic.cn/sz_mmbiz_png/icqm3vRUymZmJNnhzN4MHpcYicDvJ184EA2MMhN5CicuCY4YsBzIRYcSzjSA3k7UAPGmeN4Vj5RkTCfBCSwGcb40w/640?from=appmsg)
![](https://mmbiz.qpic.cn/sz_mmbiz_png/icqm3vRUymZmJNnhzN4MHpcYicDvJ184EAKzlUPHwOPvnGDQRG14FQelP4QU6loEk9RQRORZtQaibRUXvxrhG2wdw/640?from=appmsg)

<<<左右滑动见更多 >>>

### 热评

* SAP NetWeaver AS Java 代码注入漏洞
* SAP NetWeaver AS Java 中发现代码注入漏洞

### 关键信息点

* 该代码注入漏洞对 SAP NetWeaver AS Java 系统构成严重威胁，需要立即应对。
* 通过限制文件上传类型和激活病毒扫描配置文件，可以显著降低漏洞利用的风险。
* 管理员应该优先考虑升级系统、配置病毒扫描以及调整用户角色来提高安全性。
* 除了应对已知漏洞，定期进行 SAP 渗透测试也是保障系统安全的重要手段。

🏷️: SAP, 漏洞, 代码注入, 安全更新, CVE-2024-22127

### 0x08 活动目录渗透测试全面指南

> 该网页提供了一份全面的指南，用于在活动目录（AD）环境中进行渗透测试，涵盖了常见的AD端口和服务、各种利用工具和技术、以及后渗透攻击的方法。

![](https://mmbiz.qpic.cn/sz_mmbiz_png/icqm3vRUymZmJNnhzN4MHpcYicDvJ184EAq8yJ6bbYH8d5qTfAv3KLb0YoBdrC8P3Hfw1JwhJ8icMgpTFcn0jm1tg/640?from=appmsg)

### 热评

* Active Directory 渗透测试指南
* Active Directory 渗透测试指南

### 关键信息点

* 网页内容的主要观点是，为了有效地评估和保护AD基础设施的安全，安全专业人员需要深入了解AD的工作原理、常见漏洞以及可能的攻击路径。通过使用提供的工具和技术，可以对AD环境进行全面的安全评估，发现潜在的安全漏洞，并采取相应的安全措施来减轻风险。文章强调了渗透测试在AD安全中的重要性，并提供了实用的指导和资源，帮助安全专业人员在渗透测试中更加高效和有效。

🏷️: 渗透测试, 活动目录, AD, 网络安全, 工具

### 0x09 近期最珍贵的Android用户空间漏洞CVE-2024-31317分析

> 网页主要分析了 Android 系统中的 CVE-2024-31317 漏洞，这是一种用户模式下的普遍漏洞，可以用来获取任意用户ID（UID）的代码执行权限，类似于绕过 Android 沙箱，获取任何应用的权限。

### 热评

### 关键信息点

* CVE-2024-31317 漏洞是 Android 用户模式下最有价值的漏洞之一，它允许攻击者获取任意 UID 的代码执行权限，类似于绕过 Android 沙箱。
* Zygote 的工作原理和命令注入的方法对于理解和利用该漏洞至关重要。
* 在 Android 12 及以上版本中，利用该漏洞变得更加复杂，需要新的技术来解决由于缓冲区预读取优化带来的问题。
* 通过控制 Zygote 参数，攻击者可以实现特权提升，并可能通过 jdwp 协议实现代码注入。

🏷️: Android, 漏洞, CVE-2024-31317, 网络安全, 代码执行

### 0x0a Servicelens：枚举和分析Microsoft 365域名服务

> Servicelens 是一个用于识别与特定域名相关联的 Microsoft 365 域名及其服务的 Python 脚本，通过检查 DNS 记录来分类和总结这些服务。

![](https://mmbiz.qpic.cn/sz_mmbiz_png/icqm3vRUymZmJNnhzN4MHpcYicDvJ184EALUkMlYLf8cqBnYhpf86QDb4bDZNhdeVZFjFIiakkORh6fNJBaQtibLXA/640?from=appmsg)

### 热评

### 关键信息点

* Servicelens 主要用于域名和服务发现：它能够识别与特定域名相关联的 Microsoft 365 域名，并通过分析 DNS 记录来发现和分类这些域名使用的服务。
* 脚本提供详细的服务分类：Servicelens 将服务分为多个类别，如 Email Services、Cloud Platforms 等，为用户提供了一个清晰的服务使用概览。
* 易于安装和使用：用户可以通过克隆 GitHub 仓库并安装 dnspython 库来快速部署 Servicelens，并通过命令行参数来运行脚本。
* 支持详细输出：通过 `-v` 标志，用户可以获得更详细的输出，以便进一步分析。

🏷️: Servicelens, Microsoft 365, DNS记录, 服务分析, Python脚本

### 0x0b 使用CSS泄露HTML文本节点的挑战

> 网页主要探讨了如何利用纯 CSS 泄露 HTML 文本节点中的内容，并通过一个具体的挑战实例，展示了一种新的 CSS 注入技术。

### 热评...