---
title: 物流系统设计之《物流状态与轨迹》
url: https://www.uedbox.com/post/68665/
source: 体验盒子
date: 2022-12-12
fetch_date: 2025-10-04T01:15:08.801945
---

# 物流系统设计之《物流状态与轨迹》

[![体验盒子](https://www.uedbox.com/wp-content/themes/UB2019/imgs/logo.png)](https://www.uedbox.com)

* [博文](https://www.uedbox.com/blog/ "博文")
* [设计开发](https://www.uedbox.com/design/ "设计开发")
* [网络安全](https://www.uedbox.com/web-security/ "网络安全")
* [观点](https://www.uedbox.com/entertainment/ "观点")
* [服务](https://www.uedbox.com/service/ "服务")
* [AI导航](https://www.uedbox.com/aihub/ "AI导航")
* 更多
  + [关于](https://www.uedbox.com/about/ "关于")
  + [分享](https://www.uedbox.com/share/ "分享")
  + [老电影](https://www.uedbox.com/movie/ "老电影")
  + [搜索语法/SHDB](https://www.uedbox.com/shdb/ "搜索语法/SHDB")
  + [Exploits](https://www.uedbox.com/exploits/ "Exploits")
  + [SecTools](https://www.uedbox.com/tools/ "SecTools")
  + [UserAgent解析](https://www.uedbox.com/useragentparser/ "UserAgent解析")
  + [地理坐标在线转换](https://www.uedbox.com/geocoordinate/ "地理坐标在线转换")

# 物流系统设计之《物流状态与轨迹》

* 发表于 2022年12月11日
* [后端](https://www.uedbox.com/design/backend/)

目录表

Toggle

* [物流运单签收状态（state)](#%E7%89%A9%E6%B5%81%E8%BF%90%E5%8D%95%E7%AD%BE%E6%94%B6%E7%8A%B6%E6%80%81%EF%BC%88state)
  + [SQL如](#SQL%E5%A6%82)
* [状态机的设计](#%E7%8A%B6%E6%80%81%E6%9C%BA%E7%9A%84%E8%AE%BE%E8%AE%A1)
  + [1、正向物流状态机设计](#1%E3%80%81%E6%AD%A3%E5%90%91%E7%89%A9%E6%B5%81%E7%8A%B6%E6%80%81%E6%9C%BA%E8%AE%BE%E8%AE%A1)
  + [2、逆向物流状态机设计](#2%E3%80%81%E9%80%86%E5%90%91%E7%89%A9%E6%B5%81%E7%8A%B6%E6%80%81%E6%9C%BA%E8%AE%BE%E8%AE%A1)

## 物流运单签收状态（state)

默认状态下，在推送时我们提供了ischeck字段表示快递单是否签收（含正常签收，退回签收两种情况），通过state字段提供签收的具体状态，state具体如下：

| 物流状态值 | 物流状态名称 | 高级物流状态值 | 高级物流状态名称 | 含义 |
| --- | --- | --- | --- | --- |

|  |  |  |  |  |
| --- | --- | --- | --- | --- |
| 1 | 揽收 | 1 | 揽收 | 快件揽件 |
| 101 | 已下单 | 已经下快件单 |
| 102 | 待揽收 | 待快递公司揽收 |
| 103 | 已揽收 | 快递公司已经揽收 |
| 0 | 在途 | 0 | 在途 | 快件在途中 |
| 1001 | 到达派件城市 | 快件到达收件人城市 |
| 1002 | 干线 | 快件处于运输过程中 |
| 1003 | 转递 | 快件发往到新的收件地址 |
| 5 | 派件 | 5 | 派件 | 快件正在派件 |
| 501 | 投柜或驿站 | 快件已经投递到快递柜或者快递驿站 |
| 3 | 签收 | 3 | 签收 | 快件已签收 |
| 301 | 本人签收 | 收件人正常签收 |
| 302 | 派件异常后签收 | 快件显示派件异常，但后续正常签收 |
| 303 | 代签 | 快件已被代签 |
| 304 | 投柜或站签收 | 快件已从快递柜或者驿站取出签收 |
| 6 | 退回 | 6 | 退回 | 快件正处于返回发货人的途中 |
| 4 | 退签 | 4 | 退签 | 此快件单已退签 |
| 401 | 已销单 | 此快件单已撤销 |
| 14 | 拒签 | 收件人拒签快件 |
| 7 | 转投 | 7 | 转投 | 快件转给其他快递公司邮寄 |
| 2 | 疑难 | 2 | 疑难 | 快件存在疑难 |
| 201 | 超时未签收 | 快件长时间派件后未签收 |
| 202 | 超时未更新 | 快件长时间没有派件或签收 |
| 203 | 拒收 | 收件人发起拒收快递,待发货方确认 |
| 204 | 派件异常 | 快件派件时遇到异常情况 |
| 205 | 柜或驿站超时未取 | 快件在快递柜或者驿站长时间未取 |
| 206 | 无法联系 | 无法联系到收件人 |
| 207 | 超区 | 超出快递公司的服务区范围 |
| 208 | 滞留 | 快件滞留在网点，没有派送 |
| 209 | 破损 | 快件破损 |
| 210 | 销单 | 寄件人申请撤销寄件 |
| 8 | 清关 | 8 | 清关 | 快件清关 |
| 10 | 待清关 | 快件等待清关 |
| 11 | 清关中 | 快件正在清关流程中 |
| 12 | 已清关 | 快件已完成清关流程 |
| 13 | 清关异常 | 货物在清关过程中出现异常 |
| 14 | 拒签 | \ | \ | 收件人拒签快件 |

上面这个表是基于[kd100](https://api.kuaidi100.com/document/603f47dfa62a19500e19866f)状态结构，毕竟向专业事看齐没错。

### SQL如

|  |  |
| --- | --- |
| 1  2  3  4  5  6  7  8 | CREATE TABLE shipments\_status (  tracking\_number VARCHAR(20) NOT NULL COMMENT '运单号码',  status VARCHAR(20) NOT NULL COMMENT '物流状态',  status\_code INT NOT NULL COMMENT '状态码',  timestamp DATETIME NOT NULL COMMENT '状态更新时间',  location VARCHAR(50) NOT NULL COMMENT '状态更新地点',  current\_position VARCHAR(40) COMMENT '当前位置经纬度'  ); |

又或者这样

|  |  |
| --- | --- |
| 1  2  3  4  5  6  7  8 | CREATE TABLE logistics\_status (  mail\_number VARCHAR(255) NOT NULL COMMENT '邮件号',  status\_value INT NOT NULL COMMENT '物流状态值',  status\_name VARCHAR(255) NOT NULL COMMENT '物流状态名称',  advanced\_status\_value VARCHAR(255) NOT NULL COMMENT '高级物流状态值',  advanced\_status\_name VARCHAR(255) NOT NULL COMMENT '高级物流状态名称',  meaning VARCHAR(255) NOT NULL COMMENT '含义'  ); |

状态设计可能需要根据你的场景进行改变，有了状态表，再进行状态关联与操作即可。

## 状态机的设计

### 1、正向物流状态机设计

![物流系统设计之《物流状态与轨迹》](https://www.uedbox.com/wp-content/uploads/2022/12/20181027173622670.png)

正向物流包含了三条主要流程：

a、创建->发货->签收/拒签

这种是最简单的流程，也是用户最关心的流程，如果公司使用的是第三方物流系统，那么只要这条状态流就足够了。

b、创建->发货->配送接单->配送揽收->配送派送->签收/拒签

这条状态流对接了配送的物流流转状态，一般对接第三方物流详情后，会得到物流配送的信息。

c、创建->发货->仓库接单->仓库出库->配送揽收->配送派送->签收/拒签

这条状态流是最复杂的，包含了仓库和配送，一般只有大公司才会考虑这么细致的状态流转。

### 2、逆向物流状态机设计

![物流系统设计之《物流状态与轨迹》](https://www.uedbox.com/wp-content/uploads/2022/12/2018102717365521.png)

由上面的状态机可以看出来，取消物流的时机有4种：

1、创建后取消

2、发货后取消

3、仓库接单后出库前取消

4、配送接单后签收前取消

上面第三种和第四种状况也叫仓截单和配截单，需要配合WMS系统和TMS系统进行特别开发。

关于状态机更多部分可看[这里](https://juejin.cn/post/6844903700553531406)。

点赞(3)

打赏

分享

标签：[MySQL](https://www.uedbox.com/post/tag/mysql/) , [物流系统](https://www.uedbox.com/post/tag/%E7%89%A9%E6%B5%81%E7%B3%BB%E7%BB%9F/)  原文连接：**[物流系统设计之《物流状态与轨迹》](https://www.uedbox.com/post/68665/)**  所有媒体，可在保留署名、
`原文连接`
的情况下转载，若非则不得使用我方内容。

[ChatGPT 是什么，有什么作用，跟搜索引擎有什么区别？](https://www.uedbox.com/post/68662/ "ChatGPT 是什么，有什么作用，跟搜索引擎有什么区别？") [如何在网络中保护隐私](https://www.uedbox.com/post/68678/ "如何在网络中保护隐私")

* [相关推荐](#pills-xg)
* [最新文章](#pills-last)
* [30天最热](#pills-30)
* [历史最热](#pills-all)

[![phpMyAdmin 3.x setup脚本远程跨站脚本漏洞](https://www.uedbox.com/wp-content/themes/UB2019/dist/images/loader.svg)

phpMyAdmin 3.x setup脚本远程跨站脚本漏洞](https://www.uedbox.com/post/1972/ "phpMyAdmin 3.x setup脚本远程跨站脚本漏洞")

[![MySQL Login Searcher](https://www.uedbox.com/wp-content/themes/UB2019/dist/images/loader.svg)

MySQL Login Searcher](https://www.uedbox.com/post/3474/ "MySQL Login Searcher")

[![mysql 注入利用工具Token Tool](https://www.uedbox.com/wp-content/themes/UB2019/dist/images/loader.svg)

mysql 注入利用工具Token Tool](https://www.uedbox.com/post/3136/ "mysql 注入利用工具Token Tool")

[![MySQL Rootkit 反弹Shell](https://www.uedbox.com/wp-content/themes/UB2019/dist/images/loader.svg)

MySQL Rootkit 反弹Shell](https://www.uedbox.com/post/3406/ "MySQL Rootkit 反弹Shell")

[![MySQL/ThinkPHP5去重，查询重复数据并列出，删除重复数据只保留一条](https://www.uedbox.com/wp-content/themes/UB2019/dist/images/loader.svg)

MySQL/ThinkPHP5去重，查询重复数据并列出，删除重复数据只保留一条](https://www.uedbox.com/post/59020/ "MySQL/ThinkPHP5去重，查询重复数据并列出，删除重复数据只保留一条")

[![Table ‘performance_schema.session_variables’ doesn’t exist](https://www.uedbox.com/wp-content/themes/UB2019/dist/images/loader.svg)

Table ‘performance\_schema.session\_variables’ doesn’t exist](https://www.uedbox.com/post/66527/ "Table ‘performance_schema.session_variables’ doesn’t exist")

[![MySQL大表优化方案](https://www.uedbox.com/wp-content/themes/UB2019/dist/images/loader.svg)

MySQL大表优化方案](https://www.uedbox.com/post/9064/ "MySQL大表优化方案")

[![MySQL binlog太大，如何优化及清理/删除binlog](https://www.uedbox.com/wp-content/themes/UB2019/dist/images/loader.svg)

MySQL binlog太大，如何优化及清理/删除binlog](https://www.uedbox.com/post/59040/ "MySQL binlog太大，如何优化及清理/删除binlog")

[![Nginx 利用 fail2ban 自动封禁乱扫的 IP](https://www.uedbox.com/wp-content/themes/UB2019/dist/images/loader.svg)

Nginx 利用 fail2ban 自动封禁乱扫的 IP](https://www.uedbox.com/post/119731/ "Nginx 利用 fail2ban 自动封禁乱扫的 IP")

[![最新 绕过Cloudflare最佳实践](https://www.uedbox.com/wp-content/themes/UB2019/dist/images/loader.svg)

最新 绕过Cloudflare最佳实践](https://www.uedbox.com/post/119716/ "最新 绕过Cloudflare最佳实践")

[![NinjiaTag，兼容Apple Find My网络的开源防丢神器](https://www.uedbox.com/wp-content/themes/UB2019/dist/images/loader.svg)

NinjiaTag，兼容Apple Find My网络的开源防丢神器](https://www.uedbox.com/post/119688/ "NinjiaTag，兼容Apple Find My网络的开源防丢神器")

[![好用的Mac清理卸载软件推荐](https://www.uedbox.com/wp-content/themes/UB2019/dist/images/loader.svg)

好用的Mac清理卸载软件推荐](https://www.uedbox.com/post/119673/ "好用的Mac清理卸载软件推荐")

[![AutoGen Studio 容器化部署与维护指南](https://www.uedbox.com/wp-content/themes/UB2019/dist/images/loader.svg)

AutoGen Studio 容器化部署与维护指南](https://www.uedbox.com/post/119359/ "AutoGen Studio 容器化部署与维护指南")

[![肌理解剖师：中年人的小确幸](https://www.uedbox.com/wp-content/themes/UB2019/dist/images/loader.svg)

肌理解剖师：中年人的小确幸](https://www.uedbox.com/post/119356/ "肌理解剖师：中年人的小确幸")

[![🔥 最新免费域名资源大全 | 永久免费域名获取](https://www.uedbox.com/wp-content/themes/UB2019/dist/images/loader.svg)

🔥 最新免费域名资源大全 | 永久免费域名获取](https://www.uedbox.com/post/119352/ "🔥 最新免费域名资源大全 | 永久免费域名获取")

[![Cursor agent ask manual区别](https://www.uedbox.com/wp-content/themes/UB2019/dist/images/loader.svg)

Cursor agent ask manual区别](https://www.uedbox.com/post/119346/ "Cursor agent ask manual区别")

* [最新 绕过Cloudflare最佳实践](https://www.uedbox.com/post/119716/ "最新 绕过Cloudflare最佳实践")
* [NinjiaTa...