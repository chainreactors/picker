---
title: 呜哇！你这 kubectl exec 怎么不能指定用户呀？
url: https://github.red/kubectl-exec-as-root/
source: Light Cube
date: 2022-11-09
fetch_date: 2025-10-03T22:04:09.874047
---

# 呜哇！你这 kubectl exec 怎么不能指定用户呀？

[![logo](/images/logo.svg)](/)

[茅娄聳茅隆碌](/)

[氓聟鲁盲潞聨忙聢聭](/about-me/)

[莽禄聶忙聢聭莽聲聶猫篓聙](/guestbook/)

[氓聫聥茅聯戮](/my-friends/)

[忙聳聡莽芦聽氓陆聮忙隆拢](/archive/)

[忙聸麓忙聳掳忙聴楼氓驴聴](/update-history/)

![氓聭聹氓聯聡茂录聛盲陆聽猫驴聶 kubectl exec 忙聙聨盲鹿聢盲赂聧猫聝陆忙聦聡氓庐職莽聰篓忙聢路氓聭聙茂录聼](https://img12.360buyimg.com/da/jfs/t1/226848/1/13138/18401/65d4df2bF36dcaf99/1f872fcf329f1c06.png.webp)

## 氓聭聹氓聯聡茂录聛盲陆聽猫驴聶 kubectl exec 忙聙聨盲鹿聢盲赂聧猫聝陆忙聦聡氓庐職莽聰篓忙聢路氓聭聙茂录聼

[2022-11-08](//kubectl-exec-as-root//)芒聙垄
[氓聢聸忙聞聫](/categories/%E5%88%9B%E6%84%8F/)
芒聙垄
4221 氓颅聴 / 9 氓聢聠茅聮聼

## 氓聫聭莽聰聼盲禄聙盲鹿聢盲潞聥盲潞聠茂录聼

忙聹聙猫驴聭氓聹篓氓聠聶茅聸聠莽戮陇莽聸赂氓聟鲁莽職聞 Side Project茂录聦盲赂禄猫娄聛忙聵炉盲陆驴莽聰篓 Kubernetes 莽職聞 Go SDK 猫驴聸猫隆聦氓录聙氓聫聭茫聙聜氓聟露盲赂颅忙聹聣盲赂陋氓聤聼猫聝陆茅聹聙猫娄聛氓聹篓 Pod 氓聬炉氓聤篓氓庐聦忙聢聬氓聬聨氓聹篓 Pod 莽職聞氓庐鹿氓聶篓盲赂颅忙聣搂猫隆聦氓聭陆盲禄陇茫聙聜

盲陆聠氓聹篓盲陆驴莽聰篓 Go SDK 忙聣搂猫隆聦氓聭陆盲禄陇猫驴聶茅聡聦氓掳卤忙聹聣盲赂聙盲赂陋氓聺聭茫聙聜盲陆聽盲录職氓聫聭莽聨掳氓聹篓`k8sClient.CoreV1().Pod(namespace)` 盲赂聥氓卤聟莽聞露忙虏隆忙聹聣氓陆垄氓娄聜 `Exec()` 猫驴聶忙聽路莽職聞忙聳鹿忙鲁聲氓聫炉盲禄楼盲陆驴莽聰篓茂录聦GitHub Copilot 盲鹿聼莽聸麓忙聨楼氓聹篓猫驴聶茅聡聦氓聜禄忙聨聣盲潞聠盲赂聧莽聼楼茅聛聯氓娄聜盲陆聲猫隆楼氓聟篓茫聙聜
茅聙職猫驴聡莽驴禄茅聵聟 `kubectl` 忙潞聬莽聽聛盲赂颅氓聟鲁盲潞聨 `exec` 氓颅聬氓聭陆盲禄陇氓庐聻莽聨掳茂录聦忙聢聭忙聣戮氓聢掳盲潞聠猫驴聶盲赂陋茂录職[src/k8s.io/kubectl/pkg/cmd/exec/exec.go#L353-L366](https://github.com/kubernetes/kubernetes/blob/master/staging/src/k8s.io/kubectl/pkg/cmd/exec/exec.go#L353-L366)

```
// TODO: consider abstracting into a client invocation or client helper
req := restClient.Post().
	Resource("pods").
	Name(pod.Name).
	Namespace(pod.Namespace).
	SubResource("exec")
req.VersionedParams(&corev1.PodExecOptions{
	Container: containerName,
	Command:   p.Command,
	Stdin:     p.Stdin,
	Stdout:   p.Out != nil,
	Stderr:    p.ErrOut != nil,
	TTY:       t.Raw,
}, scheme.ParameterCodec)

return p.Executor.Execute("POST", req.URL(), p.Config, p.In, p.Out, p.ErrOut, t.Raw, sizeQueue)
```

忙聢聭盲禄卢氓聫炉盲禄楼莽聹聥氓聢掳猫驴聶茅聡聦氓聟露氓庐聻忙聵炉莽聸麓忙聨楼忙聻聞茅聙聽 HTTP 猫炉路忙卤聜氓炉鹿莽聺聙 Kubernetes APIServer 猫驴聸猫隆聦猫炉路忙卤聜茂录聦Go SDK 茅聡聦氓鹿露忙虏隆忙聹聣氓掳聛猫拢聟茫聙聜莽聰職猫聡鲁氓聹篓盲赂聤忙聳鹿莽職聞忙鲁篓茅聡聤盲赂颅猫驴聵莽聲聶莽聺聙盲赂聙氓聢聶**盲赂聝氓鹿麓氓聣聧莽職聞芒聙聹猫麓麓氓驴聝芒聙聺 TODO**茂录聦猫炉麓猫娄聛猫聙聝猫聶聭氓掳聠猫驴聶氓聺聴忙聤陆猫卤隆忙聢聬盲赂聙盲赂陋 SDK 茅聡聦莽職聞忙聳鹿忙鲁聲茫聙聜猫陆卢莽聹录茅聴麓盲赂聝氓鹿麓猫驴聡氓聨禄盲潞聠茂录聦猫驴聶氓聺聭猫驴聵忙聵炉忙虏隆氓隆芦茫聙聜冒聼聵聟
茅聹聙猫娄聛忙鲁篓忙聞聫莽職聞忙聵炉 kubectl 莽職聞氓庐聻莽聨掳忙聹聙氓聬聨忙聵炉莽聰篓盲潞聠氓庐聝猫聡陋氓路卤莽職聞 `Execute` 忙聳鹿忙鲁聲氓聫聭茅聙聛盲潞聠盲赂陋 POST 猫炉路忙卤聜茂录聦盲陆聠猫驴聶茅聡聦氓聟露氓庐聻忙聵炉茅聹聙猫娄聛忙碌聛氓录聫莽職聞氓聨禄猫炉禄氓聫聳氓聭陆盲禄陇忙聣搂猫隆聦忙聣聙猫驴聰氓聸聻莽職聞莽禄聯忙聻聹茫聙聜忙聹聙氓聬聨氓潞聰猫炉楼盲陆驴莽聰篓 `Stream()`茂录聦氓聫炉盲禄楼氓聫聜莽聟搂忙聢聭莽職聞忙聹聙莽禄聢盲禄拢莽聽聛茂录職

```
req := e.k8sClient.RESTClient().Post().
	Resource("pods").
	Name(pod.Name).
	Namespace(pod.Namespace).
	SubResource("exec")
req.VersionedParams(&coreV1.PodExecOptions{
	Stdout:    true,
	Stderr:    true,
	Container: containerName,
	Command: command,
	TTY:       true,
}, scheme.ParameterCodec)

// Send the request.
respBody, err := e.k8sClient.RESTClient().Post().AbsPath(req.URL().Path).Stream(ctx)
if err != nil {
	return nil, errors.Wrap(err, "post request")
}
defer func() { _ = respBody.Close() }()
```

莽聞露氓聬聨茂录聦忙聢聭氓聫聢茅聛聡氓聢掳茅聴庐茅垄聵盲潞聠 芒聙聰芒聙聰 忙聹聣盲潞聸茅聲聹氓聝聫氓聬炉氓聤篓莽職聞氓庐鹿氓聶篓氓聮聥 kubectl exec 猫驴聸氓聨禄莽職聞莽聰篓忙聢路盲赂聧忙聵炉 root茂录聼氓聬聦忙聴露忙聢聭盲鹿聼忙聴聽忙鲁聲盲陆驴莽聰篓 `su` 氓聢聡忙聧垄莽聰篓忙聢路茫聙聜忙聥驴莽聺聙盲陆聨忙聺聝莽聰篓忙聢路莽職聞 shell 忙聹聣氓戮聢氓陇職忙聯聧盲陆聹茅聝陆氓聛職盲赂聧盲潞聠茂录聦猫驴聶猫炉楼氓聮聥氓聤聻氓聭垄茂录聼

忙聢聭盲戮驴氓录聙氓搂聥氓聹篓莽陆聭盲赂聤忙聬聹莽麓垄 `kubectl exec as root`茂录聦氓聹篓莽聹聥盲潞聠盲赂聧氓掳聭氓庐聵忙聳鹿莽職聞 issue 氓禄潞猫庐庐氓聮聦 Stackoverflow 盲赂聤莽職聞氓楼聡忙聤聙忙路芦氓路搂氓聬聨茂录聦忙聢聭忙垄鲁莽聬聠猫聙聝莽漏露盲潞聠盲赂聥猫驴聶盲赂陋茅聴庐茅垄聵莽職聞忙聺楼茅戮聶氓聨禄猫聞聣茂录聦氓聠聶盲赂聥忙颅陇忙聳聡忙聺楼猫庐虏猫驴掳盲赂聥猫驴聶盲赂陋茅聲驴猫戮戮氓聟颅氓鹿麓猫驴聵忙聹陋氓庐聻莽聨掳莽職聞茅聹聙忙卤聜猫聝聦氓聬聨莽職聞忙聲聟盲潞聥茫聙聜

## 氓聬聧猫炉聧猫戮篓忙聻聬

氓聣聧忙聳鹿茅垄聞猫颅娄茂录聛氓聹篓氓聬聨忙聳聡盲赂颅盲陆聽氓聫炉猫聝陆盲录職茅聛聡猫搂聛 `containerd`茫聙聛`runc`茫聙聛`OCI`茫聙聛`CRI`茫聙聛`Docker` 莽颅聣莽颅聣猫驴聶盲潞聸氓聬聧猫炉聧茂录聦氓聹篓忙颅拢氓录聫氓录聙氓搂聥氓聣聧忙聢聭盲禄卢盲赂聧氓娄篓氓聟聢忙垄鲁莽聬聠盲赂聥猫驴聶盲潞聸氓聬聧猫炉聧茂录聦猫聡鲁氓掳聭氓聟聢氓录聞忙赂聟忙楼職氓庐聝盲禄卢盲鹿聥茅聴麓莽職聞氓聟鲁莽鲁禄茫聙聜

猫驴聶茅聡聦氓聟聢忙聰戮盲赂聙氓录聽氓聸戮茂录聦氓聬聞盲陆聧氓聫炉盲禄楼莽庐聙氓聧聲莽聻聞盲赂聙莽聹录氓聬聨莽禄搂莽禄颅氓戮聙盲赂聥莽聹聥茫聙聜

![](/images/2022/11/container-family.png)

### 忙聵炉茅聙聽莽聣漏猫聙聟盲鹿聥忙聴聽氓掳陆猫聴聫盲鹿聼

猫驴聵猫庐掳氓戮聴忙聹聙氓录聙氓搂聥忙聢聭氓聹篓氓陇搂盲赂聙盲赂聤氓颅娄忙聹聼莽職聞忙聴露氓聙聶忙聨楼猫搂娄盲潞聠 Docker茂录聦氓陆聯忙聴露莽禄聶忙聢聭氓聧掳猫卤隆氓戮聢忙路卤莽職聞盲赂聙氓聫楼猫炉聺忙聵炉茂录職芒聙聹Docker 猫驴聶莽聨漏忙聞聫氓掳卤忙聵炉忙聳掳莽聯露猫拢聟忙聴搂茅聟聮茫聙聜芒聙聺 忙聣聙猫掳聯氓庐鹿氓聶篓茂录聦氓聫陋盲赂聧猫驴聡忙聵炉氓掳聛猫拢聟盲潞聠 Linux 莽鲁禄莽禄聼氓聠聟忙聽赂忙聫聬盲戮聸莽職聞氓聤聼猫聝陆氓聨禄氓庐聻莽聨掳猫碌聞忙潞聬莽職聞茅職聰莽娄禄茫聙聜忙聹卢猫麓篓猫驴聵忙聵炉 Linux Container 莽職聞 `cgroups`茫聙聛`namespaces`茫聙聜

* `cgroups`茂录職莽聰篓盲潞聨 CPU茫聙聛氓聠聟氓颅聵茫聙聛莽拢聛莽聸聵氓聮聦莽陆聭莽禄聹 IO 莽聣漏莽聬聠猫碌聞忙潞聬莽職聞茅職聰莽娄禄
* `namespaces`茂录職莽聰篓盲潞聨 PID茫聙聛IPC茫聙聛Network 莽颅聣莽鲁禄莽禄聼猫碌聞忙潞聬莽職聞茅職聰莽娄禄
  盲禄楼盲赂聤猫驴聶盲潞聸茅聝陆忙聵炉 Linux 氓聠聟忙聽赂盲赂颅忙聫聬盲戮聸莽職聞氓聤聼猫聝陆茂录聦忙聢聭盲禄卢氓聫炉盲禄楼莽聹聥盲陆聹芒聙聹忙聵炉莽楼聻猫碌聬盲潞聢莽職聞芒聙聺茫聙聜
  忙聢聭猫驴聶茅聡聦忙聝鲁氓聢掳盲潞聠猫聥聫猫陆录茫聙聤猫碌陇氓拢聛猫碌聥茫聙聥茅聡聦莽職聞猫驴聶氓聫楼茂录職芒聙聹忙聵炉茅聙聽莽聣漏猫聙聟盲鹿聥忙聴聽氓掳陆猫聴聫盲鹿聼茂录聦猫聙聦氓聬戮盲赂聨氓颅聬盲鹿聥忙聣聙氓聟卤茅聙聜茫聙聜芒聙聺冒聼聵聥

### runc

Docker 氓录聙氓聫聭氓鹿露盲陆驴莽聰篓盲潞聠盲赂聙盲赂陋氓聬聧盲赂潞 `runc` 莽職聞莽篓聥氓潞聫茂录聦莽聰篓盲潞聨猫掳聝莽聰篓猫驴聶盲潞聸莽楼聻猫碌聬盲潞聢莽職聞氓聤聼猫聝陆茂录聦忙聺楼氓聢聸氓禄潞盲赂聙盲赂陋盲赂陋氓庐鹿氓聶篓茫聙聜`runc` 莽職聞氓聤聼猫聝陆氓聧聛氓聢聠莽庐聙氓聧聲茂录聦氓庐聝忙聹卢猫潞芦忙聵炉盲赂聙盲赂陋氓聭陆盲禄陇猫隆聦莽篓聥氓潞聫茂录聦盲鹿聼氓掳卤氓聫陋猫聝陆莽聰篓忙聺楼氓聛職氓聢聸氓禄潞氓庐鹿氓聶篓茂录聢`runc create`茂录聣茫聙聛氓录聙氓聬炉氓庐鹿氓聶篓茂录聢`runc start`茂录聣茫聙聛氓聢聴氓聡潞氓庐鹿氓聶篓茂录聢`runc list`茂录聣茫聙聛氓聢聽茅聶陇氓庐鹿氓聶篓茂录聢`runc delete`茂录聣猫驴聶盲潞聸氓聼潞莽隆聙氓聤聼猫聝陆茫聙聜
`runc` 猫聝聦氓聬聨莽職聞氓聨聼莽聬聠忙聵炉盲陆驴莽聰篓 C 猫炉颅猫篓聙莽录聳氓聠聶莽職聞盲禄拢莽聽聛猫掳聝莽聰篓莽鲁禄莽禄聼莽職聞 `namespaces` 氓聮聦 `cgroups` 忙聺楼氓聢聸氓禄潞氓庐鹿氓聶篓茂录聦莽聞露氓聬聨氓聹篓 Go 氓卤聜茅聺垄盲陆驴莽聰篓 CGO 猫掳聝莽聰篓 C 猫炉颅猫篓聙茂录聦氓掳聛猫拢聟忙聢聬盲潞聠 [`libcontainer`](https://github.com/opencontainers/runc/tree/main/libcontainer) 猫驴聶盲鹿聢盲赂聙盲赂陋氓潞聯茫聙聜
`runc` 茅聛碌氓戮陋 OCI茂录聢Open Container Initiative茂录聣猫搂聞猫聦聝盲赂颅莽職聞 Runtime-Spec茫聙聜猫驴聶盲赂陋 OCI 忙聵炉 Docker 氓陆聯氓鹿麓莽聣碌氓陇麓氓聢露氓庐職莽職聞茂录聦氓聢聠盲赂潞 Runtime-Spec 氓聮聦 Image-Spec茂录聦氓聢聠氓聢芦氓聢露氓庐職盲潞聠猫驴聬猫隆聦忙聴露氓聮聦茅聲聹氓聝聫莽職聞猫搂聞猫聦聝茫聙聜
**忙聢聭盲禄卢氓掳聠 `runc` 猫驴聶莽搂聧氓聫陋猫聝陆氓聬炉氓聛聹氓庐鹿氓聶篓莽職聞氓聧聛氓聢聠氓潞聲氓卤聜莽職聞氓庐鹿氓聶篓猫驴聬猫隆聦忙聴露氓聫芦氓聛職盲陆聨莽潞搂氓庐鹿氓聶篓猫驴聬猫隆聦忙聴露茂录聢Low-Level Container Runtime茂录聣**茫聙聜猫驴聶盲鹿聢莽搂掳氓聭录忙聵炉盲赂潞盲潞聠氓聮聦氓聬聨茅聺垄忙聫聬氓聢掳莽職聞 containerd 猫驴聶莽搂聧\*\*茅芦聵莽潞搂氓庐鹿氓聶篓猫驴聬猫隆聦忙聴露茂录聢High-Level Container Runtime茂录聣\*\*氓聦潞氓聢聠氓录聙忙聺楼茫聙聜

### containerd

茅聜拢 `containerd` 氓聫聢忙聵炉氓聲楼氓聭垄茂录聼`containerd` 氓聼潞盲潞聨 `runc` 莽職聞氓庐聻莽聨掳盲潞聠氓聬炉氓聛聹莽庐隆莽聬聠氓庐鹿氓聶篓莽職聞猫聝陆氓聤聸茂录聦氓聬聦忙聴露猫聡陋猫潞芦猫驴聵忙聰炉忙聦聛盲潞聠氓炉鹿氓庐鹿氓聶篓茅聲聹氓聝聫莽職聞莽庐隆莽聬聠茂录聦氓掳卤氓娄聜忙聢聭盲禄卢莽聰篓莽職聞 `docker pull` `docker push` 忙聨篓忙聥聣茅聲聹氓聝聫茂录聦氓炉录氓聡潞茅聲聹氓聝聫莽颅聣氓聤聼猫聝陆茫聙聜氓庐聝猫驴聶茅聡聦氓聟鲁盲潞聨茅聲聹氓聝聫莽職聞氓聤聼猫聝陆盲鹿聼忙聵炉茅聛碌氓戮陋莽聺聙盲赂聤茅聺垄忙聫聬氓聢掳莽職聞 OCI Image-Spec 莽職聞猫搂聞猫聦聝茫聙聜

猫聙聦猫路聼忙聢聭盲禄卢忙聴楼氓赂赂忙聣聯盲潞陇茅聛聯莽職聞 Docker茂录聦氓聡聠莽隆庐莽職聞猫炉麓忙聵炉 Docker Engine茂录聦氓聟露氓聫聢忙聵炉氓聹篓 containerd 盲赂聤莽庐聙氓聧聲氓楼聴盲潞聠氓卤聜氓拢鲁茂录聦忙聢聭盲禄卢莽職聞忙聥聣氓聫聳茅聲聹氓聝聫茫聙聛氓聬炉氓聛聹氓庐鹿氓聶篓茂录聦氓聟露氓庐聻忙聹聙氓聬聨猫驴聵忙聵炉猫聬陆氓聢掳盲潞聠 containerd 猫潞芦盲赂聤氓聨禄忙聣搂猫隆聦茫聙聜氓聝聫 `containerd` 猫驴聶忙聽路莽職聞茅芦聵莽潞搂猫驴聬猫隆聦忙聴露猫驴聵忙聹聣 `CRI-O`茫聙聜

### 茅聹聡忙聝聤茂录聛

氓楼陆莽職聞茂录聦氓娄聜忙聻聹氓聢掳猫驴聶茅聡聦盲陆聽猫驴聵忙虏隆忙聶聲莽職聞猫炉聺茂录聦茅聜拢忙聢聭盲禄卢氓聫炉盲禄楼忙聫聮盲赂陋茅垄聵氓陇聳猫炉聺忙聺楼猫庐虏猫庐虏氓聣聧氓鹿麓 Kubernetes 茅聜拢忙聺隆猫垄芦氓聸陆氓聠聟氓聟卢盲录聴氓聫路莽聳炉莽聥聜忙聽聡茅垄聵氓聟職莽職聞忙聳掳茅聴禄盲潞聠茂录職
氓聣聧氓鹿麓 Kubernetes 氓庐聵忙聳鹿氓庐拢氓赂聝氓掳聠氓聹篓忙聹陋忙聺楼氓聫聭氓赂聝莽職聞莽聣聢忙聹卢盲赂颅氓录聝莽聰篓 `dockershim`茂录聦莽聸麓忙聨楼氓聹篓忙潞聬莽聽聛盲赂颅氓聢聽忙聨聣 `dockershim` 莽職聞茅聝篓氓聢聠茫聙聜氓庐聵忙聳鹿莽職聞猫搂拢茅聡聤氓聫炉盲禄楼莽聹聥[猫驴聶莽炉聡忙聳聡莽芦聽](https://kubernetes.io/zh-cn/blog/2020/12/02/dockershim-faq/)茫聙聜

猫驴聶盲潞聥盲录聽氓聢掳氓聸陆氓聠聟氓聟卢盲录聴氓聫路氓掳卤氓聫聵忙聢聬茂录職芒聙聹Kubernetes 氓庐拢氓赂聝盲赂聧氓聠聧忙聰炉忙聦聛 Docker 猫驴聬猫隆聦忙聴露芒聙聺 猫驴聶莽搂聧忙聽聡茅垄聵氓聟職忙聳聡莽芦聽茫聙聜忙聢聭盲禄卢盲赂聤茅聺垄猫聛聤氓聢掳盲潞聠 Docker Engine -> containerd -> runc 猫驴聶氓卤聜氓聟鲁莽鲁禄茂录聦猫聙聦 `dockershim` 氓聢聶忙聵炉莽聰篓盲潞聨氓陇聞莽聬聠 Kubernetes -> Docker Engine 猫驴聶氓卤聜氓聟鲁莽鲁禄莽職聞茫聙聜

莽聰卤盲潞聨氓陆聯氓鹿麓 Docker 氓聢職氓聡潞忙聺楼盲赂聙氓庐露莽聥卢氓陇搂茂录聦茅聡聨猫聸庐莽聰聼茅聲驴莽職聞猫驴聡莽篓聥盲赂颅氓聛職盲潞聠氓戮聢氓陇職盲赂聧忙聵炉茅聜拢盲鹿聢猫搂聞猫聦聝莽職聞盲潞聥忙聝聟茂录聦Kubernetes 盲鹿聥氓聬聨忙聣聧氓聢露氓庐職盲潞聠**氓庐鹿氓聶篓猫驴聬猫隆聦忙聴露忙聨楼氓聫拢 CRI茂录聢Container Runtime Interface茂录聣** 猫搂聞猫聦聝茂录聢忙鲁篓忙聞聫猫路聼盲赂聤茅聺垄茅聜拢盲赂陋 OCI 忙聵炉盲赂陇盲赂陋盲赂聹猫楼驴茂录聣忙聺楼莽潞娄忙聺聼氓庐鹿氓聶篓猫驴聬猫隆聦忙聴露莽職聞猫隆聦盲赂潞茫聙聜盲陆聠 Docker 猫驴聶盲赂聹猫楼驴忙炉聲莽芦聼氓聟聢氓聡潞忙聺楼氓鹿露盲赂聧茅聛碌氓庐聢 CRI茂录聦氓庐聝氓聡潞忙聺楼忙路路莽職聞忙聴露氓聙聶猫驴聵忙虏隆盲陆聽 CRI 莽聰職猫聡鲁 Kubernetes 盲禄聙盲鹿聢盲潞聥氓聭垄茂录聛
氓聬聨茅聺垄 Kubernetes 忙聝鲁茅聛碌氓庐聢 CRI 猫搂聞猫聦聝忙聲麓氓聬聢忙聨楼氓聟楼氓聬聞莽搂聧猫驴聬猫隆聦忙聴露莽職聞忙聴露氓聙聶茂录聦氓掳卤盲赂聧氓戮聴盲赂聧盲赂潞 Docker Engine 氓陆聯氓鹿麓莽職聞忙聣聙盲陆聹忙聣聙盲赂潞芒聙聹盲鹿掳氓聧聲芒聙聺茂录聦盲鹿聼氓掳卤忙聵炉氓聠聶盲潞聠 `dockershim` 猫驴聶盲鹿聢盲赂陋盲赂聹猫楼驴盲陆聹盲赂潞盲赂颅茅聴麓氓卤聜猫庐漏 Docker Engine 茅聛碌氓戮陋 CRI 猫搂聞猫聦聝猫驴聸猫隆聦忙聨楼氓聟楼茫聙聜`dockershim` 猫驴聶氓聺篓芒聙聹氓卤聨氓卤卤芒聙聺猫露聤忙聺楼猫露聤莽鹿聛茅聡聧茂录聦氓聬聨茅聺垄 Kubernetes 莽聸麓忙聨楼氓录聙忙聭聠盲赂聧忙聝鲁氓鹿虏盲潞聠茂录聦莽聸麓忙聨楼忙聤聤 Docker Engine 氓聨禄忙聨聣氓聬搂茂录聦忙聢聭盲禄卢莽聸麓忙聨楼忙聥楼忙聤卤茅聛碌氓庐聢 CRI 猫搂聞猫聦聝莽職聞 `containerd`茂录聛

忙聲麓盲赂陋氓聟鲁莽鲁禄盲鹿聼氓掳卤盲禄聨茂录職

```
Kubernetes -> Docker Engine -> containerd -> runc
```

氓聫聵忙聢聬盲潞聠

```
Kubernetes -> containerd -> runc
```

莽隆庐氓庐聻盲鹿聼忙虏隆盲禄聙盲鹿聢茅聴庐茅垄聵茂录聦盲陆聽 Docker Engine 盲赂聧盲鹿聼忙聵炉 `containerd` 氓楼聴氓拢鲁氓聵聸茂录聦猫驴聶盲鹿聼氓掳卤忙聵炉盲赂潞盲禄聙盲鹿聢忙聢聭盲禄卢莽聨掳氓聹篓 `docker build` 莽職聞茅聲聹氓聝聫盲禄聧氓聫炉盲禄楼氓聹篓 Kubernetes 忙颅拢氓赂赂盲陆驴莽聰篓莽職聞氓聨聼氓聸聽茂录聦氓聸聽盲赂潞猫驴聶盲潞聸茅聝陆忙聵炉茅聛碌氓庐聢 `OC...