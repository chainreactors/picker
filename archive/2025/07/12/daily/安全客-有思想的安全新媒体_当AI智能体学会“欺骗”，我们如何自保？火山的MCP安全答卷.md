---
title: 当AI智能体学会“欺骗”，我们如何自保？火山的MCP安全答卷
url: https://www.anquanke.com/post/id/309933
source: 安全客-有思想的安全新媒体
date: 2025-07-12
fetch_date: 2025-10-06T23:16:54.244910
---

# 当AI智能体学会“欺骗”，我们如何自保？火山的MCP安全答卷

йҰ–йЎө

йҳ…иҜ»

* [е®үе…Ёиө„и®Ҝ](https://www.anquanke.com/news)
* [е®үе…ЁзҹҘиҜҶ](https://www.anquanke.com/knowledge)
* [е®үе…Ёе·Ҙе…·](https://www.anquanke.com/tool)

жҙ»еҠЁ

зӨҫеҢә

еӯҰйҷў

е®үе…ЁеҜјиҲӘ

еҶ…е®№зІҫйҖү

* [дё“ж Ҹ](/column/index.html)
* [зІҫйҖүдё“йўҳ](https://www.anquanke.com/subject-list)
* [е®үе…ЁKERеӯЈеҲҠ](https://www.anquanke.com/discovery)
* [360зҪ‘з»ңе®үе…Ёе‘ЁжҠҘ](https://www.anquanke.com/week-list)

# еҪ“AIжҷәиғҪдҪ“еӯҰдјҡвҖңж¬әйӘ—вҖқпјҢжҲ‘д»¬еҰӮдҪ•иҮӘдҝқпјҹзҒ«еұұзҡ„MCPе®үе…Ёзӯ”еҚ·

йҳ…иҜ»йҮҸ**152819**

еҸ‘еёғж—¶й—ҙ : 2025-07-11 14:43:33

**x**

##### иҜ‘ж–ҮеЈ°жҳҺ

жң¬ж–ҮжҳҜзҝ»иҜ‘ж–Үз«

иҜ‘ж–Үд»…дҫӣеҸӮиҖғпјҢе…·дҪ“еҶ…е®№иЎЁиҫҫд»ҘеҸҠеҗ«д№үеҺҹж–ҮдёәеҮҶгҖӮ

# еҜјиҜ»

жң¬ж–Үж—ЁеңЁйҳҗиҝ°зҒ«еұұеј•ж“ҺеңЁжЁЎеһӢдёҠдёӢж–ҮеҚҸи®®пјҲModel Context Protocol, MCPпјүе…Ёз”ҹе‘Ҫе‘Ёжңҹдёӯзҡ„е®үе…Ёдҝқйҡңе®һи·өгҖӮйҰ–е…Ҳд»Ӣз»ҚMCPзҡ„ж ёеҝғжҰӮеҝөгҖҒжҠҖжңҜеҺҹзҗҶеҸҠз”ҹжҖҒеҸ‘еұ•зҺ°зҠ¶пјҢйҡҸеҗҺйҖҡиҝҮдёҖдёӘдәӨдә’жЎҲдҫӢиҜҰз»Ҷеү–жһҗе…¶е·ҘдҪңжөҒзЁӢгҖӮж ёеҝғйғЁеҲҶж·ұе…ҘеҲҶжһҗдәҶMCPйқўдёҙзҡ„дёғз§Қдё»иҰҒе®үе…ЁйЈҺйҷ©пјҢеҢ…жӢ¬дј з»ҹWebжңҚеҠЎйЈҺйҷ©еҸҠе·Ҙе…·жҸҸиҝ°жҠ•жҜ’гҖҒй—ҙжҺҘжҸҗзӨәиҜҚжіЁе…Ҙзӯүж–°еһӢеЁҒиғҒпјҢе№¶з»“еҗҲе…·дҪ“жЎҲдҫӢиҝӣиЎҢиҜҙжҳҺгҖӮжңҖеҗҺпјҢжң¬ж–ҮжҸҗеҮәдәҶзҒ«еұұеј•ж“Һй’ҲеҜ№жҖ§зҡ„MCPе®үе…Ёжһ¶жһ„дёҺдҝқйҡңж–№жЎҲпјҢж¶өзӣ–е®үе…ЁеҮҶе…ҘгҖҒеҺҹз”ҹе®үе…Ёи®ҫи®ЎеҸҠиҝҗиЎҢж—¶йҳІжҠӨзӯүеӨҡдёӘз»ҙеәҰпјҢж—ЁеңЁдёәиЎҢдёҡжһ„е»әе®үе…Ёзҡ„MCPз”ҹжҖҒжҸҗдҫӣеҸӮиҖғгҖӮ

жң¬ж–ҮжҳҜзҒ«еұұMCPе®үе…Ёзі»еҲ—зҡ„йҰ–зҜҮж–Үз« пјҢжҺҘдёӢжқҘпјҢжҲ‘д»¬е°Ҷеӣҙз»•еҺҹз”ҹе®үе…Ёи®ҫи®ЎгҖҒе®үе…ЁеҮҶе…ҘжҺ§еҲ¶д»ҘеҸҠиҝҗиЎҢж—¶е®үе…ЁйҳІжҠӨиҝӣиЎҢиҜҰз»Ҷйҳҗиҝ°пјҢеӨ§е®¶ж•¬иҜ·жңҹеҫ…пјҒ

# дёҖгҖҒеј•иЁҖ

жЁЎеһӢдёҠдёӢж–ҮеҚҸи®®пјҲModel Context Protocol, MCPпјүжҳҜз”ұдәәе·ҘжҷәиғҪе…¬еҸёAnthropicдәҺ2024е№ҙжҺЁеҮәзҡ„ејҖж”ҫж ҮеҮҶпјҢж—ЁеңЁдёәеӨ§еһӢиҜӯиЁҖжЁЎеһӢпјҲLLMпјүдёҺеӨ–йғЁж•°жҚ®жәҗгҖҒе·Ҙе…·д№Ӣй—ҙе»әз«Ӣж ҮеҮҶеҢ–зҡ„еҸҢеҗ‘йҖҡдҝЎй“ҫи·ҜгҖӮйҖҡиҝҮиҜҘеҚҸи®®пјҢејҖеҸ‘иҖ…иғҪеӨҹд»Ҙз»ҹдёҖзҡ„ж јејҸиҝһжҺҘеӨҡж ·еҢ–зҡ„ж•°жҚ®жәҗпјҢд»ҺиҖҢжҳҫи‘—йҷҚдҪҺдәҶжҷәиғҪдҪ“пјҲAgentпјүзҡ„ејҖеҸ‘еӨҚжқӮеәҰпјҢеҠ йҖҹдәҶе…¶еңЁеҗ„иЎҢдёҡзҡ„еә”з”ЁиҗҪең°гҖӮ

MCPз”ҹжҖҒзі»з»ҹжӯЈз»ҸеҺҶеҝ«йҖҹеҸ‘еұ•гҖӮдё»жөҒжЁЎеһӢжҸҗдҫӣе•ҶпјҲеҰӮOpenAIпјүгҖҒејҖеҸ‘е·Ҙе…·пјҲеҰӮCursorпјүд»ҘеҸҠеҗ„зұ»еә”з”Ёе·ІйҖҗжӯҘйӣҶжҲҗMCPж”ҜжҢҒпјҢжҺЁеҠЁдәҶMCP Hubзҡ„е…ҙиө·гҖӮд»ҘMCP.soдёәдҫӢпјҢжҲӘиҮізӣ®еүҚпјҢиҜҘе№іеҸ°е·Іж”¶еҪ•и¶…иҝҮ15,000дёӘMCP ServerпјҢж Үеҝ—зқҖдёҖдёӘз№ҒиҚЈзҡ„AIеә”з”Ёз”ҹжҖҒе·ІеҲқжӯҘеҪўжҲҗгҖӮ

дҪңдёәдё“жіЁдәҺAIдә‘еҺҹз”ҹзҡ„е…¬жңүдә‘жңҚеҠЎе•ҶпјҢзҒ«еұұеј•ж“Һе…·еӨҮе°ҶжЁЎеһӢдёҺе·Ҙе…·ж·ұеәҰиһҚеҗҲзҡ„еӨ©з„¶дјҳеҠҝгҖӮзҒ«еұұдәҺ2024е№ҙ5жңҲжӯЈејҸдёҠзәҝеӨ§жЁЎеһӢз”ҹжҖҒе№ҝеңәпјҢзӣ®еүҚе·ІйӣҶжҲҗи¶…иҝҮ200ж¬ҫиҰҶзӣ–дё»жөҒдә‘дә§е“Ғзҡ„MCP ServerгҖӮжң¬ж–Үе°Ҷеӣҙз»•MCPзҡ„е…Ёз”ҹе‘Ҫе‘ЁжңҹпјҢзі»з»ҹжҖ§ең°еҲҶдә«зҒ«еұұеј•ж“Һдә‘е№іеҸ°е®үе…ЁдҝқйҡңеӣўйҳҹеңЁMCPе®үе…ЁдҪ“зі»е»әи®ҫж–№йқўзҡ„е®һи·өз»ҸйӘҢпјҢжңҹжңӣиғҪдёәиЎҢдёҡе…ұеҗҢжһ„е»әе®үе…Ёзҡ„MCPз”ҹжҖҒжҸҗдҫӣжңүд»·еҖјзҡ„еҸӮиҖғгҖӮ

# дәҢгҖҒMCPж ёеҝғжҰӮеҝөдёҺжҠҖжңҜеҺҹзҗҶ

## 2.1 еҹәжң¬е®ҡд№ү

MCPжҳҜдёҖдёӘејҖж”ҫеҚҸи®®пјҢе®ғе®ҡд№үдәҶеә”з”ЁзЁӢеәҸеҗ‘еӨ§еһӢиҜӯиЁҖжЁЎеһӢпјҲLLMпјүжҸҗдҫӣдёҠдёӢж–ҮдҝЎжҒҜзҡ„ж ҮеҮҶж–№ејҸгҖӮеҸҜе°Ҷе…¶зұ»жҜ”дёәAIеә”з”ЁйўҶеҹҹзҡ„вҖңUSB-CвҖқз«ҜеҸЈпјҡжӯЈеҰӮUSB-Cдёәзү©зҗҶи®ҫеӨҮжҸҗдҫӣдәҶж ҮеҮҶеҢ–зҡ„еӨ–и®ҫиҝһжҺҘж–№ејҸпјҢMCPеҲҷдёәAIжЁЎеһӢжҸҗдҫӣдәҶиҝһжҺҘдёҚеҗҢж•°жҚ®жәҗе’Ңе·Ҙе…·зҡ„ж ҮеҮҶеҢ–жҺҘеҸЈгҖӮ

![]()

## 2.2 зү№зӮ№дёҺдјҳеҠҝ

| зү№зӮ№ | дјҳеҠҝжҸҸиҝ° |
| --- | --- |
| ж ҮеҮҶеҢ– | еҚҸи®®йҮҮз”ЁJSON-RPC 2.0дҪңдёәйҖҡз”ЁжҺҘеҸЈи§„иҢғпјҢе®ҡд№үдәҶж ҮеҮҶзҡ„иҫ“е…ҘдёҺиҫ“еҮәж јејҸпјҢе®һзҺ°дәҶжЁЎеһӢдёҺе·Ҙе…·д№Ӣй—ҙзҡ„й«ҳж•ҲгҖҒж— зјқеҜ№жҺҘ |
| еҺ»дёӯеҝғеҢ–и®ҫи®Ў | дёҺд»ҘLangChainдёәд»ЈиЎЁзҡ„дј з»ҹжҷәиғҪдҪ“жһ„е»әжЁЎејҸдёҚеҗҢпјҢMCPж— йңҖдёәжҜҸдёӘе·Ҙе…·жһ„е»әзӢ¬з«Ӣзҡ„жҸ’д»¶гҖӮе®ғж”ҜжҢҒжң¬ең°еҢ–е’Ңдә‘дёӢйғЁзҪІпјҢиөӢдәҲз”ЁжҲ·жһҒеӨ§зҡ„зҒөжҙ»жҖ§д»ҘйҖӮеә”дёҚеҗҢеңәжҷҜгҖӮ |
| е®үе…ЁжҖ§ | жҸҗдҫӣдәҶеҹәдәҺOauthжЁЎејҸзҡ„жҺҲжқғж–№жЎҲ |

## 2.3 ж ёеҝғз»„д»¶

MCPз”ҹжҖҒзі»з»ҹз”ұд»ҘдёӢж ёеҝғз»„д»¶жһ„жҲҗпјҢиҝҷдәӣз»„д»¶еҚҸеҗҢе·ҘдҪңпјҢжһ„жҲҗдәҶMCPеҚҸи®®зҡ„е®Ңж•ҙз”ҹжҖҒпјҢе®һзҺ°дәҶAIжЁЎеһӢдёҺеӨ–йғЁдё–з•Ңд№Ӣй—ҙж ҮеҮҶеҢ–гҖҒе®үе…ЁеҢ–зҡ„дәӨдә’гҖӮ

| з»„д»¶ | з»„д»¶жҸҸиҝ° |
| --- | --- |
| еӨ§еһӢиҜӯиЁҖжЁЎеһӢ (LLM) | дҪңдёәж ёеҝғзҡ„жҷәиғҪеӨ„зҗҶеҚ•е…ғпјҢеҸҜд»ҘжҳҜе…·дҪ“зҡ„еҚ•дёӘжЁЎеһӢпјҢд№ҹеҸҜд»ҘжҳҜйӣҶжҲҗдәҶеӨҡдёӘжЁЎеһӢзҡ„е№іеҸ°пјҲеҰӮзҒ«еұұж–№иҲҹпјү |
| MCP жңҚеҠЎз«Ҝ(MCP Server) | дёәMCP ClientжҸҗдҫӣдёҠдёӢж–ҮдҝЎжҒҜгҖҒе·Ҙе…·иғҪеҠӣеҸҠжҸҗзӨәиҜҚпјҲPromptпјүж”ҜжҢҒгҖӮе®ғжҳҜеӨ–йғЁиө„жәҗдёҺAIжЁЎеһӢдәӨдә’зҡ„вҖңжү§иЎҢиҖ…вҖқпјҢиҙҹиҙЈеӨ„зҗҶе…·дҪ“зҡ„е·Ҙе…·и°ғз”Ёе’Ңж•°жҚ®и®ҝй—®д»»еҠЎ |
| MCP е®ўжҲ·з«ҜпјҲMCP Clientпјү | дҪңдёәMCP Hostзҡ„еҶ…зҪ®йҖҡдҝЎжЁЎеқ—пјҢиҙҹиҙЈдёҺMCP Serverе»әз«ӢиҝһжҺҘгҖҒеҸ‘йҖҒиҜ·жұӮе№¶еӨ„зҗҶе“Қеә”пјҢжҳҜдё»жңәз«ҜдёҺжңҚеҠЎеҷЁд№Ӣй—ҙзҡ„вҖңйҖҡдҝЎдёӯд»ӢвҖқ |
| MCP дё»жңәз«ҜпјҲMCP Hostпјү | жҢҮеӨ§жЁЎеһӢеә”з”ЁжҲ–жҷәиғҪдҪ“пјҢзӣҙжҺҘеӨ„зҗҶз”ЁжҲ·иҫ“е…ҘпјҢе№¶е°Ҷд»»еҠЎдј йҖ’з»ҷLLMгҖӮе®ғйҖҡиҝҮеҶ…зҪ®зҡ„MCP ClientдёҺеӨ–йғЁиө„жәҗдәӨдә’пјҢжҳҜиҝһжҺҘз”ЁжҲ·дёҺAIжЁЎеһӢзҡ„вҖңж ёеҝғжЎҘжўҒвҖқ |
| MCP жңҚеҠЎз«Ҝжүҳз®Ўе№іеҸ°пјҲMCP Server Hubпјү | дҪңдёәMCP Serverзҡ„йӣҶдёӯејҸжүҳз®Ўе№іеҸ°пјҢеҸҜзҗҶи§Јдёәеҗ„зұ»MCP Serverзҡ„вҖңеә”з”ЁеёӮеңәвҖқпјҢдҫҝдәҺе®ўжҲ·з«ҜеҸ‘зҺ°е’Ңи°ғз”ЁжүҖйңҖзҡ„жңҚеҠЎиө„жәҗ |
| MCP жңҚеҠЎз«ҜзҪ‘е…іпјҲMCP Server Gatewayпјү | MCP Serverз»ҹдёҖеҜ№еӨ–зҡ„зҪ‘е…іпјҢз”ЁдәҺжҺҘеҸ—MCP ClientеҸ‘йҖҒзҡ„иҜ·жұӮпјҢMCP Server GatewayеҸҜд»ҘжҳҜеҚ•дёҖзҡ„MCP ServerпјҢд№ҹеҸҜд»ҘжҳҜеӨҡMCP Server |
| ж•°жҚ®жәҗ(Data Sources) | MCP ServerеҸҜи®ҝй—®зҡ„еӨ–йғЁиө„жәҗйӣҶеҗҲпјҢеҢ…жӢ¬жң¬ең°ж–Үд»¶гҖҒж•°жҚ®еә“гҖҒWeb APIзӯүпјҢжҳҜдёәAIжЁЎеһӢжҸҗдҫӣе®һж—¶жҲ–зү№е®ҡйўҶеҹҹж•°жҚ®зҡ„вҖңдҝЎжҒҜд»“еә“вҖқ |

еҗ„з»„д»¶зҡ„еҚҸдҪңе…ізі»еҰӮдёӢеӣҫжүҖзӨәпјҡ

![]()

## 2.4 иҝҗиЎҢжЁЎејҸ

MCP ж”ҜжҢҒдёӨз§Қдё»иҰҒзҡ„иҝҗиЎҢжЁЎејҸпјҡ

| жЁЎејҸ | жЁЎејҸжҸҸиҝ° | е®үе…ЁжҖ§ |
| --- | --- | --- |
| жң¬ең°жЁЎејҸ(Local Mode) | MCP Clientе’ҢMCP ServerдҪҚдәҺеҗҢдёҖе®үе…ЁеҹҹеҶ…пјҢдҫӢеҰӮеңЁеҗҢдёҖдё»жңәдёҠйҖҡиҝҮж ҮеҮҶиҫ“е…Ҙ/иҫ“еҮәпјҲSTDIOпјүиҝӣиЎҢйҖҡдҝЎ | ж— жҺҲжқғпјҢдҪҶдҪңз”ЁиҢғеӣҙдёәеҗҢдёҖе®үе…Ёеҹҹ |
| иҝңзЁӢжЁЎејҸ(Remote Mode) | MCP Clientе’ҢMCP ServerдҪҚдәҺдёҚеҗҢзҡ„е®үе…ЁеҹҹпјҢйҖҡиҝҮHTTP RPCпјҲеҰӮServer-Sent Events, SSEпјүиҝӣиЎҢи·Ёдё»жңәйҖҡдҝЎ | йңҖиҰҒжҺҲжқғпјҢеә”йҒөеҫӘOauthи§„иҢғ |

# дёүгҖҒж—¶еәҸдәӨдә’жЎҲдҫӢ

жң¬иҠӮд»ҘзҒ«еұұеј•ж“ҺECSжңҚеҠЎзҡ„MCP ServerдёҺClientдәӨдә’дёәдҫӢпјҢеҜ№еҚҸи®®зҡ„е…ЁжөҒзЁӢиҝӣиЎҢеҲҶжһҗгҖӮ

**дәӨдә’ж—¶еәҸеӣҫеҰӮдёӢпјҡ**

![]()

**е…ій”®жӯҘйӘӨжӢҶи§Јпјҡ**

**жӯҘйӘӨ 1пјҡMCP Clientеҗ‘MCP ServerжҹҘиҜўеҸҜз”Ёе·Ҙе…·еҲ—иЎЁ**

MCP ClientеҸ‘иө·дёҖж¬ЎRPCиҜ·жұӮпјҢиҺ·еҸ–MCP ServerжҸҗдҫӣзҡ„е·Ҙе…·еҲ—иЎЁгҖӮ

**иҜ·жұӮзӨәдҫӢпјҡ**

![]()

**е“Қеә”зӨәдҫӢпјҡ**

![]()

**жӯҘйӘӨ 2пјҡMCP Clientе°Ҷе·Ҙе…·еҲ—иЎЁж•ҙеҗҲиҮіжҸҗзӨәиҜҚе№¶жҸҗдәӨз»ҷLLM**

MCP Clientе°ҶиҺ·еҸ–еҲ°зҡ„е·Ҙе…·е®ҡд№үдёҺз”ЁжҲ·зҡ„ж ёеҝғйңҖжұӮж•ҙеҗҲжҲҗдёҖдёӘе®Ңж•ҙзҡ„жҸҗзӨәиҜҚпјҢжҸҗдәӨз»ҷLLMпјҢдҪҝе…¶зҹҘжҷ“еҪ“еүҚеҸҜз”Ёзҡ„е·Ҙе…·йӣҶгҖӮ

![]()

**жӯҘйӘӨ 3пјҡLLMж №жҚ®з”ЁжҲ·й—®йўҳеҶізӯ–и°ғз”Ёе·Ҙе…·пјҢе№¶иҝ”еӣһз»ҷMCP Client**

LLMеҲҶжһҗз”ЁжҲ·иҫ“е…ҘпјҢе№¶д»ҺеҸҜз”Ёе·Ҙе…·еҲ—иЎЁдёӯйҖүжӢ©жңҖеҗҲйҖӮзҡ„е·Ҙе…·иҝӣиЎҢи°ғз”ЁгҖӮ

* **В· еҗ‘LLMзҡ„жҸҗй—®пјҲеҢ…еҗ«з”ЁжҲ·й—®йўҳеҸҠзҺҜеўғдҝЎжҒҜпјү**пјҡ

```
{
        "role": "user",
        "content": [{
            "type": "text",
            "text": "<task>\nжҹҘзңӢзҒ«еұұеј•ж“ҺECSдә§е“ҒпјҢжңүе“ӘдәӣеҸҜз”Ёзҡ„regionпјҹ\n</task>"
        }, {
            "type": "text",
            "text": "<environment_details>\n# VSCode Visible Files\n../Library/Application Support/Code/User/globalStorage/saoudrizwan.claude-dev/settings/cline_mcp_settings.json\n\n# VSCode Open Tabs\n../../../Untitled-1\n../Library/Application Support/Code/User/globalStorage/saoudrizwan.claude-dev/settings/cline_mcp_settings.json\n../../../Untitled-2\n\n# Current Time\n5/11/2025, 4:05:23 PM (Asia/Shanghai, UTC+8:00)\n\n# Current Working Directory (/Users/h13t0ry/Desktop) Files\n(Desktop files not shown automatically. Use list_files to explore if needed.)\n\n# Context Window Usage\n0 / 64K tokens used (0%)\n\n# Current Mode\nACT MODE\n</environment_details>"
        }]
    }],
    "temperature": 0,
    "stream": true,
    "stream_options": {
        "include_usage": true
    }
```

* **В· LLMзҡ„еӣһеӨҚпјҲеҢ…еҗ«жҖқиҖғиҝҮзЁӢе’Ңе·Ҙе…·и°ғз”ЁжҢҮд»Өпјү**пјҡ

```
// еҰӮдёӢжҳҜжҖқиҖғиҝҮзЁӢ
<thinking>
1. з”ЁжҲ·жғіиҰҒжҹҘзңӢзҒ«еұұеј•ж“ҺECSдә§е“ҒеҸҜз”Ёзҡ„regionеҲ—иЎЁ
2. е·ІиҝһжҺҘзҡ„MCPжңҚеҠЎеҷЁ\h13t0ry_ecs test\жҸҗдҫӣдәҶdescribe_regionsе·Ҙе…·еҸҜд»ҘжҹҘиҜўregionдҝЎжҒҜ
3. и...