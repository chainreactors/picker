---
title: 记一次某src挖掘
url: https://www.anquanke.com/post/id/297719
source: 安全客-有思想的安全新媒体
date: 2024-09-05
fetch_date: 2025-10-06T18:20:09.695627
---

# 记一次某src挖掘

首页

阅读

* [安全资讯](https://www.anquanke.com/news)
* [安全知识](https://www.anquanke.com/knowledge)
* [安全工具](https://www.anquanke.com/tool)

活动

社区

学院

安全导航

内容精选

* [专栏](/column/index.html)
* [精选专题](https://www.anquanke.com/subject-list)
* [安全KER季刊](https://www.anquanke.com/discovery)
* [360网络安全周报](https://www.anquanke.com/week-list)

# 记一次某src挖掘

阅读量**242366**

发布时间 : 2024-09-04 10:17:32

**x**

##### 译文声明

本文是翻译文章

译文仅供参考，具体内容表达以及含义原文为准。

**本文作者：Track – blueaurora**

### 一、获取web端管理员权限

#### 0x01简单查看一下，发现存在登录以及证书查询操作指南等功能

因该站特征较为明显，所以对页面进行了强打码
![img]()

#### 0x02弱口令测试（无成果）

既然存在登录口，那么肯定要试试弱口令了，开干！
![img]()

经过尝试发现可以对登录用户进行爆破，密码加密了，看着像base64但发现并不是，只能通过爆破发现的用户名手动的测试几个密码了。

![img]()

经过手工测试，最后发现一个也没成功的，这运气有点衰啊?，好好好，那就看看注册页面吧

#### 0x03注册用户（无成果）

简单的测试下看看是否存在xss和sql注入，发现并不存在，只能老实注册用户了，但是最后发现需要管理员审核，一直没有通过?

中间注册时发现密码是高强度密码（密码由特殊符号、大小写字母和数字3种组合并且长度大于8位!）这就算爆破也很难爆破到了，直接放弃。

![img]()

![img]()

#### 0x04打入内部群组（获取账号名和默认密码格式）

突然发现存在操作手册！看看是否存在什么可利用信息（部分手册可能泄露账号和密码，以及一些其它可供后期利用的信息）

发现默认用户名是手机号码，且存在默认密码和一个技术支持qq群。
![img]()

然后申请加入qq群，查看聊天记录发现了默认密码格式和手机号，默认密码为XXXX+电话或身份证后6位+XXXX，，尝试去登录发现全都是失败的?这些人的安全意识真不错?，现阶段知道的就是只要登录过的用户就一定修改了密码。

后面让备注自己单位和名字，没有备注就给我踢了?

#### 0x05js审计（获取大量接口）

通过前端代码审计发现存在大量接口，尝试几个发现都需要权限才能访问，又回到了登录问题
![img]()

#### 0x06通过google大法获取登录账号（登录）

因为是教育平台可以通过google语法对学校资产进行收集获取教师电话，然后再根据密码格式进行登录尝试

经过一顿FUZZ之后成功的登上了平台。但是！除了完善资料外，没有其余功能点，且必须修改默认密码后才能获取功能和内容。

![img]()

#### 0x07越权（获取账号敏感信息）

通过对完善资料处进行抓包发现可通过输入用户名获取用户敏感信息ID、姓名、电话、身份证等信息（但很局限，因为前提需要知道用户名是什么）

![img]()

#### 0x08修改默认密码获取正常功能

默认密码修改处需获取手机验证码，无法绕过，该怎么办呢？?

对js源码进行审计发现与修改密码相关的接口有三个，其中一个为当前修改默认密码需要获取短信验证码直接忽略，一个提示只可以修改自己的账号密码，第三个提示权限不足

![img]()

![img]()

![img]()

![img]()

很明显现阶段第二个接口可以尝试用户名密码修改，只是不知道需要哪些具体参数。继续翻看js发现请求参数名

![img]()

输入密码后仍然提示只允许修改自己密码，那么推断缺少一个确认用户的参数，根据前面的越权可以发现存在确认用户的参数可能是id，也可能是username这两个值

![img]()

通过验证为username参数，并修改密码成功

![img]()

重新登录后获取正常功能点

![img]()

#### 0x09信息泄露

由于网站接口较多，对部分接口进行测试发现存在需要可以越权访问的接口和部分权限不足，以及不知道正确路径的接口

其中存在有接口存在大量信息泄露，泄露该域所有教师人员信息，

需先通过接口获取学校key值之后再通过另一个user接口获取当前在校职工信息

![img]()

![img]()

mysql数据库账号密码等信息，但未在互联网上开放端口。

![img]()

#### 0x10提权=>任意密码重置

通过某接口查看可获取当前在线用户列表，包含token、用户名等信息

![img]()

之前密码修改中不是存在一个权限不够的接口吗？，那么如果我获取到管理员的token或其他高权限token是不是就能重置了呢?

答案是yes。不过此处因为任意密码重置，判定要素是用户ID。

![img]()

#### 0x11获取管理员页面

通过现阶段已获取sysadmin权限的token，如何获取管理员页面呢

一、可以通过用户创建接口直接创建一个管理员用户

二、通过用户编辑接口使普通用户获取管理员权限

三、使用管理员token获取管理员页面和功能

使用第三种方案获取管理员页面

在登录管理中心时会通过Permission接口通过当前token判断用户所拥有的功能并返回，（如果提前替换token会导致账号掉线，从而使token失效）然后通过替换Permission接口的返回值来获取管理员页面和功能点。

普通用户返回包大小为几千

![img]()

管理员返回包大小为上万，

![img]()

替换内容

![img]()

查询内容时需每次都替换token很麻烦,且需较快手速，否则会响应超时，可使用插件modheader替换token即可

![img]()

![img]()

#### 0x12总结

渗透思路往往不要太局限了。当我们对某一个登录框站点没有思路时，可以尝试找找是否存在一些说明手册，因为功能点繁多，面向大量的不同单位人群，可能会存在qq群等，好对一些用户问题进行处理，那么就可以通过谷歌语法，对网站名 + 群等关键字搜索，也可以直接在qq群搜索网站名称，或开发商名称进行查找，当你进入他们内部的群时，就可以获取很多敏感信息了，甚至可以直接向运维人员申请修改密码等操作。
最后的最后白嫖10rank

![img]()

本文翻译自 原文链接。如若转载请注明出处。

商务合作，文章发布请联系 anquanke@360.cn

本文由**掌控安全学院**原创发布

转载，请参考[转载声明](https://www.anquanke.com/note/repost)，注明出处： [https://www.anquanke.com/post/id/297719](/post/id/297719)

安全KER - 有思想的安全新媒体

本文转载自:

如若转载,请注明出处：

安全KER - 有思想的安全新媒体

分享到：![微信](https://p0.ssl.qhimg.com/sdm/28_28_100/t01e29062a5dcd13c10.png)

* [渗透测试，web安全](/tag/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%EF%BC%8Cweb%E5%AE%89%E5%85%A8)

**+1**7赞

收藏

![](https://p2.ssl.qhimg.com/t014f774daeca5ec49b.png)掌控安全学院

分享到：![微信](https://p0.ssl.qhimg.com/sdm/28_28_100/t01e29062a5dcd13c10.png)

## 发表评论

您还未登录，请先登录。

[登录](/login/index.html)

![](https://p0.ssl.qhimg.com/t014757b72460d855bf.png)

[![](https://p2.ssl.qhimg.com/t014f774daeca5ec49b.png)](/member.html?memberId=141365)

[掌控安全学院](/member.html?memberId=141365)

公众号：掌控安全EDU

* 文章
* **26**

* 粉丝
* **53**

### TA的文章

* ##### [记一次某src挖掘](/post/id/297719)

  2024-09-04 10:17:32
* ##### [记某研究院多处漏洞复盘](/post/id/298638)

  2024-09-03 16:30:42
* ##### [EDU拿敏感信息的骚思路](/post/id/298022)

  2024-09-03 16:06:55
* ##### [记一所中学的的SQL报错注入](/post/id/297649)

  2024-09-03 16:06:03
* ##### [记一次AccessKey值泄露的挖掘和分析](/post/id/298882)

  2024-08-30 14:41:59

### 相关文章

* ##### [为AI Agent行为立“规矩”——字节跳动提出Jeddak AgentArmor智能体安全框架](/post/id/312426)

  2025-09-28 13:43:32
* ##### [教你打造一款AI安全助手 | 安全MCP的实践指南](/post/id/311884)

  2025-09-05 10:40:51
* ##### [当数字世界的“万能钥匙”被滥用，谁来守护核心资产？火山的 MCP 安全授权新范式](/post/id/311597)

  2025-08-28 09:50:41
* ##### [Python代码保护之重置操作码映射的攻与防探究（一）](/post/id/311484)

  2025-08-26 10:49:47
* ##### [广汽集团×火山引擎：出海合规助力企业新增长](/post/id/311498)

  2025-08-26 10:17:09
* ##### [从技术到安全：中科固源拆解车载以太网的演进路径与防护策略](/post/id/310094)

  2025-08-21 21:48:41
* ##### [智能体防御 | 一文了解3种系统提示词加固方法](/post/id/311279)

  2025-08-18 16:34:50

### 热门推荐

文章目录

![](https://p0.qhimg.com/t11098f6bcd5614af4bf21ef9b5.png)

安全KER

* [关于我们](/about)
* [联系我们](/note/contact)
* [用户协议](/note/protocol)
* [隐私协议](/note/privacy)

商务合作

* [合作内容](/note/business)
* [联系方式](/note/contact)
* [友情链接](/link)

内容需知

* [投稿须知](https://www.anquanke.com/contribute/tips)
* [转载须知](/note/repost)
* 官网QQ群：568681302

合作单位

* [![安全KER](https://p0.ssl.qhimg.com/t01592a959354157bc0.png)](http://www.cert.org.cn/)
* [![安全KER](https://p0.ssl.qhimg.com/t014f76fcea94035e47.png)](http://www.cnnvd.org.cn/)

Copyright © 北京奇虎科技有限公司 三六零数字安全科技集团有限公司 安全KER All Rights Reserved [京ICP备08010314号-66](https://beian.miit.gov.cn/)[![](https://icon.cnzz.com/img/pic.gif)](https://www.cnzz.com/stat/website.php?web_id=1271278035 "站长统计")

微信二维码

**X**![安全KER](https://p0.ssl.qhimg.com/t0151209205b47f2270.jpg)