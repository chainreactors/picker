---
title: MySQL自治平台建设的内核原理及实践（下）
url: https://tech.meituan.com/2023/07/06/meituan-mysql-autonomous-platform-02.html
source: 美团技术团队
date: 2023-07-07
fetch_date: 2025-10-04T11:52:54.655472
---

# MySQL自治平台建设的内核原理及实践（下）

[莽戮聨氓聸垄忙聤聙忙聹炉氓聸垄茅聵聼](https://tech.meituan.com/ "莽戮聨氓聸垄忙聤聙忙聹炉氓聸垄茅聵聼")

* [忙聹聙忙聳掳忙聳聡莽芦聽](https://tech.meituan.com/ "忙聼楼莽聹聥忙聹聙忙聳掳忙聳聡莽芦聽")
* [忙聳聡莽芦聽氓颅聵忙隆拢](/archives "忙聼楼莽聹聥忙聳聡莽芦聽氓颅聵忙隆拢氓聠聟氓庐鹿")
* [忙聤聙忙聹炉忙虏聶茅戮聶](/tech-salon "盲潞聠猫搂拢忙聤聙忙聹炉忙虏聶茅戮聶")
* [氓聟鲁盲潞聨忙聢聭盲禄卢](/about "盲潞聠猫搂拢忙聸麓氓陇職氓聟鲁盲潞聨忙聢聭盲禄卢莽職聞盲潞聥忙聝聟")

脗漏 2023 莽戮聨氓聸垄忙聤聙忙聹炉氓聸垄茅聵聼

All rights reserved.

# [MySQL猫聡陋忙虏禄氓鹿鲁氓聫掳氓禄潞猫庐戮莽職聞氓聠聟忙聽赂氓聨聼莽聬聠氓聫聤氓庐聻猫路碌茂录聢盲赂聥茂录聣](https://tech.meituan.com/2023/07/06/meituan-mysql-autonomous-platform-02.html)

2023氓鹿麓07忙聹聢06忙聴楼
盲陆聹猫聙聟: 猫拢聲茅聰聥
[忙聳聡莽芦聽茅聯戮忙聨楼](https://tech.meituan.com/2023/07/06/meituan-mysql-autonomous-platform-02.html)
7054氓颅聴
15氓聢聠茅聮聼茅聵聟猫炉禄

| **B莽芦聶猫搂聠茅垄聭**茂录職[莽戮聨氓聸垄忙聲掳忙聧庐氓潞聯猫聡陋忙虏禄忙聹聧氓聤隆氓鹿鲁氓聫掳氓禄潞猫庐戮](https://www.bilibili.com/video/BV1Uo4y1r7kp/?spm_id_from=333.999.0.0)

## 0 氓聣聧忙聳聡氓聸聻茅隆戮

氓聹篓茫聙聤[MySQL猫聡陋忙虏禄氓鹿鲁氓聫掳氓禄潞猫庐戮莽職聞氓聠聟忙聽赂氓聨聼莽聬聠氓聫聤氓庐聻猫路碌茂录聢盲赂聤茂录聣](https://tech.meituan.com/2023/07/06/meituan-mysql-autonomous-platform-01.html)茫聙聥盲赂聙忙聳聡盲赂颅茂录聦忙聢聭盲禄卢盲赂禄猫娄聛盲禄聥莽禄聧盲潞聠忙聲掳忙聧庐氓潞聯莽職聞氓录聜氓赂赂氓聫聭莽聨掳盲赂聨猫炉聤忙聳颅忙聳鹿茅聺垄莽職聞氓聠聟氓庐鹿茂录聦氓聹篓猫炉聤忙聳颅忙聳鹿茅聺垄莽禄聫氓赂赂盲录職莽垄掳氓聢掳盲赂聙盲潞聸茅職戮盲禄楼忙聣戮氓聡潞忙聽鹿氓聸聽莽職聞Case茫聙聜茅聮聢氓炉鹿猫驴聶盲潞聸莽聳聭茅職戮忙聺聜莽聴聡Case茂录聦茅聙職猫驴聡忙聹卢莽炉聡氓聫炉盲禄楼盲潞聠猫搂拢氓聢掳茂录聦氓娄聜盲陆聲茅聙職猫驴聡氓聠聟忙聽赂氓聫炉猫搂聜忙碌聥忙聙搂盲禄楼氓聫聤氓聟篓茅聡聫SQL忙聺楼猫搂拢氓聠鲁猫驴聶盲潞聸茅聴庐茅垄聵茫聙聜茅聶陇忙颅陇盲鹿聥氓陇聳茂录聦氓聹篓氓戮聴氓聡潞忙聽鹿氓聸聽氓聬聨茂录聦氓娄聜盲陆聲氓陇聞莽聬聠氓录聜氓赂赂茂录聦氓娄聜盲陆聲氓炉鹿SQL猫驴聸猫隆聦盲录聵氓聦聳茂录聦盲禄楼氓聫聤氓娄聜盲陆聲猫驴聸猫隆聦SQL忙虏禄莽聬聠莽颅聣莽聸赂氓聟鲁忙聳鹿茅聺垄茅聴庐茅垄聵茂录聦盲鹿聼氓掳聠氓聹篓忙聹卢莽炉聡盲赂颅莽禄聶盲潞聢猫搂拢莽颅聰茫聙聜

## 1 氓聠聟忙聽赂氓聫炉猫搂聜忙碌聥忙聙搂氓禄潞猫庐戮

### 1.1 氓聠聟忙聽赂氓聫炉猫搂聜忙碌聥忙聙搂氓禄潞猫庐戮

#### 1.1.1 忙聙搂猫聝陆猫炉聤忙聳颅忙聦聭忙聢聵

氓聹篓猫聡陋忙虏禄忙聙搂猫聝陆猫炉聤忙聳颅氓鹿鲁氓聫掳莽職聞氓禄潞猫庐戮猫驴聡莽篓聥盲赂颅茂录聦忙聢聭盲禄卢氓聫聭莽聨掳氓娄聜盲赂聥盲赂陇氓陇搂忙聦聭忙聢聵茂录職

1. 氓戮聢氓陇職SQL忙聙搂猫聝陆忙聤聳氓聤篓莽職聞茅聴庐茅垄聵忙聣戮盲赂聧氓聡潞忙聽鹿氓聸聽茂录聦忙炉聰氓娄聜SQL莽職聞忙聣搂猫隆聦忙聴露茅聲驴猫聨芦氓聬聧氓聟露氓娄聶莽職聞莽陋聛莽聞露氓聫聵氓陇搂茂录聦氓聟露忙聣搂猫隆聦猫庐隆氓聢聮猫聣炉氓楼陆茫聙聛忙聣芦忙聫聫猫路聼猫驴聰氓聸聻莽職聞猫隆聦忙聲掳茅聝陆氓戮聢氓掳聭茂录聦盲鹿聼忙虏隆忙聹聣猫隆聦茅聰聛茫聙聛MDL茅聰聛莽聸赂氓聟鲁茅聰聛茅聵禄氓隆聻茂录聸忙聼楼莽聹聥忙聟垄忙聼楼猫炉垄忙聴楼氓驴聴茂录聦盲鹿聼忙虏隆忙聹聣氓聯陋盲赂陋氓颅聴忙庐碌莽職聞猫聙聴忙聴露忙炉聰猫戮聝茅芦聵茂录聦盲陆聠忙聵炉SQL莽職聞忙聣搂猫隆聦忙聴露茅聲驴氓掳卤忙聵炉莽陋聛莽聞露氓聫聵茅聲驴茂录聦忙聹聣忙聴露氓聙聶猫戮戮氓聢掳氓聡聽氓聧聛莽搂聮茅聲驴茂录聦猫聙聦氓鹿鲁忙聴露氓戮聙氓戮聙忙聵炉氓聡聽忙炉芦莽搂聮茂录聦氓聬聞莽搂聧氓聢聠忙聻聬氓聬聨忙聣戮盲赂聧氓聡潞氓聨聼氓聸聽茫聙聜
2. 忙聹聣忙聴露氓聙聶氓聹篓猫炉聤忙聳颅盲赂聙盲潞聸忙聦聡忙聽聡氓录聜氓赂赂莽職聞忙聽鹿氓聸聽忙聴露茂录聦氓聡颅氓聙聼莽職聞忙聵炉盲赂聧氓陇陋盲赂楼忙聽录莽職聞莽禄聫茅陋聦茂录聦猫聙聦盲赂聧忙聵炉茅聡聫氓聦聳氓聢聠忙聻聬茂录聦忙炉聰氓娄聜thread\_running忙聢聳猫聙聟slow\_queries氓聙录莽陋聛莽聞露氓聧聡茅芦聵莽職聞忙聴露氓聙聶茂录聦氓聫炉猫聝陆盲录職茅聙職猫驴聡猫隆篓information\_schema.processlist忙聼楼莽聹聥氓陆聯氓聣聧莽職聞忙麓禄猫路聝盲录職猫炉聺盲赂颅莽潞驴莽篓聥莽職聞莽聤露忙聙聛茂录聦莽聹聥盲赂聙盲赂聥莽聤露忙聙聛忙聵炉盲赂聧忙聵炉忙聹聣猫隆聦茅聰聛忙聢聳猫聙聟MDL茅聰聛盲鹿聥莽卤禄莽職聞茅聵禄氓隆聻茂录聦忙聢聳猫聙聟茅聙職猫驴聡忙聟垄忙聼楼猫炉垄忙聴楼氓驴聴茅聡聦莽職聞莽聸赂氓聟鲁忙聲掳忙聧庐忙聺楼猫炉聤忙聳颅忙聽鹿氓聸聽茫聙聜猫驴聶茅聡聦莽職聞忙聦聭忙聢聵忙聵炉茂录職忙聢聭盲禄卢莽聹聥氓聢掳莽職聞忙聵炉忙聲麓盲赂陋SQL忙聼聬盲赂陋忙聴露茅聴麓莽聜鹿莽職聞莽聻卢忙聴露莽聤露忙聙聛茂录聦忙聢聳猫聙聟氓聫陋忙聵炉忙聲麓盲赂陋SQL忙聣搂猫隆聦猫驴聡莽篓聥盲赂颅莽職聞茅聝篓氓聢聠忙聲掳忙聧庐茂录聦猫聙聦盲赂聧忙聵炉忙聲麓盲陆聯莽職聞忙聲掳忙聧庐茂录聦忙聣聙盲禄楼氓戮聴氓聡潞莽職聞忙聽鹿氓聸聽猫炉聤忙聳颅氓聫炉猫聝陆忙聵炉莽聣聡茅聺垄莽職聞茂录聦盲鹿聼猫庐赂盲赂聙莽聻卢茅聴麓莽聹聥氓聢掳莽職聞忙聵炉猫隆聦茅聰聛茂录聦盲陆聠忙聵炉氓陇搂茅聝篓氓聢聠忙聴露茅聴麓猫垄芦MDL茅聰聛茅聵禄氓隆聻茫聙聜

#### 1.1.2 猫搂拢氓聠鲁忙聙聺猫路炉

氓娄聜忙聻聹盲陆驴莽聰篓莽職聞忙聵炉莽陇戮氓聦潞莽聣聢忙聹卢莽職聞MySQL茂录聦氓聼潞忙聹卢盲赂聤茅聝陆盲录職茅聺垄盲赂麓盲赂聤茅聺垄盲赂陇氓陇搂茅聴庐茅垄聵茫聙聜忙聢聭盲禄卢氓聟聢盲禄聨氓聠聟忙聽赂莽職聞猫搂聮氓潞娄氓聢聠忙聻聬盲赂聙盲赂聥猫驴聶盲赂陇盲赂陋忙聦聭忙聢聵茂录聦氓炉鹿盲潞聨莽卢卢盲赂聙盲赂陋忙聦聭忙聢聵茂录聦盲赂禄猫娄聛忙聵炉氓炉鹿MySQL氓聹篓氓聠聟忙聽赂氓卤聜茅聺垄忙聣搂猫隆聦莽禄聠猫聤聜盲赂聧氓陇聼盲潞聠猫搂拢茂录聦忙炉聰氓娄聜盲赂聙忙聺隆SQL忙聣搂猫隆聦盲潞聠10s茂录聦猫聙聦盲禄聨氓聠聟忙聽赂氓卤聜茅聺垄忙聺楼莽聹聥莽職聞猫炉聺茂录聦猫驴聶氓聧聛莽搂聮莽職聞忙聴露茅聴麓氓聫炉猫聝陆盲录職忙聹聣氓聡聽莽聶戮盲赂陋忙颅楼茅陋陇莽禄聞忙聢聬茂录聦忙拢聙忙聼楼氓聬聨氓聫炉猫聝陆氓聫聭莽聨掳row忙聢聳猫聙聟MDL茅聰聛莽颅聣氓戮聟忙聴露茅聴麓氓聤聽猫碌路忙聺楼氓聫陋忙聹聣1莽搂聮茂录聦茅聜拢盲鹿聢氓聟露盲禄聳莽職聞9莽搂聮莽職聞猫聙聴忙聴露氓聹篓氓聯陋茅聡聦氓聭垄茂录聼氓聫炉猫聝陆氓聫聭莽聰聼氓聹篓猫驴聶氓聡聽莽聶戮盲赂陋忙颅楼茅陋陇盲赂颅莽職聞盲禄禄盲陆聲盲赂聙盲赂陋忙聢聳猫聙聟氓陇職盲赂陋茂录聦忙聣聙盲禄楼氓娄聜忙聻聹忙虏隆忙聹聣猫驴聶氓聡聽莽聶戮盲赂陋忙颅楼茅陋陇莽職聞忙聵聨莽禄聠忙聲掳忙聧庐茂录聦氓掳卤忙聴聽忙鲁聲猫炉聤忙聳颅氓聡潞莽陋聛莽聞露氓聡潞莽聨掳莽職聞忙聙搂猫聝陆茅聴庐茅垄聵莽職聞忙聽鹿氓聸聽茫聙聜

莽卢卢盲潞聦盲赂陋茅聴庐茅垄聵猫路聼莽卢卢盲赂聙盲赂陋茅聴庐茅垄聵盲禄聨忙聹卢猫麓篓盲赂聤忙聺楼猫炉麓忙聵炉盲赂聙忙聽路莽職聞茫聙聜莽聰卤盲潞聨茅聡聡茅聸聠莽職聞忙聲掳忙聧庐忙聵炉忙聼聬盲赂陋忙聴露茅聴麓莽聜鹿莽職聞氓驴芦莽聟搂忙聲掳忙聧庐茂录聢茅聙職猫驴聡忙麓禄猫路聝盲录職猫炉聺茂录聣茂录聦忙聢聳猫聙聟氓聫陋忙聵炉茅聝篓氓聢聠忙聦聡忙聽聡莽職聞忙聲掳忙聧庐茂录聢茅聙職猫驴聡忙聟垄忙聼楼猫炉垄忙聴楼氓驴聴茂录聣茂录聦忙聣聙盲禄楼忙聢聭盲禄卢莽聹聥氓聢掳莽職聞氓聫陋忙聵炉莽聣聡茅聺垄莽職聞盲驴隆忙聛炉茂录聦猫聙聦忙虏隆忙聹聣氓聤聻忙鲁聲猫聨路氓聫聳氓聢掳忙聲麓盲赂陋SQL莽職聞氓庐聦忙聲麓莽職聞猫聙聴忙聴露氓聢聠氓赂聝盲驴隆忙聛炉茫聙聜

#### 1.1.3 Wait猫聙聴忙聴露茅聡聫氓聦聳氓聢聠忙聻聬忙鲁聲

氓聹篓氓聢聠忙聻聬氓庐聦氓聨聼氓聸聽盲鹿聥氓聬聨茂录聦忙聢聭盲禄卢氓聫聜猫聙聝盲潞聠[TSA](https://www.brendangregg.com/tsamethod.html)莽職聞忙聙聺忙聝鲁茂录聦氓聬聦忙聴露莽禄聯氓聬聢MySQL猫聡陋猫潞芦莽職聞莽聣鹿莽聜鹿忙聺楼氓聛職氓聼潞盲潞聨Wait莽職聞氓聠聟忙聽赂氓聫炉猫搂聜忙碌聥忙聙搂莽職聞氓禄潞猫庐戮茫聙聜盲禄聨TSA氓聫炉盲禄楼莽聹聥氓聡潞茂录聦SQL忙聣搂猫隆聦莽職聞忙聙禄猫聙聴忙聴露忙聴聽茅聺聻氓掳卤忙聵炉莽聰卤Off-CPU猫路聼ON-CPU盲赂陇氓陇搂茅聝篓氓聢聠莽禄聞忙聢聬茂录聦氓娄聜忙聻聹SQL忙聹聣猫聙聴忙聴露茅聲驴莽職聞茅聴庐茅垄聵茂录聦茅娄聳氓聟聢猫娄聛莽隆庐猫庐陇忙聵炉氓聹篓OnCPU猫驴聵忙聵炉氓聹篓OffCPU盲赂聤猫聙聴忙聴露氓陇職茫聙聜氓娄聜忙聻聹忙聵炉氓聣聧猫聙聟茂录聦茅聜拢盲鹿聢猫炉麓忙聵聨SQL忙聹卢猫潞芦忙聹聣茅聴庐茅垄聵茂录聦忙炉聰氓娄聜忙露聢猫聙聴猫碌聞忙潞聬氓陇陋氓陇職茂录聢忙炉聰氓娄聜忙聴聽忙聲聢莽麓垄氓录聲茅聙聽忙聢聬忙聣芦忙聫聫猫隆聦忙聲掳猫驴聡氓陇職茂录聣茂录聸氓娄聜忙聻聹忙聵炉氓聬聨猫聙聟茂录聦茅聜拢盲鹿聢猫炉麓忙聵聨SQL忙聹卢猫潞芦忙虏隆忙聹聣茅聴庐茅垄聵茂录聦猫聙聦忙聵炉氓聫聴氓聢掳氓鹿虏忙聣掳忙聢聳猫聙聟莽鲁禄莽禄聼猫碌聞忙潞聬盲赂聧猫露鲁茂录聦猫驴聸猫聙聦茅聙聽忙聢聬OffCPU氓卤聜茅聺垄猫聙聴忙聴露猫驴聡氓陇職茫聙聜

忙聴聽猫庐潞忙聵炉盲陆聲莽搂聧忙聝聟氓聠碌茂录聦忙聢聭盲禄卢茅聝陆茅聹聙猫娄聛忙聤聤OnCPU猫路聼OffCPU莽職聞猫聙聴忙聴露氓聛職猫驴聸盲赂聙忙颅楼莽職聞忙聥聠氓聢聠茂录聦盲禄聨猫聙聦忙聺楼忙聼楼莽聹聥猫聙聴忙聴露莽聯露茅垄聢莽聜鹿氓聢掳氓潞聲氓聹篓氓聯陋茅聡聦茂录聦氓鹿露盲赂聰氓炉鹿猫聙聴忙聴露忙炉聰猫戮聝氓陇職莽職聞氓聟鲁茅聰庐盲禄拢莽聽聛猫路炉氓戮聞盲潞陇莽聰卤氓聠聟忙聽赂氓聸垄茅聵聼忙聺楼猫驴聸猫隆聦氓聼聥莽聜鹿茂录聸莽聸赂氓炉鹿MySQL performance\_schema氓潞聯盲赂颅莽禄聼猫庐隆莽職聞Wait盲驴隆忙聛炉茂录聦氓庐聻莽聨掳茅聺聻氓赂赂猫陆禄茅聡聫茂录聦忙聣聙盲禄楼氓炉鹿忙聙禄盲陆聯莽職聞忙聙搂猫聝陆莽職聞氓陆卤氓聯聧氓戮聢氓掳聫茂录聦氓鹿露盲赂聰猫聙聴忙聴露忙聦聡忙聽聡茅聝陆忙聵炉SQL忙聵聨莽禄聠莽虏聮氓潞娄莽職聞茂录聦猫聙聦盲赂聧忙聵炉莽卤禄盲录录performance\_schema盲赂颅莽職聞SQL忙篓隆莽聣聢莽潞搂氓聢芦莽職聞猫聛職氓聬聢忙聲掳忙聧庐茫聙聜

**猫聙聴忙聴露氓聹篓OnCPU**

氓聹篓氓聢聠忙聻聬盲赂聙忙聺隆SQL忙聣搂猫隆聦猫聙聴忙聴露茂录聦氓娄聜忙聻聹氓聫聭莽聨掳氓聝聫盲赂聥氓聸戮盲赂聙忙聽路茂录聦猫聙聴忙聴露氓聢聠氓赂聝氓陇搂茅聝篓氓聢聠茅聝陆氓聹篓OnCPU茂录聦猫驴聶猫炉麓忙聵聨SQL忙聹卢猫潞芦忙聹聣盲赂楼茅聡聧莽職聞忙聙搂猫聝陆茅聴庐茅垄聵茂录聢氓聟篓猫隆篓忙聣芦忙聫聫茫聙聛猫驴聡忙禄陇忙聲聢忙聻聹盲赂聧盲陆鲁忙聢聳猫聙聟忙聼楼猫炉垄盲录聵氓聦聳氓聶篓莽職聞bug莽颅聣氓聨聼氓聸聽茂录聣茂录聦忙聢聭盲禄卢氓聫炉盲禄楼忙聤聤猫炉聤忙聳颅莽職聞忙聳鹿氓聬聭茅聸聠盲赂颅氓聹篓氓娄聜盲陆聲盲录聵氓聦聳SQL忙聹卢猫潞芦氓掳卤氓聫炉盲禄楼盲潞聠茂录聦猫聙聦盲赂聧茅聹聙猫娄聛氓聨禄氓聟鲁忙鲁篓氓聟露盲禄聳莽職聞忙聳鹿茅聺垄茂录聦氓娄聜茅聰聛茅聵禄氓隆聻茫聙聛莽拢聛莽聸聵忙聢聳猫聙聟莽陆聭莽禄聹氓禄露猫驴聼莽颅聣OffCPU忙聳鹿茅聺垄莽職聞茅聴庐茅垄聵茫聙聜茅聙職猫驴聡盲陆驴莽聰篓[getrusage](https://linux.die.net/man/2/getrusage)忙聳鹿忙鲁聲忙聺楼猫聨路氓聫聳忙聼聬忙聺隆SQL莽職聞OnCPU猫聙聴忙聴露忙聴露茅聲驴茂录聦忙炉聰氓娄聜氓聹篓SQL忙聣搂猫隆聦氓聣聧茂录聦猫聨路氓聫聳氓陆聯氓聣聧莽潞驴莽篓聥莽職聞ru\_utime茫聙聛ru\_stime忙聴露茅聴麓茂录聦莽聞露氓聬聨氓聹篓SQL忙聣搂猫隆聦氓庐聦忙炉聲忙聴露氓聠聧忙卢隆猫聨路氓聫聳ru\_utime茫聙聛ru\_stime氓聙录茂录聦氓掳卤氓聫炉盲禄楼氓戮聴氓聢掳SQL忙聣搂猫隆聦莽職聞CPU Time茫聙聜

![](https://p0.meituan.net/travelcube/4bfaddd26acc3575b7a426b698d7ed21124117.png)

**猫聙聴忙聴露氓聹篓OffCPU**

氓娄聜忙聻聹氓聫聭莽聨掳OnCPU莽職聞猫聙聴忙聴露氓聧聽忙聙禄猫聙聴忙聴露莽職聞忙炉聰莽聨聡忙炉聰猫戮聝盲陆聨茂录聦茅聙職猫驴聡OffCPU莽職聞莽聸赂氓聟鲁忙聦聡忙聽聡氓聫聭莽聨掳氓聟露氓聧聽忙聙禄猫聙聴忙聴露莽職聞忙炉聰莽聨聡忙炉聰猫戮聝茅芦聵茂录聦猫炉麓忙聵聨SQL忙聹卢猫潞芦忙虏隆忙聹聣茅聴庐茅垄聵茂录聦氓聫炉猫聝陆忙聵炉猫垄芦茅聰聛盲陆聫盲潞聠茫聙聛莽隆卢盲禄露猫碌聞忙潞聬盲赂聧猫露鲁忙聢聳猫聙聟忙聵炉猫垄芦氓聠聟忙聽赂氓卤聜茅聺垄忙聼聬盲赂陋氓聠聟忙聽赂茅聰聛莽禄聶氓聧隆盲陆聫盲潞聠茫聙聜忙聢聭盲禄卢氓掳卤茅聹聙猫娄聛忙聼楼莽聹聥氓聢掳氓潞聲忙聵炉OffCPU莽聸赂氓聟鲁莽職聞氓聯陋盲赂陋茂录聦忙聢聳猫聙聟氓聯陋盲潞聸忙聦聡忙聽聡猫聙聴忙聴露忙炉聰猫戮聝茅芦聵茂录聦茅聹聙猫娄聛氓聹篓氓聠聟忙聽赂氓卤聜茅聺垄氓炉鹿忙聣搂猫隆聦猫驴聡莽篓聥盲赂颅莽職聞氓聫炉猫聝陆莽職聞茫聙聛猫聙聴忙聴露忙炉聰猫戮聝茅聲驴莽職聞忙聣搂猫隆聦盲禄拢莽聽聛猫路炉氓戮聞猫驴聸猫隆聦氓聼聥莽聜鹿茂录聦氓聫陋忙聹聣猫聨路氓聫聳氓聢掳盲潞聠猫路聼忙聙搂猫聝陆莽聸赂氓聟鲁莽職聞氓聟鲁茅聰庐莽職聞忙聲掳忙聧庐茂录聦忙聣聧猫聝陆氓聛職氓聡潞氓聡聠莽隆庐莽職聞氓聢陇忙聳颅茫聙聜

![](https://p0.meituan.net/travelcube/fce11215a56cf68e64934dac98cb6b8f167526.png)

氓娄聜盲陆聲茅聙聣忙聥漏氓聬聢茅聙聜猫聙聦氓聟篓茅聺垄莽職聞OffCPU莽聸赂氓聟鲁莽職聞盲禄拢莽聽聛猫路炉氓戮聞猫驴聸猫隆聦氓聼聥莽聜鹿茂录聼莽禄聫猫驴聡忙聨垄莽麓垄茂录聦猫驴聶茅聡聦忙聫聬盲戮聸盲潞聠氓娄聜盲赂聥氓聡聽盲赂陋忙聳鹿氓录聫茂录職

1. 氓聢聠忙聻聬setup\_instruments猫隆篓盲赂颅氓聦聟氓聬芦莽職聞氓聟鲁茅聰庐氓聼聥莽聜鹿盲驴隆忙聛炉茂录聦氓陇搂猫聡麓莽聼楼茅聛聯忙聹聣氓聯陋盲潞聸氓聟鲁茅聰庐莽職聞忙聦聡忙聽聡氓聫炉盲禄楼氓聼聥莽聜鹿茂录聦忙炉聰氓娄聜wait/IO茫聙聛Mutex莽卤禄莽颅聣茂录聦氓聠聧莽禄聯氓聬聢猫聡陋猫潞芦莽職聞莽禄聫茅陋聦忙聺楼氓聢陇忙聳颅氓聯陋盲潞聸忙聦聡忙聽聡氓聫炉猫聝陆忙聹聣忙聙搂猫聝陆莽聯露茅垄聢莽職聞茅聴庐茅垄聵茫聙聜
2. 忙聽鹿忙聧庐氓庐聻茅聶聟莽聳聭茅職戮case忙聺楼氓聢陇忙聳颅茅聙聣忙聥漏氓聯陋盲潞聸Wait忙聦聡忙聽聡茂录聦忙炉聰氓娄聜莽聹聥氓聢掳”Thread xxx has waited at trx0trx.cc line 1193 for 241.00 seconds the semaphore: xxxxx mutex REDO\_RSEG created trx0rseg.cc:211, lock var 1”茂录聦氓聢聶氓炉鹿mutex REDO\_RSEG猫驴聸猫隆聦氓聼聥莽聜鹿茂录聦莽聹聥氓聢掳”Thread xxx has waited at dict0dict.cc line 1239 for 245.00 seconds the semaphore: xxxxxx Mutex DICT\_SYS created dict0dict.cc:1173, lock var 1”氓聢聶氓炉鹿 Mutex DICT\_SYS猫驴聸猫隆聦氓聼聥莽聜鹿茫聙聜
3. 忙潞聬莽聽聛氓聢聠忙聻聬茂录聦氓聹篓氓聠聟忙聽赂氓卤聜茅聺垄氓炉鹿SQL莽職聞忙聣搂猫隆聦猫驴聡莽篓聥猫驴聸猫隆聦茅聙聬忙颅楼莽職聞Debug茂录聦忙聽鹿忙聧庐莽禄聫茅陋聦氓聢聠忙聻聬氓聫炉猫聝陆莽職聞莽聯露茅垄聢莽聜鹿忙聺楼氓聼聥莽聜鹿茂录聸盲赂聥茅聺垄盲赂戮盲赂陇盲赂陋盲戮聥氓颅聬氓聢聠氓聢芦氓掳卤莽潞炉忙潞聬莽聽聛莽職聞猫搂聮氓潞娄忙聺楼氓聢聠忙聻聬茂录聦SQL氓聹篓猫炉禄茫聙聛氓聠聶猫驴聡莽篓聥盲赂颅氓聯陋盲潞聸氓聹掳忙聳鹿氓聫炉猫聝陆盲录職茅聙聽忙聢聬忙聙搂猫聝陆忙聤聳氓聤篓氓鹿露氓聛職氓聼聥莽聜鹿茫聙聜

盲戮聥氓颅聬1茂录聦氓聹篓SQL猫炉禄忙聯聧盲陆聹莽職聞忙聣搂猫隆聦猫驴聡莽篓聥盲赂颅茂录聦茅聹聙猫娄聛盲禄聨buffer pool盲赂颅猫炉路忙卤聜氓聠聟氓颅聵猫碌聞忙潞聬茂录聦氓娄聜忙聻聹盲赂聙莽聸麓忙禄隆猫露鲁盲赂聧盲潞聠氓聠聟氓颅聵猫碌聞忙潞聬莽職聞猫炉路忙卤聜氓聢聶盲赂聙莽聸麓盲录職氓戮陋莽聨炉氓掳聺猫炉聲猫聨路氓聫聳茂录聦氓娄聜忙聻聹氓聹篓2000ms氓聠聟猫驴聵忙聵炉忙虏隆忙聹聣盲禄聨Buffer pool盲赂颅猫炉路忙卤聜氓聢掳茅聹聙猫娄聛莽職聞氓聠聟氓颅聵茂录聦盲录職忙聣聯氓聧掳忙聴楼氓驴聴芒聙聹Difficult to find free blocks in the buffer pool……芒聙聺茂录聦忙聺楼猫隆篓忙聵聨氓聠聟氓颅聵氓戮聢莽麓搂氓录聽茂录聸猫驴聶莽搂聧茅聲驴忙聴露茅聴麓莽颅聣氓戮聟氓聠聟氓颅聵猫碌聞忙潞聬莽職聞猫聨路氓聫聳盲录職莽聰聼盲潞搂盲潞聠忙聙搂猫聝陆忙聤聳氓聤篓茂录聦猫驴聶盲赂陋忙聴露氓聙聶氓掳卤茅聹聙猫娄聛氓聹篓氓炉鹿氓潞聰莽職聞氓聠聟忙聽赂盲禄拢莽聽聛氓陇聞猫驴聸猫隆聦氓聼聥莽聜鹿猫聨路氓聫聳BP氓聠聟氓颅聵猫碌聞忙潞聬莽颅聣氓戮聟忙聴露茅聴麓茫聙聜

![](https://p0.meituan.net/travelcube/5e313a72799a4850780a065f0f3b2ff4351085.png)

盲戮聥氓颅聬2茂录聦氓聹篓SQL氓聠聶忙聯聧盲陆聹莽職聞忙聣搂猫隆聦猫驴聡莽篓聥盲赂颅忙聵炉茅聹聙猫娄聛氓聠聶redo log莽職聞茂录聦氓娄聜忙聻聹redo log莽漏潞茅聴麓盲赂聧氓陇聼茂录聦氓聢聶茅聹聙猫娄聛氓聢路莽聸聵redo log猫路聼BP盲赂颅莽職聞猫聞聫茅隆碌茂录聦猫...