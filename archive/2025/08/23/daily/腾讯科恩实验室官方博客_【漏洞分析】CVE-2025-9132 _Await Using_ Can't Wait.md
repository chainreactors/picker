---
title: 【漏洞分析】CVE-2025-9132 "Await Using" Can't Wait
url: https://keenlab.tencent.com/zh/2025/08/22/2025-CVE-2025-9132/
source: 腾讯科恩实验室官方博客
date: 2025-08-23
fetch_date: 2025-10-07T00:47:38.982390
---

# 【漏洞分析】CVE-2025-9132 "Await Using" Can't Wait

# ![](/keenteam.png)

# [猫聟戮猫庐炉莽搂聭忙聛漏氓庐聻茅陋聦氓庐陇氓庐聵忙聳鹿氓聧職氓庐垄](/zh/)

[盲赂禄茅隆碌](/zh/)
[氓聟鲁盲潞聨忙聢聭盲禄卢](/zh/about/)
[English](/zh/../en/)



[2025-08-22](/zh/2025/08/22/2025-CVE-2025-9132/)

# 茫聙聬忙录聫忙麓聻氓聢聠忙聻聬茫聙聭CVE-2025-9132 "Await Using" Can't Wait

by 莽搂聭忙聛漏DF氓掳聫茅聵聼

![](/zh/img/2025-CVE-2025-9132/cve-2025-9132.png)

忙聴垄莽聞露猫驴聶忙聵炉Project Zero莽職聞BigSleep氓聫聭莽聨掳莽職聞莽卢卢盲赂聙盲赂陋V8忙录聫忙麓聻茂录聦Buff猫驴聶盲鹿聢氓陇職茂录聦茅聜拢氓掳卤氓戮聢茅職戮盲赂聧忙聺楼盲赂聙莽陋楼莽漏露莽芦聼盲潞聠茫聙聜

![](/zh/img/2025-CVE-2025-9132/sael.png)

## 猫聝聦忙聶炉

8忙聹聢19忙聴楼莽職聞 Google Chrome 忙聸麓忙聳掳盲驴庐氓陇聧盲潞聠盲赂聙盲赂陋莽聰卤 Google Big Sleep 氓聫聭莽聨掳莽職聞忙录聫忙麓聻茫聙聜

[Chrome Releases: Stable Channel Update for Desktop](https://chromereleases.googleblog.com/2025/08/stable-channel-update-for-desktop_19.html)

[[436181695](https://issues.chromium.org/issues/436181695)] **High** CVE-2025-9132: Out of bounds write in V8. *Reported by Google Big Sleep on 2025-08-04*

茅聙職猫驴聡氓聢聠忙聻聬猫隆楼盲赂聛茂录聦忙聢聭盲禄卢忙聢聬氓聤聼氓庐聻莽聨掳盲潞聠 CVE-2025-9132 莽職聞氓聢漏莽聰篓茫聙聜盲禄楼盲赂聥忙聣聙忙聹聣氓聢聠忙聻聬氓聮聦氓聢漏莽聰篓茅聝陆氓聼潞盲潞聨 v8 13.9.205.19茂录聦commit 505ec917b67c535519bebec58c62a34f145dd49f茂录聦氓聧鲁 v8 13.9 氓聢聠忙聰炉盲赂颅忙录聫忙麓聻盲驴庐氓陇聧氓聣聧莽職聞 commit茫聙聜

CVE-2025-9132 莽職聞猫隆楼盲赂聛氓聮聦猫隆楼盲赂聛盲赂颅茅聶聞氓赂娄莽職聞 PoC 氓娄聜盲赂聥茫聙聜

|  |  |
| --- | --- |
| ``` 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 ``` | ``` diff --git a/src/parsing/parser.cc b/src/parsing/parser.cc index 26249aff4bb..7b5b2458b77 100644 --- a/src/parsing/parser.cc +++ b/src/parsing/parser.cc @@ -2408,7 +2408,10 @@ Statement* Parser::DesugarLexicalBindingsInForStatement(      //    make statement: let/const x = temp_x.      for (int i = 0; i < for_info.bound_names.length(); i++) {        VariableProxy* proxy = DeclareBoundVariable( -          for_info.bound_names[i], for_info.parsing_result.descriptor.mode, +          for_info.bound_names[i], +          for_info.parsing_result.descriptor.mode == VariableMode::kAwaitUsing +              ? VariableMode::kConst +              : for_info.parsing_result.descriptor.mode,            kNoSourcePosition);        inner_vars.Add(proxy->var());        VariableProxy* temp_proxy = factory()->NewVariableProxy(temps.at(i)); ``` |

|  |  |
| --- | --- |
| ``` 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 ``` | ``` // Copyright 2025 the V8 project authors. All rights reserved. // Use of this source code is governed by a BSD-style license that can be // found in the LICENSE file.  var v = [];  (async () => {   for (let i = 0; i < 6; ++i) {     v.push(i);     await 0;   } })();  async function TestCStyleForCountTicks() {   for (await using x = {          value: 42,          [Symbol.asyncDispose]() {            v.push(`asyncDispose`);          }  // One tick is expected after calling asyncDispose to allow it to be             // asynchronous. It will be called after exiting the for-loop.        };        x.value < 44; x.value++) {     // These pushes are expected to be synchronous.     v.push(x.value);   }   v.push(`afterForLoop`); }  async function RunTest() {   await TestCStyleForCountTicks();   assertArrayEquals([0, 42, 43, `asyncDispose`, 1, `afterForLoop`, 2], v); }  RunTest(); ``` |

盲陆驴莽聰篓 debug 莽聣聢忙聹卢莽職聞 d8 猫驴聬猫隆聦 PoC 盲录職氓聹篓 `BytecodeArrayWriter::BindJumpTableEntry` 盲赂颅猫搂娄氓聫聭 DCHECK `[1]`茫聙聜

|  |  |
| --- | --- |
| ``` 1 2 3 4 5 6 7 8 9 10 11 12 13 14 ``` | ``` void BytecodeArrayWriter::BindJumpTableEntry(BytecodeJumpTable* jump_table,                                              int case_value) {   DCHECK(!jump_table->is_bound(case_value));         // [1] crash here    size_t current_offset = bytecodes()->size();   size_t relative_jump = current_offset - jump_table->switch_bytecode_offset();    constant_array_builder()->SetJumpTableSmi(       jump_table->ConstantPoolEntryFor(case_value),       Smi::FromInt(static_cast<int>(relative_jump)));   jump_table->mark_bound(case_value);    StartBasicBlock(); } ``` |

## 氓聢聠忙聻聬

猫隆楼盲赂聛氓聮聦 PoC 茅聝陆忙聵戮莽陇潞忙录聫忙麓聻盲赂聨 `await using` 猫炉颅忙鲁聲忙聹聣氓聟鲁茫聙聜`await using` 忙聵炉 JavaScript 盲赂颅莽職聞忙聳掳莽聣鹿忙聙搂茫聙聜盲陆驴莽聰篓 `await using` 氓拢掳忙聵聨莽職聞氓聫聵茅聡聫莽娄禄氓录聙氓聟露盲陆聹莽聰篓氓聼聼忙聴露茂录聦氓庐聝莽職聞 `[asyncDispose]` 盲录職猫垄芦氓录聜忙颅楼猫掳聝莽聰篓茫聙聜

The **`await using`** declaration declares block-scoped local variables that are *asynchronously disposed*.

|  |  |
| --- | --- |
| ``` 1 2 3 4 5 6 7 8 9 10 ``` | ``` async function foo() {   {     await using x = {       [Symbol.asyncDispose]() {         console.log("asyncDispose");       }     };     // await x[Symbol.asyncDispose]();   } } ``` |

氓聹篓 v8 盲赂颅茂录聦氓娄聜忙聻聹 `async function` 盲赂颅忙聹聣 `await` 氓聟鲁茅聰庐氓颅聴茂录聦茅聜拢盲鹿聢氓聡陆忙聲掳莽職聞氓录聙氓陇麓盲录職忙聵炉盲赂聙盲赂陋 `SwitchOnGeneratorState` 氓颅聴猫聤聜莽聽聛茂录聦忙炉聫盲赂陋 `await` 盲录職盲潞搂莽聰聼盲赂聙氓炉鹿 `SuspendGenerator/ResumeGenerator` 氓颅聴猫聤聜莽聽聛茫聙聜`SuspendGenerator` 盲录職氓掳聠氓聡陆忙聲掳莽職聞氓陆聯氓聣聧莽聤露忙聙聛盲驴聺氓颅聵氓聢掳 `JSGeneratorObject` 氓炉鹿猫卤隆盲赂颅茂录聦莽聞露氓聬聨茅聙聙氓聡潞茫聙聜氓陆聯 `await` 氓庐聦忙聢聬茂录聦氓聡陆忙聲掳盲录職茅聡聧忙聳掳盲禄聨氓录聙氓陇麓莽職聞 `SwitchOnGeneratorState` 氓陇聞氓录聙氓搂聥忙聣搂猫隆聦茂录聦`SwitchOnGeneratorState` 盲录職忙聽鹿忙聧庐 `JSGeneratorObject` 盲禄聨氓炉鹿氓潞聰莽職聞 `ResumeGenerator` 氓陇聞忙聛垄氓陇聧忙聣搂猫隆聦茂录聦`ResumeGenerator` 盲录職盲禄聨 `JSGeneratorObject` 氓炉录氓聟楼氓聡陆忙聲掳莽聤露忙聙聛茫聙聜

`SwitchOnGeneratorState` 忙聹聣盲赂聙盲赂陋 JumpTable茂录聦莽聰篓盲潞聨茅聙聣忙聥漏盲禄聨氓聯陋盲赂聙盲赂陋 `ResumeGenerator` 忙聣搂猫隆聦茫聙聜v8 氓聟聢盲禄聨忙潞聬莽聽聛盲潞搂莽聰聼 AST茂录聦氓聠聧盲禄聨 AST 莽聰聼忙聢聬氓颅聴猫聤聜莽聽聛茫聙聜盲赂潞盲潞聠莽隆庐氓庐職 JumpTable 莽職聞氓陇搂氓掳聫茂录聦v8 氓聹篓 parse 忙潞聬莽聽聛忙聴露盲录職猫庐掳氓陆聲 `await`茫聙聛`await using`茫聙聛`yield` 莽颅聣氓聟鲁茅聰庐氓颅聴莽職聞盲赂陋忙聲掳茫聙聜盲戮聥氓娄聜 `ParserBase<Impl>::ParseVariableDeclarations` 莽卢卢盲赂聙忙卢隆氓聹篓盲赂聙盲赂陋盲陆聹莽聰篓氓聼聼盲赂颅茅聛聡氓聢掳 `await using` 忙聴露盲录職猫掳聝莽聰篓 `AddSuspend` 忙聺楼氓垄聻氓聤聽猫庐隆忙聲掳茫聙聜

|  |  |
| --- | --- |
| ``` 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 ``` | ```  template <typename Impl> void ParserBase<Impl>::ParseVariableDeclarations(     VariableDeclarationContext var_context,     DeclarationParsingResult* parsing_result,     ZonePtrList<const AstRawString>* names) {   // VariableDeclarations ::   //   ('var' | 'const' | 'let' | 'using' | 'await using') (Identifier ('='   //   AssignmentExpression)?)+[',']    DCHECK_NOT_NULL(parsing_result);   parsing_result->descriptor.kind = NORMAL_VARIABLE;   parsing_result->descriptor.declaration_pos = peek_position();   parsing_result->descriptor.initialization_pos = peek_position();    Scope* target_scope = scope();    switch (peek()) {       // ...     case Token::kAwait:       // CoverAwaitExpressionAndAwaitUsingDeclarationHead[?Yield] [no       // LineTerminator here] BindingList[?In, ?Yield, +Await, ~Pattern];       Consume(Token::kAwait);       DCHECK(v8_flags.js_explicit_resource_management);       DCHECK_NE(var_context, kStatement);       DCHECK(is_using_allowed());       DCHECK(is_await_allowed());       Consume(Token::kUsing);       DCHECK(!scanner()->HasLineTerminatorBeforeNext());       DCHECK(peek() != Token::kLeftBracket && peek() != Token::kLeftBrace);       impl()->CountUsage(v8::Isolate::kExplicitResourceManagement);       parsing_result->descriptor.mode = VariableMode::kAwaitUsing;       if (!target_scope->has_await_using_declaration()) {         function_state_->AddSuspend();                          // [1] AddSuspend()       }       break;     default:       UNREACHABLE();  // by current callers       break;   } ``` |

莽聰聼忙聢聬氓颅聴猫聤聜莽聽聛忙聴露茂录聦`BytecodeGenerator` 盲录職氓聟聢 `constant_pool` 盲赂颅茅垄聞莽聲聶 `info()->literal()->suspend_count()` 盲赂陋盲陆聧莽陆庐茂录聢`constant_pool` 忙聵炉盲赂聙盲赂陋忙聲掳莽禄聞茂录聣茂录聦盲陆聹盲赂潞 JumpTable茫聙聜JumpTable 盲录職氓聹篓莽聰聼忙聢聬氓颅聴猫聤聜莽聽聛莽職聞猫驴聡莽篓聥盲赂颅茅聙聬盲赂陋猫垄芦氓隆芦氓聟聟忙聢聬氓庐聻茅聶聟莽職聞猫路鲁猫陆卢氓聛聫莽搂禄茫聙聜

|  |  |
| --- | --- |
| ``` 1 2 3 4 5 6 7 8 9 10 11 12 13 14 ``` | ``` void BytecodeGenerator::BuildGeneratorPrologue() {   DCHECK_GT(info()->literal()->suspend_count(), 0);   generator_jump_table_ =       builder()->AllocateJumpTable(info()->literal()->suspend_count(), 0);   // [1] AllocateJumpTable    // If the generator is not undefined, this is a resume, so perform state   // dispatch.   builder()->SwitchOnGeneratorState(generator_object(), generator_jump_table_);    // Otherwise, fall-through to the ordinary function prologue, after which we   // will run into the generator object creation and oth...