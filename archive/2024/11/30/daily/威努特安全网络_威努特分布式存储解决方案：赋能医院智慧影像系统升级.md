---
title: 威努特分布式存储解决方案：赋能医院智慧影像系统升级
url: https://mp.weixin.qq.com/s?__biz=MzAwNTgyODU3NQ==&mid=2651129301&idx=1&sn=019bfdca141e1e42a002454e7177107a&chksm=80e71f65b79096738900cd2fbc2310df3f493a7b861dba3ff79d34e2719d1b691e6f7a0e98ab&scene=58&subscene=0#rd
source: 威努特安全网络
date: 2024-11-30
fetch_date: 2025-10-06T19:16:02.682779
---

# 威努特分布式存储解决方案：赋能医院智慧影像系统升级

![cover_image](https://mmbiz.qpic.cn/mmbiz_jpg/vEkwp3V9Utty5RibpCCwEKoMqh02iaFDuE5WPvcZRWT62k9J5arjutibGqDqUYXeQU2KTqcZJBziarsOHsMicVE9iaDA/0?wx_fmt=jpeg)

# 威努特分布式存储解决方案：赋能医院智慧影像系统升级

原创

产品营销部

威努特安全网络

# ![](https://mmbiz.qpic.cn/mmbiz_gif/vEkwp3V9UttO1byVSbuod03z4vTwBZa0vVS7nrOUUlibUbNn1ovF2nB91AkwkHCVibGutqLqEZB0oNzHCUGqzzeQ/640?wx_fmt=gif&from=appmsg&wxfrom=5&wx_lazy=1&tp=webp)

✦

✦

**背景介绍**

✦

随着医疗技术的不断进步和影像诊断需求的日益增长，医院现有的PACS系统存储平台正面临着前所未有的挑战。一方面，海量影像数据的快速增长对存储容量和访问速度提出了更高要求；另一方面，老旧存储架构在扩展性、稳定性和安全性方面已难以满足当前及未来医疗业务的发展需求。

因此，为了提升医疗服务效率与质量，确保影像数据的完整性、安全性和高效利用，医院亟需对PACS系统存储平台进行全面改造升级。旨在构建一个高性能、可扩展、安全可靠的存储环境，为临床决策提供有力支持，同时也为医院信息化建设的长远发展奠定坚实基础。

✦

✦

**医学影像PACS系统概述**

✦

随着医学工程技术的日新月异，一系列高科技临床医学检查仪器设备如雨后春笋般涌现，它们精密而高效，为医生的医疗诊断工作提供了强有力的支持。从高精度的断层扫描（CT）到深邃洞察的核磁共振（MRI），从细致入微的血管造影（DSA）到清晰直观的数字X光机（DR），再到无创便捷的超声检查、直观精准的内镜检测以及细致入微的病理切片分析，这些医学仪器已然成为现代医院不可或缺的诊断利器。

然而，如何充分利用这些尖端设备所产生的海量医学影像，确保它们能够迅速而准确地传达至医生手中，从而辅助医生进行高效、精准的临床诊断，已成为当前医院追求高品质医疗服务的重要课题。为此，医疗信息化建设正如火如荼地推进，医学影像信息化技术得以在医院领域广泛应用，其中，PACS（影像归档与通信系统）系统凭借其强大的功能，已成为医院医学影像信息化管理的核心平台。

PACS系统不仅实现了医学影像的信息化采集、高效传输、安全存储和便捷诊断，还极大地提升了医院医学影像的管理水平和服务质量。然而，随着PACS系统的不断发展和医学影像数据的急剧增长，传统物理服务器及存储设备在承载这些数据时逐渐显得力不从心。医学影像数据以其庞大的总量和迅猛的增速著称，按照医疗行业法规的严格要求，这些数据必须妥善保存至少十五年之久。同时，常用医学影像的时效性相对较短，通常不超过六个月，而六个月之后的数据访问频率则显著降低。

因此，面对医学影像数据的这些特点，医院需要不断探索和创新，以更加高效、安全、可靠的方式管理和利用这些宝贵的数据资源，为医生提供强有力的支持，共同推动医疗服务的持续升级和高质量发展。

✦

✦

**PACS系统存储特点分析**

✦

相较于其他行业，医疗行业对PACS系统的承载需求显得尤为严格与苛刻，而PACS系统本身在存储系统方面亦展现出一系列独特且至关重要的特点与要求。这些要求主要体现在以下几个方面：

**1. 数据存储量大，且数据量增长快速**

PACS系统主要是完成对患者的各种影像数据进行采集、存储、传输和处理，并在全院范围内进行存储共享，由于是各种图形图像数据，因此具有存储量大的特点。

**2. 数据访问频次高，访问速度要求高**

PACS系统数据和医院非PACS数据的特点存在差异，尤其是数据存储容量大、访问速度要求快、数据频次高、存储可扩展性强等方面，在存储设计方面需要进行一定的区分。

**3. 文件数量多且文件小**

PACS系统中存储的文件数量非常多，且大多数文件的大小都在500KB以下。例如，每次CT检查都会生成上百张KB级别的小文件。

**4. 保存周期长**

根据《医疗机构管理条例实施细则》，医疗机构的门诊病历保存期不得少于15年，住院病历不得少于30年，而更多的医疗数据选择永久保留。‌

‌

✦

✦

**PACS系统存储架构面临的挑战**

✦

当前，仍有较多医院依赖于传统的物理服务器与集中式存储架构来支撑PACS系统的影像数据存储需求，然而，这一架构在实际应用中暴露出了诸多挑战，严重制约了医院信息化与智慧化建设的步伐。具体体现于以下几个方面：

**1. 存储性能瓶颈存在问题**

在医院的业务高峰期，如门诊高峰期或大型会诊时，会有大量医生同时访问PACS系统以获取影像数据。传统集中式存储在并发访问性能上往往存在不足，难以满足高并发访问的需求，导致医生等待时间过长，影响工作效率。

**2. 冷数据迁移困难**

影像数据需要长期保存，而存储硬件运行若运行五年以上，设备的故障概率升高，需要逐步更换存储硬件。存储硬件更换时，影像这种类似海量小文件的数据，迁移速度慢，通常耗费数月，占用大量人力物力。迁移过程中的数据安全也难以保证，容易造成不必要的数据损失。

**3. 海量小文件存储性能下降**

传统集中式存储在面对海量小文件的读写时，性能容易成为瓶颈。PACS系统中的影像数据通常是以小文件形式存在的，如CT、MRI等影像检查每次都会产生数千甚至数万个小文件。这些文件的频繁读写操作会消耗大量的存储系统资源，导致读写速度下降。

**4. 归档扩容困难**

进入归档期的影像数据逐年增加，传统集中式存储架构在扩展性上存在不足。当医院需要增加存储容量时，往往需要购买更多的存储设备并进行复杂的配置和整合工作。这不仅增加了成本，还延长了扩展周期。

✦

✦

**威努特分布式存储解决方案**

✦

**1. 设计思路**

我司认为PACS系统存储平台的规划设计，必须以实用为主，一切建设以经济实用、适用为出发点并具有一定的技术前瞻性。结合需求及当前业务数据存储面临的问题，主要思路如下：

**技术架构先进**

在构建存储架构时，我们应确保其在成熟度的基础上融入先进技术，并选用标准化产品。这样的设计旨在不仅满足当前对高性能的严苛要求，而且赋予架构长久的生命力及持续的应用价值，使之与当今的技术潮流相契合，并预见到未来的发展趋势。

**平台架构易拓展**

架构设计需全面考量横向与纵向的扩展能力，确保通过硬件设备的迭代升级，能够实现架构处理性能的线性提升，从容应对影像数据激增所带来的资源池扩展挑战，从而摒弃传统服务器和存储中依赖增加控制器进行孤岛式扩展的局限。此外，扩展操作应追求最大程度的简便快捷。

**性能强劲访问速率快**

整体架构设计需着重解决影像归档池中不断累积的海量文件所带来的访问延迟与管理复杂度问题，确保即便面对时间跨度极大的影像数据，医生也能享受到流畅无阻的快速访问体验。此外，该架构还需前瞻性地考虑并满足未来AI技术在阅片领域的深度应用需求，为智能化阅片系统的集成与运行提供坚实、高效且可扩展的支撑平台，从而全面提升医疗影像诊断的精准度与工作效率。

**存储平台可靠性高**

存储平台属于PACS系统架构的基石，需确保高度稳定。其架构需融合多级故障防护策略，配以全方位安全防护机制，以保障系统稳健运行及数据安全，为PACS系统奠定坚实可靠的存储基础。

**2. 方案概述**

![](https://mmbiz.qpic.cn/mmbiz_png/vEkwp3V9UtsZVGxnbYmW5ZNcJTPNTZialulibOd3u1wMvOTZq2iccYR5FPTrh7W1VHibfkgzIl70tPyicj87Z1icEeIg/640?wx_fmt=png&from=appmsg)

图1 威努特分布式存储系统架构

通过威努特分布式存储系统组建分布式存储集群。搭建统一的软件定义存储平台，将集群中的磁盘资源整合为多个资源存储池，为医院PACS影像系统提供底层存储支撑，也为其他软件系统提供块、文件和对象存储服务。

分布式存储系统展现出了卓越的高性能，能够游刃有余地处理各类高负载管理场景，包括业务关键型应用及核心业务系统。其采用的多副本与强一致性技术，确保了系统的高可用性。而强大的横向扩展能力，则为PACS系统业务数据增长所带来的管理维护需求提供了高度的灵活性与便捷性。

威努特分布式存储系统创新性地采用了去中心化设计，摒弃了传统的元数据服务，转而利用弹性Hash算法精准定位文件，这一变革性举措从根本上破解了元数据管理的难题，赋予了系统近乎无限的线性扩展潜力。在此架构下，集群中的任意节点仅凭相对路径与文件名便能迅速定位并读写数据，全程无需元数据交互，从而彻底规避了元数据性能瓶颈及单点故障风险。分布式存储系统因此能够弹性扩展至包含上千节点的庞大规模，其容量与性能均随着节点的增加而实现线性提升，为构建未来医院所需的超大存储体系奠定了坚实基础。

**3. 存储资源设计**

![](https://mmbiz.qpic.cn/mmbiz_png/vEkwp3V9UtsZVGxnbYmW5ZNcJTPNTZialWFVkyqZf9fn92KclwatmKfCEia4RtZEvm7D6vNsF77k0BZicbUAKf0aw/640?wx_fmt=png&from=appmsg)

图2 威努特分布式存储系统线性扩展能力

威努特分布式存储系统采用了先进的全对称分布式架构，确保了整个存储系统无单点故障隐患。通过集成纠删码与多副本技术，该系统能够将数据冗余存储于多个节点之中，从而极大地增强了数据的容灾与恢复能力。

该分布式存储系统由多个独立的物理服务器协同工作，所有节点均采用了完全对称的架构设计，不存在主从之分。这一特性使得系统能够在无需停机的情况下，灵活增加存储节点，进而实现存储容量与性能的动态扩展。由于各节点间完全对等，“对称”设计不仅大幅降低了系统的维护成本，还从根本上消除了单点故障的风险。

此外，分布式存储系统支持理论上的无限水平扩展，能够轻松应对EB级别的大规模存储需求。在实际应用中，医院可根据具体项目的需求，灵活配置存储节点的数量、固态硬盘以及机械硬盘等资源，以满足PACS系统的存储容量与性能要求。

**4. 存储网络设计**

![](https://mmbiz.qpic.cn/mmbiz_jpg/vEkwp3V9UtsZVGxnbYmW5ZNcJTPNTZialDumb0IkwhIRR6cgxCF7BjxZ720qE5RAX6eqHKkYib3pKoo2Z2c5QwZg/640?wx_fmt=jpeg)

图3 威努特分布式存储系统组网连接

如以上网络拓扑图所示，分布式存储系统网络组建可分为业务网、存储网和管理网三大部分。

**业务网**

业务网负责与前端信息系统服务集群通信交互，如PACS系统等，包括业务端各种数据的传输、数据查询等操作，也具有较高的性能压力，建议采用10Gb网络，以匹配业务节点对数据的快速处理及访问，确保存储系统对前端业务系统的有效支撑。

**存储网**

存储网用于承载威努特分布式存储节点集群之间的数据访问，以及威努特分布式存储集群内部的数据均衡链路。是带宽、延时、IO响应等性能压力最大的网络链路，建议采用10Gb网络，以保证最佳的性能支撑。

**管理网**

管理网用来登录存储集群的WEB管理界面，完成配置、管理、状态查询等操作，该网络性能压力不大，连入千兆交换机即可。

**5. 存储安全设计**

**节点冗余**

威努特分布式存储一体机支持多副本和N+M纠删码（EC），提供硬盘级、节点级、机柜级等多级故障域保护能力。

推荐采用副本或纠删码数据保护机制。满足所有存储节点同时损坏一块硬盘，以及任意一个节点故障的情况下，保证数据不丢失，充分保证存储系统的可靠性。可根据PACS系统的实际情况选取副本或者纠删码。

另外，存储系统的虚拟化可实现集群HA，保障任意节点损坏，其承载的所有业务均会迁移到其他空余节点，充分保证业务连续性。

**链路安全**

如上节网络设计所描述，在交换机堆叠场景下，网络建议采用全冗余方式，即交换机和网络连接线均实现双份冗余，交换机采用堆叠方式，所有设备节点网络连接线均采用双上联方式连入不同交换机，实现即任意一条链路或交换机出现故障时不会造成业务中断。充分保证网络链路安全，从而使系统可靠性得到保证。

**数据保护**

威努特分布式存储系统可通过快照对数据进行保护，保证当数据不慎被误删除等情况下可以进行数据恢复，充分保证数据安全。

✦

✦

**威努特分布式存储系统产品特性**

✦

**1**

**基于文件整体可靠性的数据分布策略**

以冗余组为单位，将文件通过哈希算法分配到存储池中的不同冗余组，节点故障只影响一部分数据的安全性和访问性能，即便某一个冗余组全部故障，其他冗余组的文件也不受影响，从而实现用户数据存储整体的可靠性提升。具体流程如下：

* 根据文件名由一致性hash算法计算出对应hash值；
* 根据hash值确定文件所在的冗余组以及冗余组下的存储节点；
* 对所选节点下的数据进行读写访问。

![](https://mmbiz.qpic.cn/mmbiz_png/vEkwp3V9UtsZVGxnbYmW5ZNcJTPNTZialibbqzF6hibXYbrzR4QgyRj3ID7cAoc2x4H4ywI0uicwlETH3NhFcnZy1Q/640?wx_fmt=png&from=appmsg)

图4 威努特分布式存储系统文件读写可靠性逻辑

**2**

**基于高并发读写的数据分布策略**

集群中任何节点只需要相对路径和文件名就可以对数据进行快速定位和读写，无元数据交互过程，文件定位可以独立并行化进行，其具体流程如下：

* 根据文件名由一致性hash算法计算出对应hash值；
* 根据hash值在集群中确定数据所在节点；
* 对所选节点路径下的数据进行数据访问。

![](https://mmbiz.qpic.cn/mmbiz_png/vEkwp3V9UtsZVGxnbYmW5ZNcJTPNTZial5JSklJ80dMmiaicJ8pxqrq2bu7UKFiaPheE6JJaPp4QOE7Dlpv8hGibbWQ/640?wx_fmt=png&from=appmsg)

图5 威努特分布式存储系统文件高并发读写逻辑

基于哈希分区的算法机制，分布式存储集群可实现自动或手动负载均衡，保证各个节点容量与随机读写性能保持一致。同时可实现不停机的在线扩展与缩减，包括添加硬盘实现容量扩展，也可增加节点同步提升系统的容量与性能的性能扩展，大大缩减或消除计划内的停机时间。

**3**

**数据可靠性的优化机制**

**冗余机制**

![](https://mmbiz.qpic.cn/mmbiz_png/vEkwp3V9UtsZVGxnbYmW5ZNcJTPNTZialwotsIdJo7VvibxibhUmUVh5QBmia6lsvYzWUW6lId67pHYTFjnPgwIU5w/640?wx_fmt=png&from=appmsg)

图6 威努特分布式存储系统冗余机制展示

支持多种冗余机制以满足不同容量、不同应用的性能需求。无论是纠删码还是多副本，都可以保证为数据提供至少一个节点故障不影响使用的冗余保护，从而保证数据的安全和存储平台的可靠性。采用双副本机制，可提供最高一半节点故障数据不丢失保护。

分布式存储提供副本和纠删码两种数据/集群保护模式，用户可根据应用类型、数据重要性、性能、成本平衡选择配置模式，实现数据高可靠和存储服务持续化。副本保护可直接以正常数据为源数据，复制并恢复丢失或损失的数据副本；纠删码保护可以通过存储的冗余数据信息，来重建丢失或损坏的数据，从而进一步加强对数据的保护。

**数据一致性**

![](https://mmbiz.qpic.cn/mmbiz_png/vEkwp3V9UtsbWwHT8b6SjZWvdIHoKcptR0ddPTgy2B9eziaPglBcb6kOXjeReGcVtn0FxOTqCHcAQRibiasfSsCicA/640?wx_fmt=png&from=appmsg)

图7 威努特分布式存储系统数据一致性展示

首先，威努特分布式存储系统支持WORM一写多读功能。开启该功能后，数据一经写入威努特分布式存储系统就无法再修改删除。同时分布式存储系统可指定开启WORM功能时间段，对特定时间段数据做特殊保护。企业重要数据如:照片、合约、订单、财报、发票、电子邮件和各式其他公司重要文件，一经写入就不容许再有任何的更改。WORM是长久安全存储大量数据信息的理想解决方案，可以满足医院、法院等机构的法规遵从要求，可以广泛应用于电子凭证、视频监控、数据加密、企业备份、个人征信记录的保存等，实现追溯真实的原始数据。

其次，分布式存储针对存储于硬盘上的数据和元数据，都采用强一致性数据完整性保护机制，采用主-从节点的驱动机制，该机制基于Write-All-Read-One的强一致性数据访问实现，其中主控节点负责接收客户端请求，首先执行本地数据操作，进而驱动从控节点，并等待从控节点数据操作完成后，再向客户端返回读写操作完成响应消息，完成数据读写操作。

最后，分布式存储采用selfheal、recovery、bitrot等机制多方位进行数据一致性检查，一旦发现数据损坏，系统将根据文件/数据块版本，时间戳以及脑裂等信息，判断出非正常数据并自动对其进行静默数据修复。如果在数据在线访问时发现多份副本不一致，则会立即启动修复机制，调用正常数据立即修复故障数据。存储节点故障后，系统会自动将访问链路切换到正常工作的节点上，进而对故障节点的数据进行手动或自动修改，确保数据有足够的冗余。威努特分布式存储故障修复时，修复影响控制在有限的节点范围内，对集群整体性能影响极小。威努特分布式存储强一致性的数据保护机制，为数据的存储提供强大的抗风险能力，可以确保在存储节点宕机、系统意外掉电等意外故障下，无数据丢失风险。

✦

✦

**方案价值**

✦

威努特分布式存储解决方案为医院提供了稳定、高效、可扩展的存储支持，确保了PACS系统的顺畅运行和医生的工作效率，主要价值如下：

**1. 全面提升PACS影像系统的访问效率**

通过采用先进的分布式存储技术架构，有效分散并发访问压力，确保在高并发场景下医生也能迅速获取影像数据，显著提高工作效率的同时也能够为患者提供好的就医服务。

**2. 提升海量影像检查小文件的读写效率**

针对海量小文件存储的特点，采用专门优化的存储架构和技术，在CT、MRI等影像检查场景，可有效减少存储系统资源的消耗，提升读写速度，确保PACS系统的高效稳定运行，为诊疗患者提供更加高效的检查服务。

**3. 简化冷数据迁移过程并缩短迁移时间**

利用高效的冷数据迁移机制，大幅缩...