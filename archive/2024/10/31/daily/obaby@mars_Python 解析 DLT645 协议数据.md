---
title: Python è§£æ DLT645 åè®®æ•°æ®
url: https://h4ck.org.cn/2024/10/18421
source: obaby@mars
date: 2024-10-31
fetch_date: 2025-10-06T18:52:25.782832
---

# Python è§£æ DLT645 åè®®æ•°æ®

[![obaby@mars](/wp-content/uploads/2023/08/logo-pink-small.png)](https://h4ck.org.cn)

Artificial Intelligence / Reverse Engineering / Internet of Things / Full Stack Developer

* [â€»è¯´è¯´/Talkâ€»](https://h4ck.org.cn/talk)
* [â€»ç•™è¨€/Msgâ€»](https://h4ck.org.cn/guestbook)
* [â€»å½’æ¡£/Fileâ€»](https://h4ck.org.cn/myarchive)
* [â€»èµ„æº/Resâ€»](https://h4ck.org.cn/res-page)
* [â€»æˆ‘æ˜¯è°/Meâ€»](https://h4ck.org.cn/whoami)
* [â€»é›†ç¾ä»¬/Bestiesâ€»](https://h4ck.org.cn/besties)

 [Menu](#mobilemenu)

* [â€»è¯´è¯´/Talkâ€»](https://h4ck.org.cn/talk)
* [â€»ç•™è¨€/Msgâ€»](https://h4ck.org.cn/guestbook)
* [â€»å½’æ¡£/Fileâ€»](https://h4ck.org.cn/myarchive)
* [â€»èµ„æº/Resâ€»](https://h4ck.org.cn/res-page)
* [â€»æˆ‘æ˜¯è°/Meâ€»](https://h4ck.org.cn/whoami)
* [â€»é›†ç¾ä»¬/Bestiesâ€»](https://h4ck.org.cn/besties)

[äººå·¥æ™ºèƒ½ã€AIã€](https://h4ck.org.cn/cats/cxsj/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E3%80%8Eai%E3%80%8F)

# Python è§£æ DLT645 åè®®æ•°æ®

2024å¹´10æœˆ30æ—¥
[17 æ¡è¯„è®º](https://h4ck.org.cn/2024/10/18421#comments)

[![](https://h4ck.org.cn/wp-content/uploads/2024/10/2024_06_13_12_01_IMG_3855-tuya.jpg)](https://h4ck.org.cn/wp-content/uploads/2024/10/2024_06_13_12_01_IMG_3855-tuya.jpg)

DL/T 645æ˜¯ä¸­å›½å›½å®¶ç”µç½‘å…¬å¸åˆ¶å®šçš„ä¸€ç§ç”¨äºç”µèƒ½è¡¨é€šä¿¡çš„åè®®ï¼Œå…¨ç§°ä¸ºã€Šå¤šåŠŸèƒ½ç”µèƒ½è¡¨é€šä¿¡åè®®ã€‹ã€‚è¯¥åè®®ä¸»è¦ç”¨äºç”µèƒ½è¡¨ä¸æ•°æ®é‡‡é›†ç»ˆç«¯ï¼ˆå¦‚é›†ä¸­å™¨ã€æŠ„è¡¨å™¨ç­‰ï¼‰ä¹‹é—´çš„é€šä¿¡ï¼Œä»¥å®ç°ç”µèƒ½æ•°æ®çš„é‡‡é›†ã€ä¼ è¾“å’Œç®¡ç†ã€‚

### ä¸»è¦ç‰¹ç‚¹

1. **å¤šåŠŸèƒ½æ€§**ï¼šæ”¯æŒå¤šç§ç”µèƒ½å‚æ•°çš„è¯»å–å’Œè®¾ç½®ï¼Œå¦‚ç”µå‹ã€ç”µæµã€åŠŸç‡ã€ç”µèƒ½ã€åŠŸç‡å› æ•°ç­‰ã€‚
2. **çµæ´»æ€§**ï¼šæ”¯æŒå¤šç§é€šä¿¡æ–¹å¼ï¼Œå¦‚RS-485ã€çº¢å¤–ã€æ— çº¿ç­‰ã€‚
3. **å®‰å…¨æ€§**ï¼šæ”¯æŒæ•°æ®åŠ å¯†å’Œèº«ä»½éªŒè¯ï¼Œç¡®ä¿æ•°æ®ä¼ è¾“çš„å®‰å…¨æ€§ã€‚
4. **æ ‡å‡†åŒ–**ï¼šç¬¦åˆå›½å®¶ç”µç½‘å…¬å¸çš„æ ‡å‡†ï¼Œä¾¿äºå¤§è§„æ¨¡éƒ¨ç½²å’Œç»´æŠ¤ã€‚

### åè®®ç»“æ„

DL/T 645åè®®çš„æ•°æ®å¸§ç»“æ„é€šå¸¸åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š

1. **å¸§èµ·å§‹ç¬¦**ï¼šæ ‡è¯†æ•°æ®å¸§çš„å¼€å§‹ï¼Œé€šå¸¸ä¸º0x68ã€‚
2. **åœ°å€åŸŸ**ï¼šæ ‡è¯†ç”µèƒ½è¡¨çš„åœ°å€ï¼Œé€šå¸¸ä¸º6å­—èŠ‚ã€‚
3. **æ§åˆ¶ç **ï¼šæ ‡è¯†å‘½ä»¤ç±»å‹ï¼Œå¦‚è¯»å–æ•°æ®ã€å†™å…¥æ•°æ®ç­‰ã€‚
4. **æ•°æ®åŸŸ**ï¼šåŒ…å«å…·ä½“çš„å‘½ä»¤æ•°æ®æˆ–è¿”å›çš„æ•°æ®ã€‚
5. **æ ¡éªŒç **ï¼šç”¨äºæ ¡éªŒæ•°æ®å¸§çš„å®Œæ•´æ€§ï¼Œé€šå¸¸ä¸º1å­—èŠ‚ã€‚
6. **å¸§ç»“æŸç¬¦**ï¼šæ ‡è¯†æ•°æ®å¸§çš„ç»“æŸï¼Œé€šå¸¸ä¸º0x16ã€‚

### å¸¸ç”¨å‘½ä»¤

* **è¯»å–æ•°æ®**ï¼šç”¨äºè¯»å–ç”µèƒ½è¡¨çš„å„ç§å‚æ•°ï¼Œå¦‚ç”µå‹ã€ç”µæµã€åŠŸç‡ç­‰ã€‚
* **å†™å…¥æ•°æ®**ï¼šç”¨äºè®¾ç½®ç”µèƒ½è¡¨çš„å‚æ•°ï¼Œå¦‚æ—¶é—´ã€è´¹ç‡ç­‰ã€‚
* **å¹¿æ’­æ ¡æ—¶**ï¼šç”¨äºåŒæ­¥ç”µèƒ½è¡¨çš„æ—¶é—´ã€‚
* **å†»ç»“å‘½ä»¤**ï¼šç”¨äºå†»ç»“ç”µèƒ½è¡¨çš„å½“å‰æ•°æ®ï¼Œä¾¿äºåç»­è¯»å–ã€‚

### åº”ç”¨åœºæ™¯

DL/T 645åè®®å¹¿æ³›åº”ç”¨äºæ™ºèƒ½ç”µç½‘ã€ç”µåŠ›ç›‘æ§ç³»ç»Ÿã€è¿œç¨‹æŠ„è¡¨ç³»ç»Ÿç­‰é¢†åŸŸã€‚é€šè¿‡è¯¥åè®®ï¼Œå¯ä»¥å®ç°ç”µèƒ½æ•°æ®çš„å®æ—¶é‡‡é›†ã€è¿œç¨‹ç›‘æ§å’Œè‡ªåŠ¨åŒ–ç®¡ç†ï¼Œæé«˜ç”µåŠ›ç³»ç»Ÿçš„è¿è¡Œæ•ˆç‡å’Œç®¡ç†æ°´å¹³ã€‚

æ•°æ®æŠ¥æ–‡æ ¼å¼ï¼š

[![](https://h4ck.org.cn/wp-content/uploads/2024/10/Jietu20241030-095225.jpg)](https://h4ck.org.cn/wp-content/uploads/2024/10/Jietu20241030-095225.jpg)

æ•°æ®æŠ¥æ–‡è§£æç›¸å¯¹æ¥è¯´å¹¶ä¸å¤æ‚ï¼Œæ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯æµå¼ï¼Œç›´æ¥æŒ‰ç…§é¡ºåºè¿›è¡Œè¯»å–å³å¯ã€‚ä¸è¿‡é‡Œé¢æ•°æ®çš„å†…å®¹ï¼Œå¹¶ä¸éœ€è¦åœ¨æ­¤è¿›è¡Œæ•°å€¼è½¬æ¢ï¼ˆç”µåŠ›æ•°æ®éœ€è¦å¤„ç†ï¼‰ï¼ŒåŸºæœ¬è¯»åˆ°ä»€ä¹ˆå†…å®¹å°±æ˜¯ä»€ä¹ˆå†…å®¹ã€‚

ä¾‹å¦‚åŸå§‹æ•°æ®ï¼š

```
message = b'hw8\x06(\x15Dh\x00\x02\x01\x1f(\x16'
```

è§£ææ•°æ®å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹æ³•ï¼š

```
def process_645_data(message):
    print('message in hex=', message.hex())
    start_pos = message[0:1]
    # print('start_code = ', start_pos.hex())
    hid = message[1:7]
    # print(hid)
    # int_value = int.from_bytes(hid,byteorder='little')  # é»˜è®¤ä½¿ç”¨å¤§ç«¯æ¨¡å¼
    # print(int_value)
    # int_value = int.from_bytes(hid,byteorder='big')  # é»˜è®¤ä½¿ç”¨å¤§ç«¯æ¨¡å¼
    # print(int_value)
    print('hid = ', hid[::-1].hex())
    hid_hex = hid[::-1].hex()
    # print(hid.hex())
    data_pos = message[7:8]
    # print('data_pos = ', data_pos.hex())

    control_code = message[8:9]
    print('control_code = ', control_code.hex())
    data_length = message[9:10]
    print('data_length =', data_length.hex())
    data_lenth_int = int.from_bytes(data_length, byteorder='little')
    data = message[10:10 + data_lenth_int]
    print('data = ', data)
    crc_code = message[10 + data_lenth_int:11 + data_lenth_int]

    # crc_source = message[0:10 + data_lenth_int]

    # calced_crc = calc_crc(crc_source)
    # print('calced crc = ', calced_crc)

    print('crc_code = ', crc_code.hex())
    end_pos = message[11 + data_lenth_int:12 + data_lenth_int]
    # print('end_pos = ', end_pos.hex())

    return hid, hid_hex, control_code, data_lenth_int, crc_code, data
```

æ¥æ”¶åˆ°çš„æ•°æ®è§£æå‡ºæ¥ä¹‹åä¸éœ€è¦å†è¿›è¡Œè½¬æ¢int.from\_bytes(hid,byteorder=â€™littleâ€™) ä¸ç®¡æ˜¯å¤§ç«¯è¿˜æ˜¯å°ç«¯æ¨¡å¼ï¼Œè½¬å‡ºæ¥éƒ½æ˜¯é”™çš„ï¼Œç›´æ¥å°†é«˜ä½ä½å€’åºè¾“å‡ºå³å¯ï¼šhid[::-1].hex()

è§£æåçš„æ•°æ®ï¼š

```
message in hex= 68773806281544680002011f2816
hid =  441528063877
control_code =  00
data_length = 02
data =  b'\x01\x1f'
crc_code =  28
```

å¯¹äºæ•°æ®ä¸ŠæŠ¥çš„å†…å®¹ï¼Œä¾‹å¦‚ç”µé‡ï¼Œç”µæŠ¥ä¸ŠæŠ¥æ•°æ®ä¸ºä¸‹é¢çš„æŠ¥æ–‡ï¼š

```
# ç”µé‡ä¸ŠæŠ¥æ•°æ®
data_msg = b'\x68\x77\x38\x06\x28\x15\x44\x68\x91\x08\x33\x33\x34\x33\x33\x33\x33\x33\x38\x16'
```

è§£ææ•°æ®å†…å®¹ï¼š

```
data_msg = b'\x68\x77\x38\x06\x28\x15\x44\x68\x91\x08\x33\x33\x34\x33\x33\x33\x33\x33\x38\x16'

hid, hid_hex, control_code, data_lenth_int, crc_code, data = process_654_data(data_msg)
print(control_code.hex())
print(data.hex())

data_type = data[0:4]
data_source = data[4:]
process_data_type = bytes(byte - 0x33 for byte in data_type)
print(process_data_type[::-1].hex())
process_data_data = bytes(byte - 0x33 for byte in data_source)
print(process_data_data[::-1].hex())
print(int(process_data_data[::-1].hex(), 16) / 100)
```

è§£æåçš„æ•°æ®ï¼š

```
message in hex= 6877380628154468910833333433333333333816
hid =  441528063877
control_code =  91
data_length = 08
data =  b'33433333'
crc_code =  38
91
3333343333333333
00010000
00000000
0.0
```

crc è®¡ç®—æ–¹æ³•ï¼š

```
def calc_crc(src):
    sum = 0
    for i in range(len(src)):
        sum += src[i]
    crc = sum % 256
    return crc
```

æ•°æ®è§£æå¤„ç†å‚è€ƒï¼š<https://blog.csdn.net/m0_37651448/article/details/143100598>

â˜†ç‰ˆæƒâ˜†

\* ç½‘ç«™åç§°ï¼š**[obaby@mars](https://h4ck.org.cn/)**
\* ç½‘å€ï¼š<https://h4ck.org.cn/>
\* ä¸ªæ€§ï¼š<https://oba.by/>
\* æœ¬æ–‡æ ‡é¢˜ï¼š [ã€ŠPython è§£æ DLT645 åè®®æ•°æ®ã€‹](https://h4ck.org.cn/2024/10/18421)
\* æœ¬æ–‡é“¾æ¥ï¼š<https://h4ck.org.cn/2024/10/18421>
\* çŸ­é“¾æ¥ï¼š<https://oba.by/?p=18421>
\* è½¬è½½æ–‡ç« è¯·æ ‡æ˜æ–‡ç« æ¥æºï¼ŒåŸæ–‡æ ‡é¢˜ä»¥åŠåŸæ–‡é“¾æ¥ã€‚è¯·éµä» [ã€Šç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 2.5 ä¸­å›½å¤§é™† (CC BY-NC-SA 2.5 CN) ã€‹](https://creativecommons.org/licenses/by-nc-sa/2.5/cn/)è®¸å¯åè®®ã€‚

---

[DLT645](https://h4ck.org.cn/tags/dlt645)[Python](https://h4ck.org.cn/tags/python)[ç”µè¡¨](https://h4ck.org.cn/tags/%E7%94%B5%E8%A1%A8)

[Previous Post](https://h4ck.org.cn/2024/10/18424)
[Next Post](https://h4ck.org.cn/2024/10/18406)

![obaby](https://gg.lang.bi/avatar/d6ebc088df916bcc9e8b94a09f9b0f604e57be54b04bd520c6db2492740fc563?s=90&d=identicon&r=r)

#### obaby

çˆ±å¥½å¹¿æ³›çš„ç«æ˜Ÿå°å¦–ç²¾ï¼Œæœ‰é—®é¢˜æ¬¢è¿ç•™è¨€äº¤æµå•Š~(âœªÏ‰âœª)
çˆ¬è™«ç±»å·¥å…·è¯·å…ˆç‚¹å‡»è¿™ä¸ªé“¾æ¥æŸ¥çœ‹ç”¨æ³•https://oba.by/?p=12240
é—ºèœœåœˆAPPä¸‹è½½ https://guimiquan.cn

#### çŒœä½ å–œæ¬¢ï¼š

2023å¹´6æœˆ26æ—¥

#### [10è¡Œä»£ç çˆ¬å–å®‰å±…å®¢æ•°æ®](https://h4ck.org.cn/2023/06/12349)

2021å¹´10æœˆ9æ—¥

#### [Yolov5 tf-liteæ–¹å¼å¯¼å‡º](https://h4ck.org.cn/2021/10/9145)

2012å¹´7æœˆ12æ—¥

#### [IDA\_SYNC\_PLUGIN (v2.0.0.1) for IDA 6.x](https://h4ck.org.cn/2012/07/4327)

### 17 comments

1. ![](https://gg.lang.bi/avatar/d98dfdf4e1f6a84bbf50554abbd9fa5f81431acef40126d2fdcb5bb3b99d444a?s=64&d=identicon&r=r) **[åˆ˜éƒ](https://yjvc.cn/)**è¯´é“ï¼š

   [2024å¹´10æœˆ30æ—¥ 10:28](https://h4ck.org.cn/2024/10/18421#comment-120403)

   ![Level 4](https://badgen.net/badge/äº²å¯†åº¦/Level 4/yellow?icon=codebeat)

   ![Google Chrome 127](https://h4ck.org.cn/wp-content/plugins/wp-useragent/img/16/net/chrome.png "Google Chrome 127") Google Chrome 127 ![GNU/Linux](https://h4ck.org.cn/wp-content/plugins/wp-useragent/img/16/os/linux.png "GNU/Linux") GNU/Linux ![cn](https://h4ck.org.cn/wp-content/plugins/wp-useragent/show-useragent/flags_svg/cn.svg "cn")

   æŠŠè¿™ä¸ªè§£æå‡ºæ¥èƒ½å¹²å˜› å¯ä»¥ä¸ç”¨äº¤ç”µè´¹å— å“ˆå“ˆ ç ”ç©¶ä¸€ä¸‹ğŸ˜‚

   [å›å¤](#comment-120403)

   1. ![](https://gg.lang.bi/avatar/d6ebc088df916bcc9e8b94a09f9b0f604e57be54b04bd520c6db2492740fc563?s=64&d=identicon&r=r)

      [2024å¹´10æœˆ30æ—¥ 10:44](https://h4ck.org.cn/2024/10/18421#comment-120404)

      ![å…¬ä¸»](https://badgen.net/badge/ç®¡ç†å‘˜/å°å¦–ç²¾/ff91a4?icon=terminal)Â ![Queen](https://badgen.net/badge/è§’è‰²/å¥³ç‹/red?icon=matrix)

      ![Google Chrome 126](https://h4ck.org.cn/wp-content/plugins/wp-useragent/img/16/net/chrome.png "Google Chrome 126") Google Chrome 126 ![Mac OS X 10.15](https://h4ck.org.cn/wp-content/plugins/wp-useragent/img/16/os/mac-3.png "Mac OS X 10.15") Mac OS X 10.15 ![cn](https://h4ck.org.cn/wp-content/plugins/wp-useragent/show-useragent/flags_svg/cn.svg "cn")

      å“ˆå“ˆå“ˆï¼Œå¹¶ä¸æ˜¯ï¼Œæœ‰ä¸ªé¡¹ç›®è¦é€šè¿‡è¿™ä¸ªè®¡ç®—ç”µè´¹ï¼Œç„¶åè¿œç¨‹è·³é—¸ï¼ŒğŸ˜‚

      [å›å¤](#comment-120404)

      1. ![](https://gg.lang.bi/avatar/d98dfdf4e1f6a84bbf50554abbd9fa5f81431acef40126d2fdcb5bb3b99d444a?s=64&d=identicon&r=r)

         [2024å¹´10æœˆ30æ—¥ 10:52](https://h4ck.org.cn/2024/10/18421#comment-120405)

         ![Level 4](https://badgen.net/badge/äº²å¯†åº¦/Level 4/yellow?icon=codebeat)

         ![Google Chrome 127](https://h4ck.org.cn/wp-content/plugins/wp-useragent/img/16/net/chrome.png "Google Chrome 127") Google Chrome 127 ![GNU/Linux](https://h4ck.org.cn/wp-content/plugins/wp-useragent/img/16/os/linux.png "GNU/Linux") GNU/Linux ![cn](https://h4ck.org.cn/wp-content/plugins/wp-useragent/show-useragent/flags_svg/cn.svg "cn")

         é‚£èƒ½å¦å¼„ä¸€ä¸ªè®¡ç®—å¥½ç”µè´¹å ä½¿ç”¨è™š...