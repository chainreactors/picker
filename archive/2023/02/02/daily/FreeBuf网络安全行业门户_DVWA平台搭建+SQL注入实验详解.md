---
title: DVWA平台搭建+SQL注入实验详解
url: https://www.freebuf.com/articles/network/356170.html
source: FreeBuf网络安全行业门户
date: 2023-02-02
fetch_date: 2025-10-04T05:29:22.864033
---

# DVWA平台搭建+SQL注入实验详解

[![freeBuf](/images/logoMax.png)](/)

主站

分类

云安全

AI安全

开发安全

终端安全

数据安全

Web安全

基础安全

企业安全

关基安全

移动安全

系统安全

其他安全

特色

热点

工具

漏洞

人物志

活动

安全招聘

攻防演练

政策法规

[报告](https://www.freebuf.com/report)[专辑](/column)

* ···
* [公开课](https://live.freebuf.com)
* ···
* [商城](https://shop.freebuf.com)
* ···
* 用户服务
* ···

行业服务

政 府

CNCERT
CNNVD

会员体系（甲方）
会员体系（厂商）
产品名录
企业空间

[知识大陆](https://wiki.freebuf.com/page)

搜索

![](/freebuf/img/7aa3bf7.svg) ![](/freebuf/img/181d733.svg)

创作中心

[登录](https://www.freebuf.com/oauth)[注册](https://www.freebuf.com/oauth)

官方公众号企业安全新浪微博

![](/images/gzh_code.jpg)

FreeBuf.COM网络安全行业门户，每日发布专业的安全资讯、技术剖析。

![FreeBuf+小程序](/images/xcx-code.jpg)

FreeBuf+小程序把安全装进口袋

[![](https://image.3001.net/images/20231020/1697804527_653270ef7570cc7356ba8.png)](https://wiki.freebuf.com)

DVWA平台搭建+SQL注入实验详解

* ![]()
* 关注

* [基础安全](https://www.freebuf.com/articles/network)

DVWA平台搭建+SQL注入实验详解

2023-02-01 10:44:06

所属地 河北省

![](https://image.3001.net/images/20240308/1709876354_65eaa4828e91d155430d9.png)
本文由
创作，已纳入「FreeBuf原创奖励计划」，未授权禁止转载

> **实现1：**实现DVWA平台的搭建，为后续的SQL注入提供练习环境；
>
> **实现2：**进行SQL注入的练习，目的是了解因web应用程序对用户输入数据的合法性没有判断或过滤不严，而造成的危害，以便后续更好地掌握对其的防御手段，提高网络安全意识；

## **一、搭建DVWA平台**

### 1、下载phpstudy安装包

（注意：如果已经安装了数据库，需要注意端口冲突问题）

> **phpStudy**是一个PHP调试环境的程序集成包。
>
> 该程序包集成最新的Apache+PHP+MySQL+phpMyAdmin+ZendOptimizer，一次性安装，无须配置即可使用，是非常方便、好用的PHP调试环境。该程序不仅包括PHP调试环境，还包括了开发工具、开发手册等。

下载phpstudy安装包并一键安装，记住安装路径，我是安装到C盘的根目录下

![1675130300_63d875bc7a0b6f2dae200.png!small?1675130300448](https://image.3001.net/images/20230131/1675130300_63d875bc7a0b6f2dae200.png!small?1675130300448)

### 2、下载DVWA安装包

> **DVWA**全称为Damn Vulnerable Web Application，意为存在糟糕漏洞的web应用。它是一个基于PHP/MySQL开发的存在糟糕漏洞的web应用，旨在为专业的安全人员提供一个合法的环境，来测试他们的工具和技能。
>
> DVWA的安全特性分为两个部分：一是漏洞的安全级别；二是PHP-IDS入侵检测。
>
> **漏洞的安全等级分为低级、中级和高级。**每个级别都会改变 DVWA中所有漏洞的利用难度，初始加载时默认所有漏洞安全等级为高级，以下是每个安全级别及其用途的说明。
>
> * **高级**- 此级别旨在为用户提供良好编码实践的示例。这个级别应该保护所有漏洞的安全，它用于将易受攻击的源代码与安全源代码进行比较。
> * **中级** - 此级别主要是为用户提供糟糕的编程实践示例。开发者对程序的安全性进行了一定的保护但是仍有可被利用的漏洞，这为改进用户漏洞利用技巧提供了挑战。
> * **低级**- 此级别是完全易受攻击的，并且没有做任何安全防护。它的作用是展示不良编程实践是如何导致 Web 应用程序漏洞的，并用作教授或学习漏洞基本利用技术的平台。

在DVWA官网下载DWVA压缩包DVWA-master.zip

### 3、安装DVWA安装包

**1）解压安装包**

解压压缩包DVWA-master.zip，把解压后的文件DVWA-master文件，放在phpstudy的安装目录下面--C:\phpstudy\_pro\WWW文件夹下

![1675131021_63d8788d98634e7e82847.png!small](https://image.3001.net/images/20230131/1675131021_63d8788d98634e7e82847.png!small)

**2）修改配置文件**

找到DVWA-master文件夹下的config文件夹里面的数据库配置文件“config.inc.php.dist”，改名为“config.inc.php”，再以记事本的方式打开，**修改数据库的用户名和密码、端口号**，并保存：

> $\_DVWA[ 'db\_user' ] = 'root';
>
> $\_DVWA[ 'db\_password' ] = 'root';
>
> $\_DVWA[ 'db\_port' ] = '3306'

![1675131340_63d879cc23cca484a7834.png!small?1675131340284](https://image.3001.net/images/20230131/1675131340_63d879cc23cca484a7834.png!small?1675131340284)

![1675131372_63d879ecaaff963a9d323.png!small?1675131372635](https://image.3001.net/images/20230131/1675131372_63d879ecaaff963a9d323.png!small?1675131372635)![1675131389_63d879fd2068e3a3eb319.png!small?1675131389320](https://image.3001.net/images/20230131/1675131389_63d879fd2068e3a3eb319.png!small?1675131389320)

### 4、启动phpstudy

![1675131485_63d87a5d9b759a3d0feba.png!small?1675131485760](https://image.3001.net/images/20230131/1675131485_63d87a5d9b759a3d0feba.png!small?1675131485760)

### 5、初次登录DVWA平台

初次登录 <http://127.0.0.1/DVWA-master/index.php>

**1）创建数据库**

点击下方的“Create/Reset Database”按钮

![1675134028_63d8844c0dd727fbfdc31.png!small?1675134028249](https://image.3001.net/images/20230131/1675134028_63d8844c0dd727fbfdc31.png!small?1675134028249)

如果没问题的话，会反馈“成功创建”的结果提示

![1675134105_63d88499e70fa9114b35b.png!small?1675134105882](https://image.3001.net/images/20230131/1675134105_63d88499e70fa9114b35b.png!small?1675134105882)

**2）登录DVWA平台**

会自动跳转到DVWA登录界面（或者手动点击login），会跳转到 <http://127.0.0.1/DVWA-master/login.php>界面（再次打开登录页面也是输入该网址），输入DVWA账号和密码后即可进入DVWA。

> 登录名：admin
>
> 密码：password

![1675134317_63d8856d734b84de21afa.png!small?1675134317663](https://image.3001.net/images/20230131/1675134317_63d8856d734b84de21afa.png!small?1675134317663)

## **二、SQL注入（****SQL Injection）**

> **SQL注入**即是指web应用程序对用户输入数据的合法性没有判断或过滤不严，攻击者可以在web应用程序中事先定义好的查询语句的结尾上添加额外的SQL语句，在管理员不知情的情况下实现非法操作，以此来实现欺骗数据库服务器执行非授权的任意查询，从而进一步得到相应的数据信息。
>
> **SQL**是操作数据库数据的结构化查询语言，网页的应用数据和后台数据库中的数据进行交互时会采用SQL。而**SQL注入**是将Web页面的原URL、表单域或数据包输入的参数，修改拼接成SQL语句，传递给Web服务器，进而传给数据库服务器以执行数据库命令。

### **1、调整网站安全级别**

进入DVWA平台后，先在“DVWA Security”中，调整平台安全等级为**“low”-低级**，并确认，此级别是完全易受攻击的，并且没有做任何安全防护。它的作用是展示不良编程实践是如何导致 Web 应用程序漏洞的，并用作教授或学习漏洞基本利用技术的平台。

![1675136304_63d88d3047a44a784e38f.png!small?1675136305163](https://image.3001.net/images/20230131/1675136304_63d88d3047a44a784e38f.png!small?1675136305163)

![1675159048_63d8e6089254a290736d4.png!small?1675159048271](https://image.3001.net/images/20230131/1675159048_63d8e6089254a290736d4.png!small?1675159048271)

### **2、****查看页面的传递方式，****是****set****方法还是****get****方法？**

> **知识点：**注入点类型（页面的传递方式）包括：①get型：使用URL框注入  ②post型：使用输入框注入  ③cookie型等等，有多种注入点的类型，所以我们需要进行判断查看一下，它是属于哪种传递方式

输入1，尝试判断该页面的传递方式

```
1
```

**结果：**查看有返回结果，URL中id=1，说明PHP页面通过了get方法（请求时, 参数附带在url后面，目的为了达到能查询信息的方式，就是get方式）进行参数的传递。我们是可以通过控制参数id的值来返回我们需要的信息。[submit() 方法把表单数据提交到 Web 服务器]

![1675136965_63d88fc507825d5bbfacc.png!small?1675136965098](https://image.3001.net/images/20230131/1675136965_63d88fc507825d5bbfacc.png!small?1675136965098)

**分析：**

看看后台中到底执行了什么样的SQL语句呢？点击view-source可以进行源代码的查看

![1675137060_63d89024d7dbf62d5870d.png!small?1675137060797](https://image.3001.net/images/20230131/1675137060_63d89024d7dbf62d5870d.png!small?1675137060797)

注意：实际执行的SQL语句是文本框中输入的内容会放在id=’’的引号里面，但这只是我们通过看源代码才知道的，实际情况分析的时候，我们是不知道有没有这个引号的哈，我们需要判断，也就是上面的判断

### **3、判断是否存在注入，注入类型是什么？**

真实环境网页中，并不是每个网址链接都存在注入，需要去判断一下，同时我们还可以判断一下，此注入点的注入类型是什么的，是字符型还是数字形的？这是在真实环境中的判断过程。

在我们的实验环境肯定是存在注入点的，我们也来测试一下

**1）先判断是否存在注入**

输入  1’

> **1‘**

**结果：**查询失败，提示：

“You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''1''' at line 1”---您的 SQL 语法有错误； 检查与您的 MySQL 服务器版本相对应的手册，以获取在第 1 行的“1”附近使用的正确语法

![1675152438_63d8cc36e4e60eff3b765.png!small?1675152438855](https://image.3001.net/images/20230131/1675152438_63d8cc36e4e60eff3b765.png!small?1675152438855)

**思考一下：**为什么会报错啊？我们可以站在上帝视角看啊，因为我们查看了它的后台源代码，我们知道这个文本框里面输入的内容，会被放在id=’’里面，你在这里面放一个1’，结果是什么，是id=’1’’，这个语法肯定是不对的吧，多一个单引号，所以必然会报错。

现在，回到平民视角啊，我们尝试**分别输入1和1’**两种情况：

> **1**
>
> **1‘**

**结果：**得到了两种结果，输入1，是可以正常回显结果的；输入1’，有错误提示；

正常情况下，输入1’，是不应该有任何反馈，这样才说明该网站此处是不存在漏洞的，是安全的；但这里的结果是有反馈了，有错误信息提示，也叫反馈，那就是说明了，我们是可以通过控制参数Id的值，来与数据库进行交互。所以，通过这两项操作以及返回结果，我们就可以判断，**此处是存在注入的**。

**（注意：**一般正常情况下，或者说安全的环境里面，网站是不允许用户通过一些可输入的文本框，和后台数据库进行交互的，因为，一旦可以交互，就容易被黑客利用，套取到数据库的秘密信息）

**2）****后判断注入点是什么类型的？是字符型还是数字形的？**

然后我们再来判断此处的注入点是什么类型的，因为这涉及到，我们之后要如何去构造注入语句。

通常SQL注入漏洞分为2种类型：数字型、字符型；字符型和数字型最大的一个区别在于**，数字型不需要单引号来闭合，而字符串一般需要通过单引号来闭合的。**

所以，我们就需要去判断，这个注入点的id它是字符型的还是数字型的啊，**关系到我们之后去构造sql注入语句，到底要不要加单引号**

**一共就有****两种情况****，那就简单点，来假设吧：**

* **1****）先假设如果是数字型的，我们去构造****sql****语句**

已知sql查询语句是：select  列名  from  表名  where  id=？

我们自己去构造：(文本框里面输入id后面的内容  **1 and 1=1**)

**select** **列名  from** **表名  where  id=1 and 1=1**

【我们先不执行，我们先自己分析，觉得这个结果应该是什么？然后再实际去执行以下，看结果又是什么？**如果我们自己判断的和执行的结果一致，就说明没问题，它是数字型的，如果不一致，那就说明不是数字型**】

![1675155683_63d8d8e392c9a09569abb.png!small?1675155683335](https://image.3001.net/images/20230131/1675155683_63d8d8e392c9a09569abb.png!small?1675155683335)

输入1 and 1=1，结果正常回显

> **1 and 1=1**

![1675159253_63d8e6d5057021c9b2a1b.png!small?1675159252568](https://image.3001.net/images/20230131/1675159253_63d8e6d5057021c9b2a1b.png!small?1675159252568)

输入1 and 1=2，结果正常回显

> **1 and 1=2**

![1675159275_63d8e6eb51a488d4a3121.png!small?1675159274851](https://image.3001.net/images/20230131/1675159275_63d8e6eb51a488d4a3121.png!small?1675159274851)

**对比结果：自己判断与执行结果不一致，说明不是数字型的**

![1675155467_63d8d80bc871371fbc630.png!small](https://image.3001.net/images/20230131/1675155467_63d8d80bc871371fbc630.png!small)

* **2****）****再假设如果是字符型的，我们去构造****sql****语句**

同样，已知sql查询语句是：select  列名  from  表...