---
title: [译] Meta/Facebook 超大规模 AI/GPU 基础设施设计（2024）
url: https://arthurchiao.github.io/blog/meta-ai-infra-zh/
source: ArthurChiao's Blog
date: 2024-04-22
fetch_date: 2025-10-04T12:14:42.154227
---

# [译] Meta/Facebook 超大规模 AI/GPU 基础设施设计（2024）

# [ArthurChiao's Blog](https://arthurchiao.github.io/)

* [Home](/index.html)
* [Articles (EN)](/articles)
* [Articles (ไธญๆ)](/articles-zh)
* [Categories](/categories)
* [About](/about)
* [Donate](/donate)

# [่ฏ] Meta/Facebook ่ถๅคง่งๆจก AI/GPU ๅบ็ก่ฎพๆฝ่ฎพ่ฎก๏ผ2024๏ผ

Published at 2024-04-21 | Last Update 2024-04-21

ๆฌๆ็ฟป่ฏ่ช 2024 ๅนด Meta/Facebook ็ไธ็ฏๆ็ซ ๏ผ
[Building Metaโs GenAI Infrastructure](https://engineering.fb.com/2024/03/12/data-center-engineering/building-metas-genai-infrastructure/)ใ

1. ไธคไธช GPU ้็พค๏ผๆฏไธช้็พค **`2.4w H100`**๏ผๅๅซ็จ **`RoCE/InfiniBand`** ็ฝ็ป๏ผ
2. **LLaMA3 ๅฐฑๆฏๅจ่ฟไธคไธช้็พคไธ่ฎญ็ปๅบๆฅ็**๏ผ
3. ้ข่ฎกๅฐ 2024 ๅนดๅบ๏ผMeta AI ๅบ็ก่ฎพๆฝๅปบ่ฎพๅฐๆฅๆ **`35w ๅผ  H100`** GPU๏ผๆป็ฎๅ็ธๅฝไบ็บฆ **`60w ๅผ  H100`**ใ

![](/assets/img/meta-ai-infra/Meta-24K-GenAi-Clusters-hero.webp)

ๆฐดๅนณๅ็ปดๆค็ฒพๅๆ้๏ผ่ฏๆไธๅๅญๅจ้่ฏฏๆ่ฟๆถไนๅค๏ผๅฆๆ็้ฎ๏ผ่ฏทๆฅ้ๅๆใ
**ไผ ๆญ็ฅ่ฏ๏ผๅฐ้ๅณๅจ๏ผๅนดๆปกๅๅซๅจๅฒ๏ผ่ฝฌ่ฝฝ่ฏทๆณจๆ[ๅบๅค](https://arthurchiao.art)**ใ

ไปฅไธๆฏ่ฏๆใ

---

* [1 ็ฌฌไธไปฃ GPU ้็พค๏ผ`1.6w A100` (RSC)](#1-็ฌฌไธไปฃ-gpu-้็พค16w-a100-rsc)
* [2 ็ฌฌไบไปฃ GPU ้็พค๏ผ`2.4w H100`](#2-็ฌฌไบไปฃ-gpu-้็พค24w-h100)
  + [2.1 ่ฎก็ฎ๏ผ`Grand Teton` GPU ไธปๆบ](#21-่ฎก็ฎgrand-teton-gpu-ไธปๆบ)
  + [2.2 ็ฝ็ป](#22-็ฝ็ป)
    - [2.2.1 ้็พคไธ๏ผ400Gbps RoCE + ่ช็ ไบคๆขๆบ](#221-้็พคไธ400gbps-roce--่ช็ ไบคๆขๆบ)
    - [2.2.2 ้็พคไบ๏ผ400Gbps InfiniBand](#222-้็พคไบ400gbps-infiniband)
    - [2.2.3 ๅฐ็ป](#223-ๅฐ็ป)
  + [2.3 ๅญๅจ](#23-ๅญๅจ)
    - [2.3.1 ๆฐๆฎๅ checkpoints ๅญๅจ๏ผFUSE + Tectonic](#231-ๆฐๆฎๅ-checkpoints-ๅญๅจfuse--tectonic)
    - [2.3.2 ไบคไบๅผ่ฐ่ฏ๏ผParallel NFS](#232-ไบคไบๅผ่ฐ่ฏparallel-nfs)
    - [2.3.3 ๅคงๅฎน้ SSD + ๅฎๅถๆฏไธชๆบๆ็ๆๅกๅจๆฐ้](#233-ๅคงๅฎน้-ssd--ๅฎๅถๆฏไธชๆบๆ็ๆๅกๅจๆฐ้)
* [3 ๆง่ฝ](#3-ๆง่ฝ)
  + [3.1 ๅๅ๏ผๆง่ฝๅๆ็จๆง็ผบไธไธๅฏ](#31-ๅๅๆง่ฝๅๆ็จๆง็ผบไธไธๅฏ)
  + [3.2 ๅคง้็พคไผๅ](#32-ๅคง้็พคไผๅ)
* [4 ๅฏน open AI innovation ็ๆฟ่ฏบ](#4-ๅฏน-open-ai-innovation-็ๆฟ่ฏบ)
* [5 ๆชๆฅๅฑๆ](#5-ๆชๆฅๅฑๆ)

---

ไฝไธบๅฏนๆชๆฅไบบๅทฅๆบ่ฝ็้่ฆๆ่ต๏ผMeta ๆ้ ไบไธคไธชๅคง่งๆจก AI ้็พค๏ผๆฏไธช้็พค็ฑ **`2.4w ๅผ  GPU`** ็ปๆ๏ผ
ๆฌๆๅไบซๅถ่ฎก็ฎใ็ฝ็ปใๅญๅจ็ญ่ฎพ่ฎก็ป่ใ

# 1 ็ฌฌไธไปฃ GPU ้็พค๏ผ`1.6w A100` (RSC)

Meta ๅพๆฉๅฐฑๅผๅงๆๅปบ AI ๅบ็ก่ฎพๆฝ๏ผไฝ็ฌฌไธๆฌกๅฏนๅคๅไบซๆฏๅจ 2022 ๅนด๏ผไป็ปไบๆไปฌ็
**`Research SuperCluster`**
๏ผ[RSC](https://ai.meta.com/blog/ai-rsc/)๏ผ๏ผๅฎ็ฑ **`1.6w ไธช A100`** GPU ็ปๆใ

RSC ๆฏๆไบ Meta ็ฌฌไธไปฃๅ่ฟ AI ๆจกๅ็ๅผๅ๏ผๅจ่ฎญ็ป **`Llama/llama2`**ใ
่ฎก็ฎๆบ่ง่งใNLPใ่ฏญ้ณ่ฏๅซใๅพๅ็ๆ็่ณ็ผ็ ็ญ AI ๅทฅไฝไธญๅๆฅไบ้่ฆไฝ็จใ

# 2 ็ฌฌไบไปฃ GPU ้็พค๏ผ`2.4w H100`

> ็ฒพ็กฎๆฐๅญๆฏๆฏไธช้็พค **`24,576`** ๅผ  H100 GPUใ

ๆไปฌ็ๆฐไธไปฃ AI ้็พคๅๅๅธๆถไบ RSC ็ๆๅๅ็ป้ชๆ่ฎญ๏ผ่ฟๅๆฌ๏ผ

* ๆฐ้็พค่ดๅไบๆๅปบ**็ซฏๅฐ็ซฏ็ AI ็ณป็ป**๏ผ็นๅซๅผบ่ฐ**็ ็ฉถไบบๅๅๅผๅไบบๅ็็จๆทไฝ้ชๅๅทฅไฝๆ็**๏ผ
* ๆฐ้็พค่ฝๆฏๆๆดๅคงใๆดๅคๆ็ๆจกๅ๏ผไธบ GenAI ไบงๅๅผๅๅ AI ็ ็ฉถ็่ฟๆญฅ้บๅนณไบ้่ทฏใ

Meta ๆฏๅคฉ้่ฆๆง่กๆฐไปฅไธไบฟ่ฎก็ AI ไปปๅก๏ผ่ฟๅฐฑ้่ฆไธไธช้ซๅบฆๅ่ฟๅ็ตๆดป็ๅบ็ก่ฎพๆฝใ
ๆไปฌ**่ช็ ไบๅคง้จๅ็กฌไปถใ่ฝฏไปถๅ็ฝ็ป fabric**๏ผไฝฟๆไปฌ่ฝ่ฟ่ก็ซฏๅฐ็ซฏไผๅ๏ผ็กฎไฟๆฐๆฎไธญๅฟ็้ซๆ่ฟ่กใ

![](/assets/img/meta-ai-infra/Meta-24K-GenAi-Clusters-hero.webp)

ๅทฆไพง๏ผ่ฎก็ฎๆบๆ๏ผๅๆฌ GPU ๆๅกๅจๆบๆก๏ผ็ฝฎ้กถไบคๆขๆบ๏ผfabric ไบคๆขๆบ็ญ็ญ๏ผๅณไพง๏ผๅญๅจๆบๆใ

## 2.1 ่ฎก็ฎ๏ผ`Grand Teton` GPU ไธปๆบ

ไธคไธชๆฐ้็พค้ฝไฝฟ็จไบ [Grand Teton](https://engineering.fb.com/2022/10/18/open-source/ocp-summit-2022-grand-teton/)๏ผ
่ฟๆฏ Meta ๅผๅ็**ๅผๆพ GPU ็กฌไปถๅนณๅฐ**๏ผๆไปฌๅทฒ็ปๅฐๅถ่ดก็ฎ็ปไบๅผๆพ่ฎก็ฎ้กน็ฎ๏ผOCP๏ผใ

> ไป 2015 ๅนด็ [Big Sur](https://engineering.fb.com/2015/12/10/ml-applications/facebook-to-open-source-ai-hardware-design/) ๅนณๅฐๅผๅง๏ผ
> ๆไปฌๅฐฑไธ็ดๅจๅผๆพ่ฎพ่ฎกๆไปฌ็ GPU ็กฌไปถๅนณๅฐใ

Grand Teton ๅฎ็ฉๅพๅฆไธ๏ผ

![](/assets/img/meta-ai-infra/Meta-Grand-Teton.webp)

[Image Source](https://engineering.fb.com/2022/10/18/open-source/ocp-summit-2022-grand-teton/)

* ๅฐ CPU ๆบๅคดใGPUใไบคๆขๆบๅๆญฅ็ณป็ปใ็ตๆบ็ญ็ญ้ๆๅฐไธไธชๆบๆกไธญ๏ผไปฅ่ทๅพๆดๅฅฝ็ๆดไฝๆง่ฝ๏ผ
* ๆไพไบๅฟซ้ๅฏๆฉๅฑๆงๅ็ตๆดปๆง๏ผ่ฎพ่ฎก็ฎๅ๏ผๅฏไปฅๅฟซ้้จ็ฝฒๅฐๆฐๆฎไธญๅฟ๏ผๅนถๆไบ็ปดๆคๅๆฉๅฑใ

็ปๅ [Open Rack](https://engineering.fb.com/2022/10/18/open-source/ocp-summit-2022-grand-teton/) ็ตๆบๅๆบๆถๆถๆ
็ญๅถไปๅ้จๅๆฐ๏ผๆไปฌ่ฝไธบ Meta ๅฝๅๅๆชๆฅๅบ็จ็จๅบๅฟซ้้่บซๅฎๅถๆฐ้็พคใ

## 2.2 ็ฝ็ป

ไธคไธช้็พคไฝฟ็จไบไธๅ็็ฝ็ปๆนๆก๏ผไฝ้ฝๆฏ **`400Gbps`** ๆฅๅฅใ

### 2.2.1 ้็พคไธ๏ผ400Gbps RoCE + ่ช็ ไบคๆขๆบ

ๅบไบ RoCE ็ฝ็ป๏ผไฝฟ็จ็ไบคๆขๆบๅๆฌ

* ่ช็ ็ฝฎ้กถไบคๆขๆบ๏ผ**`TOR`**๏ผ[Wedge400](https://engineering.fb.com/2021/11/09/data-center-engineering/ocp-summit-2021/)
  / [Arista 7800](https://www.arista.com/assets/data/pdf/Datasheets/7800R3-Data-Sheet.pdf) ๏ผ
* ่ช็ **ๆจกๅๅไบคๆขๆบ** [Minipack2](https://engineering.fb.com/2021/11/09/data-center-engineering/ocp-summit-2021/)ใ

  + Minipack/Minipack2 ๅจ็ป็ฝไธญ่ฝๆฟๆๅค็ง่ง่ฒ๏ผไพๅฆไฝไธบ Spine ไบคๆขๆบ๏ผ
  + ็ฌฌไธไปฃ Minipack๏ผ[(่ฏ) ้ๆฐ่ฎพ่ฎก Facebook ็ๆฐๆฎไธญๅฟ็ฝ็ป๏ผ2019๏ผ](/blog/facebook-f16-minipack-zh/)ใ
  + ๆดๆฉไธ็น็ๆฐๆฎไธญๅฟ็ฝ็ป๏ผ[(่ฏ) ๆฐๆฎไธญๅฟ Fabric๏ผFacebook ็ไธไธไปฃๆฐๆฎไธญๅฟ็ฝ็ป๏ผ2014๏ผ](/blog/facebook-f4-data-center-fabric-zh/)ใ

### 2.2.2 ้็พคไบ๏ผ400Gbps InfiniBand

ไฝฟ็จ NVIDIA Quantum2 InfiniBand fabricใ

### 2.2.3 ๅฐ็ป

ไธคไธชๆนๆกไฝๅฏนๆฏ๏ผไฝฟๆไปฌ่ฝๅค่ฏไผฐ RoCE/IB ๅจๅคง่งๆจก่ฎญ็ปไธญ็้็จๆงๅๅฏๆฉๅฑๆง๏ผ
ไธบ่ฎพ่ฎกๅๆๅปบๆดๅคง่งๆจก็้็พคๆไพไบๅฎ่ดต็ป้ชใ
็ฎๅ่ฟไธคไธชไธๅ็ป็ฝ็ฑปๅ็้็พค้ฝ่ฝๅค่ฟ่กๅคงๅ็ๆๅผ AI ไปปๅก
๏ผไพๅฆๅจ **`RoCE`** ้็พคไธ่ฎญ็ป **`Llama 3`**๏ผ๏ผ
่ๆฒกๆ้ๅฐ็ฝ็ป็ถ้ขใ

## 2.3 ๅญๅจ

ๅญๅจๅจ AI ่ฎญ็ปไธญๆฎๆผ็้่ฆ่ง่ฒ๏ผ็ถ่็ธๅณ็่ฎจ่ฎบ็กฎ้ๅธธๅฐใ

ๆ่ฟ็ๅๅฑ่ถๅฟๅฏไปฅ็ๅบ๏ผGenAI ไปปๅก่ถๆฅ่ถๅคๆจกๆ๏ผ้่ฆๅค็ๅคง้ๅพๅใ่ง้ขๅๆๆฌ๏ผๅ ๆญคๅฏน้ซๆง่ฝๅญๅจ็้ๆฑ่ถๆฅ่ถๅผบ็ใ
็ๆณ็ๅญๅจๆนๆก**้คไบๆไพ่ฏๅฅฝ็ๆง่ฝ๏ผ่ฟ่ฆๅๅฐไฝ่ฝ่**ใ

### 2.3.1 ๆฐๆฎๅ checkpoints ๅญๅจ๏ผFUSE + Tectonic

ๆไปฌ AI ้็พค็ๆฐๆฎๅ checkpoint ็ๅญๅจๆนๆก๏ผ

* ไธๅฑๆฏไธไธช่ช็ ็ Linux ็จๆท็ฉบ้ดๆไปถ็ณป็ป๏ผFUSE๏ผ
* ๅบๅฑๆฏ Meta ็ๅไธบ [Tectonic ็ๅๅธๅผๅญๅจ่งฃๅณๆนๆก](https://www.usenix.org/conference/fast21/presentation/pan)๏ผๅฎ้ๅฏน้ชๅญ๏ผFlash media๏ผ่ฟ่กไบไผๅใ

่ฟไธช่งฃๅณๆนๆกไฝฟๅพ

* ๆฐๅไธช GPU ่ฝๅๆญฅไฟๅญๅๅ ่ฝฝ checkpoints๏ผๅฏนไปปไฝๅญๅจ่งฃๅณๆนๆกๆฅ่ฏด้ฝๆฏไธไธช[ๆๆ](https://en.wikipedia.org/wiki/Thundering_herd_problem#:~:text=In%20computer%20science%2C%20the%20thundering,able%20to%20handle%20the%20event.)๏ผ๏ผ
* ๅๆถ่ฟๆไพไบ **`EB`** ็บงๅญๅจ็ณป็ปๆ้็็ตๆดปๆงๅ้ซๅๅใ

### 2.3.2 ไบคไบๅผ่ฐ่ฏ๏ผParallel NFS

ๆไปฌ่ฟไธ [Hammerspace](https://hammerspace.com/software/) ๅไฝๅผๅไบไธไธชๅนถ่ก็ฝ็ปๆไปถ็ณป็ป๏ผNFS๏ผ๏ผ
ๅฎไฝฟๅทฅ็จๅธ่ฝๅคไฝฟ็จ**ๆฐๅไธช GPU ่ฟ่กไบคไบๅผ่ฐ่ฏ**๏ผ
ๅ ไธบไปฃ็ ๆนๅจ่ฝ็ซๅณๅๆญฅๅฐ็ฏๅขไธญ็ๆๆ่็นใ

Tectonic ๅๅธๅผๅญๅจๅ ไธ Hammerspace๏ผๆข่ฝๆปก่ถณๅฟซ้่ฟญไปฃ๏ผๅไธไผ้ๅถ่งๆจกใ

### 2.3.3 ๅคงๅฎน้ SSD + ๅฎๅถๆฏไธชๆบๆ็ๆๅกๅจๆฐ้

ๆ ่ฎบๆฏ Tectonic ่ฟๆฏ Hammerspace ๆนๆก๏ผ้ฝๅบไบ
[YV3 Sierra Point server platform](https://www.opencompute.org/documents/e1s-expansion-2ou-1s-server-design-specification-pdf)๏ผ
ไฝฟ็...