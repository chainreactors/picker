---
title: æ·±å…¥æµ…å‡ºAPIæµ‹è¯•ï½œæœé›†åˆ†æä¸æ¼æ´æŒ–æ˜å®æˆ˜
url: https://mp.weixin.qq.com/s?__biz=MzIzMTIzNTM0MA==&mid=2247496635&idx=1&sn=34c31d16785a1db6359cc507f1312498&chksm=e8a5f9d8dfd270ce98244fefaaff483cbbfc2b1a94710d1eb30fdc1b35c8f91dcb606f71c6f6&scene=58&subscene=0#rd
source: è¿ªå“¥è®²äº‹
date: 2024-12-20
fetch_date: 2025-10-06T19:39:41.491933
---

# æ·±å…¥æµ…å‡ºAPIæµ‹è¯•ï½œæœé›†åˆ†æä¸æ¼æ´æŒ–æ˜å®æˆ˜

![cover_image](https://mmbiz.qpic.cn/mmbiz_jpg/YmmVSe19Qj6qIGureJec4PcmicjvW2pRmjbp2NmYEIlpRKmAF7fia9nhtUTgzVKmTwicfWFhJ0wSUhyFpHjyDib0SA/0?wx_fmt=jpeg)

# æ·±å…¥æµ…å‡ºAPIæµ‹è¯•ï½œæœé›†åˆ†æä¸æ¼æ´æŒ–æ˜å®æˆ˜

è¿ªå“¥è®²äº‹

ä»¥ä¸‹æ–‡ç« æ¥æºäºä¸€ä½ä¸æ„¿é€éœ²å§“åçš„çƒ­å¿ƒç½‘å‹
ï¼Œä½œè€…ä¸æ„¿é€éœ²å§“åçš„çƒ­å¿ƒç½‘å‹

![](http://wx.qlogo.cn/mmhead/Q3auHgzwzM7EomoAliaxuCKn0blUwibX3ANtxXaSz0vFiaynokNXbMybQ/0)

**ä¸€ä½ä¸æ„¿é€éœ²å§“åçš„çƒ­å¿ƒç½‘å‹**
.

ä¸å®šæ—¶æ›´æ–°ä¸€äº›æ¸—é€ã€é€†å‘åŠä¸ªäººå¿ƒå¾—éšç¬”ã€‚

# æ·±å…¥æµ…å‡ºAPIæµ‹è¯•

æ ‡é¢˜å±•ç¤º

![](https://mmbiz.qpic.cn/mmbiz_png/gh2J6kIbISbMQNUu70qlnV5HCznypHDQYse9Esr0VCM3ibsfk7c9qaERMFqZN7ZbDLvb3bs2Ww1BsU20ENMRIgw/640?wx_fmt=png&from=appmsg)

æ‰€æœ‰åŠ¨æ€ç½‘ç«™éƒ½ç”± API ç»„æˆï¼Œå› æ­¤ SQL æ³¨å…¥ç­‰ç»å…¸ Web æ¼æ´å¯ä»¥å½’ç±»ä¸º API æµ‹è¯•ã€‚å› æ­¤æµ‹è¯•ä¹‹å‰è¦å°½å¯èƒ½çš„å»æµ‹è¯•åŠŸèƒ½ç‚¹ï¼Œè§‚å¯Ÿä»£ç†æµé‡ï¼Œå‘ç°APIç›®å½•æ”¶é›†ä¿¡æ¯ï¼Œæ‹“å±•æ”»å‡»é¢ã€‚

ä¾‹å¦‚ï¼ŒæŸä¸ªåŠŸèƒ½çš„è¯·æ±‚çš„ API ç«¯ç‚¹æ˜¯Â `/api/books`Â è¿™ä¼š API è¿›è¡Œäº¤äº’ï¼Œä»å›¾ä¹¦é¦†ä¸­æ£€ç´¢ä¹¦ç±åˆ—è¡¨ï¼š

```
GETÂ /api/booksÂ HTTP/1.1
Host:Â example.com
```

é™¤äº†æ˜é¢ä¸Šå·²ä½¿ç”¨ä¸”å¯çœ‹è§çš„åŠŸèƒ½å¤–ï¼Œå¯èƒ½è¿˜å­˜åœ¨ä¸€äº›éšè—çš„æˆ–æ˜¯æƒé™ä¸è¶³å¯¼è‡´çš„ä¸å±•ç¤ºçš„åŠŸèƒ½ã€‚å› æ­¤ï¼Œå¯èƒ½ä¼šæœ‰äº›`API`æ¥å£ä¼šè¢«éšè—åœ¨`JS`ä¸­æ²¡æœ‰è¢«æ¿€æ´»ã€‚è¿™æ—¶å€™å¯ä»¥ä½¿ç”¨ JS Link Finderæ’ä»¶è¾…åŠ©åˆ†æ`Javascript`æ–‡ä»¶ä¸­çš„æ¥å£ï¼Œå…·ä½“å¯ä»¥çœ‹ï¼š[æŠ€å·§ | Burpæ”»å‡»é¢æ‹“å±•ä¸å®ç”¨å·¥å…·](http://mp.weixin.qq.com/s?__biz=MzkzODEzNjA3MQ==&mid=2247488184&idx=1&sn=30593b45bbc8ea3b1c719cef70ef2b1b&chksm=c28595d0f5f21cc61a83029a1198ee47cf71f42cb0d57c96cccb41c0e8c7761561b01b5c998f&scene=21#wechat_redirect)

é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡`FUZZ`å¯¹æ¥å£è¿›è¡ŒçŒœè§£ï¼Œä¾‹å¦‚`POST /api/user/update` æ¥å£ï¼Œå¯èƒ½ä¼šå­˜åœ¨`/add`æˆ–è€…`/delete`åŠŸèƒ½ï¼Œæˆ–æ˜¯å°†æ¥å£å‘½åè§„åˆ™ä¸¢ç»™`GPT`è®©å®ƒå¸®å¿™ç”Ÿæˆç›¸å…³è·¯å¾„ã€‚

## **å‘ç° APIå¼€å‘æ–‡æ¡£å¹¶æ‹“å±•æ”»å‡»é¢**

å³ä½¿ API æ–‡æ¡£æœªå…¬å¼€æä¾›ï¼Œä»å¯ä»¥é€šè¿‡`FUZZ`æˆ–çˆ¬å–çš„æ–¹å¼è®¿é—®æœªæˆæƒçš„APIå¼€å‘æ–‡æ¡£æ‰‹å†Œï¼Œä¾‹å¦‚ï¼š

```
/api/swagger/v1
/api/swagger
/api
/swagger
/api-docs
/api.html
/swagger-ui
/swagger/codes
/api/index.html
/api/v2/api-docs
/v2/swagger.json
/swagger-ui/html
/distv2/index.html
/swagger/index.html
/sw/swagger-ui.html
/api/swagger-ui.html
/static/swagger.json
/user/swagger-ui.html
/swagger-ui/index.html
/swagger-dubbo/api-docs
/template/swagger-ui.html
/swagger/static/index.html
/dubbo-provider/distv2/index.html
/spring-security-rest/api/swagger-ui.html
/spring-security-oauth-resource/swagger-ui.html
```

`github`ä¸­å…³äº`springboot`æ¥å£ç›¸å…³åˆ©ç”¨è¿™ç¯‡æ–‡ç« éå¸¸è¯¦ç»†ï¼š`https://github.com/LandGrey/SpringBootVulExploit`

APIå­—å…¸ä»€ä¹ˆçš„æˆ‘ä¹Ÿæ²¡ä»€ä¹ˆå¥½ä¸œè¥¿ï¼Œåªæ¨èè¿™`Burp`æ’ä»¶ï¼Œè‡ªåŠ¨å¸®å¿™å¤šé€’å½’æ‰«æï¼Œå®ƒè®©æˆ‘æ¡åˆ°çš„APIæ–‡æ¡£æ•°é‡å·²ç»æ•°ä¸è¿‡æ¥äº†ï¼šhttps://github.com/F6JO/RouteVulScan

### éšè—çš„ HTTP æ–¹æ³•

`API`æ–‡æ¡£ä¸­ä¸€èˆ¬è§„å®šäº†`API`æ¥å£åœ°å€ï¼Œå…è®¸çš„`HTTP`æ–¹æ³•ä¸æ”¯æŒçš„å†…å®¹ç±»å‹ã€‚å½“ç„¶ä¹Ÿæœ‰éä¸€èˆ¬æƒ…å†µï¼Œå¦‚ï¼š**æ–‡æ¡£æœªæ›´æ–°æˆ–è€…ç»†èŠ‚é—®é¢˜ï¼Œå¯¼è‡´ä¸å®é™…ä¸ä¸€è‡´ã€‚å› æ­¤`API`ç«¯ç‚¹å¯èƒ½æ½œåœ¨éšè—çš„`HTTP`æ–¹æ³•ï¼Œæ‰€ä»¥æµ‹è¯•æ‰€æœ‰æ½œåœ¨æ–¹æ³•éå¸¸é‡è¦ã€‚**

ä¾‹å¦‚ï¼ŒÂ `/api/tasks`Â å¯èƒ½æ”¯æŒä»¥ä¸‹æ–¹æ³•ï¼š

* `GET /api/tasks`Â - æ£€ç´¢ä»»åŠ¡åˆ—è¡¨ã€‚
* `POST /api/tasks`Â - åˆ›å»ºæ–°ä»»åŠ¡ã€‚
* `DELETE /api/tasks/1`Â - åˆ é™¤ä»»åŠ¡ã€‚

> åœ¨`Intruder`ä¸­å†…ç½®äº†åä¸º`HTTP verbs`çš„HTTPæ–¹æ³•å­—å…¸

### éšè—çš„å†…å®¹ç±»å‹

åœ¨å®é™…ç”Ÿäº§ä¸­ï¼Œå› ä¸ºä¸šåŠ¡äº’äº¤ï¼Œæ•°æ®éœ€è¦å¤šç³»ç»Ÿä¹‹é—´é€ä¼ ï¼›ç”±äºç³»ç»Ÿä¹‹é—´æ¡†æ¶è¯­è¨€ä¸ä¸€è‡´ï¼Œç»å¸¸ä¼šå‡ºç°`XML`å’Œ`JSON`æ•°æ®äº’è½¬ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå¯èƒ½ä¼šäº§ç”Ÿå¤„ç†é€»è¾‘çš„å·®å¼‚ã€‚**ä¾‹å¦‚ï¼Œ`API` åœ¨å¤„ç† `JSON` æ•°æ®æ—¶å¯èƒ½æ˜¯å®‰å…¨çš„ï¼Œä½†åœ¨å¤„ç† `XML`æ—¶å®¹æ˜“å—åˆ°æ³¨å…¥æ”»å‡»ã€‚**

åœ¨æµ‹é€Ÿæ¥å£æ—¶å€™ï¼Œè¦æ³¨æ„`Content-Type`Â æ ‡å¤´ï¼Œç„¶åç›¸åº”çš„è®¾ç½®è¯·æ±‚æ­£æ–‡çš„æ ¼å¼ï¼Œåœ¨`BApp`ä¸­Content type converteræ’ä»¶å¯ä»¥å¿«é€Ÿçš„åœ¨ `XML`å’Œ `JSON`ä¸­äº’è½¬æ¢ã€‚

### ä½¿ç”¨è‡ªåŠ¨åŒ–å·¥å…·åˆ†æAPIæ–‡æ¡£

å½“å‘ç°åˆ°APIæ–‡æ¡£åï¼Œå¯ä»¥è·å–åˆ°å¤§é‡çš„APIæ¥å£åŠŸèƒ½ä¿¡æ¯ï¼Œé™¤äº†å¯ä»¥æ‰‹åŠ¨æ„é€ å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡APIKITã€OpenAPI Parserã€SoapUI è¿™ç±»å·¥å…·å¯¹APIæ–‡æ¡£è¿›è¡Œåˆ†æä¸å‚æ•°æ„é€ ã€‚

> è‡ªåŠ¨åŒ–æµ‹è¯•APIæ¥å£æ—¶ï¼Œæ³¨æ„æ‰‹åŠ¨æµ‹è¯•å¢ã€åˆ æ¥å£ï¼Œä¸è¦å½±å“ç½‘ç«™è¿è¡Œã€‚

## Lab: å‘ç°éšè—çš„APIæ–‡æ¡£

> é€šè¿‡æš´éœ²çš„APIç«¯ç‚¹ä½ç½®ï¼Œæƒ³åŠæ³•åˆ é™¤`carlos`è´¦æˆ·ï¼›è´¦æˆ·:`wiener:peter`

Lab: Exploiting an API endpoint using documentation | Web Security Academy (portswigger.net)

æ­£å¸¸ç™»é™†ï¼Œæµ‹è¯•åŠŸèƒ½ç‚¹ã€‚æŸ¥çœ‹HTTPå†å²è®°å½•å‘ç°`/api/user/wiener HTTP/2` è¿™ä¹ˆä¸€ä¸ªç›®å½•è¯·æ±‚ï¼Œå°†`winer`ä¿®æ”¹ä¸º`carlos`å‘ç°å¯ä»¥æ­£å¸¸å–å¾—ä¿¡æ¯ ï¼Œå°è¯•åªè®¿é—®`/api` è·¯å¾„ã€‚

![](https://mmbiz.qpic.cn/mmbiz_png/gh2J6kIbISbMQNUu70qlnV5HCznypHDQnaj0tBpiahkqtdkuddNKaTxfbn6wWX0nphRz2Q5AIUSKqibYU5kd30pg/640?wx_fmt=png&from=appmsg)

image

å‘ç°æš´éœ²äº†APIæ–‡æ¡£ä¿¡æ¯ã€‚

æ ¹æ®`DELETE`æ ¼å¼è°ƒç”¨åˆ é™¤`carlos`

![](https://mmbiz.qpic.cn/mmbiz_png/gh2J6kIbISbMQNUu70qlnV5HCznypHDQ8VkGz18PviaF9bqnHMZs5O3SFniadFR9EL0T2Z2kNVJZtMicSsBNLaZ7Q/640?wx_fmt=png&from=appmsg)

image

---

## **Lab: æ‰¾åˆ°æœªä½¿ç”¨çš„APIæ¥å£**

> åˆ©ç”¨éšè—çš„ API ç«¯ç‚¹è´­ä¹°**Lightweight l33t Leather Jacket**.

Lab: Finding and exploiting an unused API endpoint | Web Security Academy

èµ°å®Œæ‰€æœ‰åŠŸèƒ½æµç¨‹ï¼Œå‘ç°åªæœ‰ä¸€ä¸ª`API`è·¯å¾„

![](https://mmbiz.qpic.cn/mmbiz_png/gh2J6kIbISbMQNUu70qlnV5HCznypHDQ1xcxqMjWjuEov5iauh20KibxxhNBKIKic8uRb6IEHy5I9a2nZfvdBWwibg/640?wx_fmt=png&from=appmsg)

image

ä½¿ç”¨å†…ç½®`content discover` æ‰«æåŠŸèƒ½ä¹Ÿåªèƒ½å‘ç°è¿™ä¸ªè·¯å¾„ã€‚æ ¹æ®ä¸Šé¢è¯´çš„å‡ ç‚¹ï¼Œæ‹“å±•åˆ©ç”¨ã€‚å°è¯•`HTTP`æ–¹æ³•æšä¸¾ï¼Œå‘ç°`PATHCH`æ–¹æ³•ä¼šæŠ¥é”™å†…å®¹ç±»å‹é”™è¯¯

![](https://mmbiz.qpic.cn/mmbiz_png/gh2J6kIbISbMQNUu70qlnV5HCznypHDQ5PoHGRjL8WVsffScdXOVUl7IUbWuc9tKWndP35HTtAH3uib06xuPj2A/640?wx_fmt=png&from=appmsg)

æ„é€ å†…å®¹ç±»å‹ä¸æ–¹æ³•å‘é€ï¼Œå‘ç°æç¤º`â€œprice parameter missing in bodyâ€`

![](https://mmbiz.qpic.cn/mmbiz_png/gh2J6kIbISbMQNUu70qlnV5HCznypHDQIXnkiaD5gUdkWmvbibQLVYicia3HPwWGYK9vK2eoYscmS0rbP3sqDMyyFA/640?wx_fmt=png&from=appmsg)

æ·»åŠ ä¸Šå‚æ•°ï¼Œå®åœ¨ä¸çŸ¥é“è¿”å›çš„`price 0.01`æ˜¯ä»€ä¹ˆæ„æ€ã€‚

![](https://mmbiz.qpic.cn/mmbiz_png/gh2J6kIbISbMQNUu70qlnV5HCznypHDQItTBTkv07BicyicxouzgOr7J5fDKWfGrb5Olor799mQAyhHR6cGy7wCw/640?wx_fmt=png&from=appmsg)

image

åˆ·æ–°è´­ç‰©è½¦å‘ç°ï¼Œæ˜¯è®¾ç½®ä»·æ ¼çš„ã€‚

![](https://mmbiz.qpic.cn/mmbiz_png/gh2J6kIbISbMQNUu70qlnV5HCznypHDQDQAhvNacIAOzEJibzic0JY2DzFbuQRsXbMYNduhN6TOzZ1IE8GjiahmaQ/640?wx_fmt=png&from=appmsg)

image

é‚£ä¹ˆæ”¹ä¸º0

![](https://mmbiz.qpic.cn/mmbiz_png/gh2J6kIbISbMQNUu70qlnV5HCznypHDQuicibAPg5Up5FnFjO5IzfgPq7fyWOibISopMjgCcLC6upr6koiaPUFwiajA/640?wx_fmt=png&from=appmsg)

image

---

## Lab: **Mass Assignment æ‰¹é‡èµ‹å€¼**

Mass Assignment - OWASP Cheat Sheet Series --- è´¨é‡åˆ†é… - OWASP å¤‡å¿˜å•ç³»åˆ—

æ‰¹é‡èµ‹å€¼ï¼ˆä¹Ÿç§°ä¸ºè‡ªåŠ¨ç»‘å®šï¼‰å¯èƒ½ä¼šæ— æ„ä¸­åˆ›å»ºéšè—å‚æ•°ã€‚å½“Webæ¡†æ¶è‡ªåŠ¨å°†è¯·æ±‚å‚æ•°ç»‘å®šåˆ°å†…éƒ¨æ¨¡å‹å¯¹è±¡ä¸Šçš„å­—æ®µæ—¶ï¼ˆç›´æ¥å°†ç”¨æˆ·è¾“å…¥å‚æ•°èµ‹å€¼ç»™æ¨¡å‹å®ä¾‹ï¼‰ï¼Œå°±ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µã€‚å› æ­¤ï¼Œæ‰¹é‡èµ‹å€¼å¯èƒ½ä¼šå¯¼è‡´ç½‘ç«™å…è®¸å¤„ç†å¼€å‘äººå‘˜è®¾ç½®çš„éšè—å‚æ•°ã€‚é€šä¿—æ¥è¯´ï¼Œå°±åƒæ˜¯é¤é¦†ä¸­çš„éšè—èœå•ï¼Œè™½ç„¶èœå•ä¸­æ²¡æœ‰å±•ç¤ºï¼Œä½†æ˜¯å¨å¸ˆä¹Ÿæ˜¯å¯ä»¥åˆ¶ä½œçš„ã€‚

### è¯†åˆ«éšè—å‚æ•°

æ¼æ´æˆå› æ˜¯ç”±äºä»æ¨¡å‹å¯¹è±¡å­—æ®µä¸­åˆ›å»ºå‚æ•°ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œé€šå¸¸å¯ä»¥é€šè¿‡æ‰‹åŠ¨æŸ¥è¯¢APIè¿”å›çš„æ¨¡å‹å¯¹è±¡æ¥å‘ç°éšè—çš„å‚æ•°ã€‚

ä¾‹å¦‚ï¼Œæœ‰è¿™ä¹ˆä¸ªæ¥å£ï¼š`/api/users/update` å®ƒå…è®¸ç”¨æˆ·æ›´æ–°ç”¨æˆ·åç§°å’Œé‚®ç®±

```
{
Â Â Â Â "username":Â "wiener",
Â Â Â Â "email":Â "wiener@example.com",
}
```

è€Œæ°å·§æœ‰è¿™ä¹ˆä¸€ä¸ªæ¥å£ï¼š`/api/users/{username}` è¿”å›ä»¥ä¸‹ä¿¡æ¯ğŸ§

```
{
Â Â Â Â "id":Â 123,
Â Â Â Â "username":Â "wiener",
Â Â Â Â "email":Â "wiener@example.com",
Â Â Â Â "isAdmin":Â "false"
}
```

è¿™å¯èƒ½è¡¨ç¤ºè¿”å›çš„`id`Â å’ŒÂ `isAdmin`Â å‚æ•°ä¸`/api/users/update`æ¥å£æ›´æ–°çš„ç”¨æˆ·åå’Œç”µå­é‚®ä»¶å‚æ•°ï¼Œå¯èƒ½ä¼šä½œä¸ºéšè—å‚æ•°ä¸€èµ·ç»‘å®šåˆ°å†…éƒ¨`User`å¯¹è±¡ã€‚

---

### æµ‹è¯•**æ‰¹é‡èµ‹å€¼æ¼æ´**

**SpringBoot ä»£ç ç¤ºä¾‹:**

å‡è®¾æœ‰ä¸€ä¸ªç”¨äºç¼–è¾‘ç”¨æˆ·å¸æˆ·ä¿¡æ¯çš„è¡¨å•ï¼š

```
<form>
Â Â Â Â Â <inputÂ name="userid"Â type="text">
Â Â Â Â Â <inputÂ name="password"Â type="text">
Â Â Â Â Â <inputÂ name="email"Â text="text">
Â Â Â Â Â <inputÂ type="submit">
</form>
```

ä¸‹é¢æ˜¯è¡¨å•ç»‘å®šåˆ°çš„`User`å¯¹è±¡ï¼š

```
@Data
publicÂ classÂ UserÂ {
Â Â Â privateÂ StringÂ userid;
Â Â Â privateÂ StringÂ password;
Â Â Â privateÂ StringÂ email;
Â Â Â privateÂ booleanÂ admin;

Â Â Â //GettersÂ &Â Setters
}
```

ä¸‹é¢æ˜¯å¤„ç†è¯·æ±‚çš„\*\*`Controller`\*\*ï¼š

```
@RestController
publicÂ classÂ UserControllerÂ {

Â Â Â Â @PostMapping("/update")
Â Â Â Â publicÂ UserÂ updateUser(@RequestBodyÂ UserÂ user)Â {

Â Â Â Â Â Â Â Â System.out.println("UpdatingÂ user:Â "Â +Â user);
Â Â Â Â Â Â Â Â returnÂ user;
Â Â Â Â }
}
```

æ­£å¸¸æäº¤`html`ä¼šäº§ç”Ÿä»¥ä¸‹è¯·æ±‚ï¼š

![](https://mmbiz.qpic.cn/mmbiz_png/gh2J6kIbISbMQNUu70qlnV5HCznypHDQoouPibmfALAHRQ5AjiaZibxwl0NgNZvRlJRxcibAvACnn7LBDARNvibeyZA/640?wx_fmt=png&from=appmsg)

image

åˆ©ç”¨`Admin`Â éšè—å‚æ•°ï¼š

![](https://mmbiz.qpic.cn/mmbiz_png/gh2J6kIbISbMQNUu70qlnV5HCznypHDQkF48pcf0We6hVDS1k2pddPvUjJGzFmxZBhibD4ribrDsw4PXQibxlqIDg/640?wx_fmt=png&from=appmsg)

å¦‚æœè¯·æ±‚ä¸­çš„Â `Admin`Â å€¼ç»‘å®šåˆ°`User`å¯¹è±¡è€Œæ²¡æœ‰è¿›è¡Œå……åˆ†çš„éªŒè¯å’Œæ¸…ç†ï¼Œåˆ™å¯èƒ½ä¼šé”™è¯¯åœ°å‘ç”¨æˆ·Â `test`æˆäºˆç®¡ç†å‘˜æƒé™ã€‚

---

**ä»¥ä¸‹æ˜¯Python Flaskå®ç°çš„æ•ˆæœï¼š**

```
fromÂ flaskÂ importÂ Flask,Â request,Â jsonify
fromÂ werkzeug.securityÂ importÂ generate_password_hash
appÂ =Â Flask(__name__)

usersÂ =Â []
classÂ User:
Â Â Â Â defÂ __init__(self,Â username,Â password,Â email):
Â Â Â Â Â Â Â Â self.idÂ =Â len(users)
Â Â Â Â Â Â Â Â self.usernameÂ =Â username
Â Â Â Â Â Â Â Â self.passwordÂ =Â generate_password_hash(password)
Â Â Â Â Â Â Â Â self.emailÂ =Â email
Â Â Â Â Â Â Â Â #Â é»˜è®¤è§’è‰²ä¸ºuser
Â Â Â Â Â Â Â Â self.isAdminÂ =Â False

@app.route("/regist",Â methods=["POST"])
defÂ create_user():
Â Â Â Â dataÂ =Â request.get_json()

Â Â Â Â usernameÂ =Â data["username"]
Â Â Â Â passwordÂ =Â data["password"]
Â Â Â Â emailÂ =Â data["email"]

Â Â Â Â #Â é»˜è®¤æ³¨å†Œç”¨æˆ·éadmin
Â Â Â Â userÂ =Â User(username,Â password,Â email)

Â Â Â Â #Â forÂ userÂ inÂ users:
Â Â Â Â #Â Â Â ifÂ user.emailÂ ==Â email:
Â Â Â Â #Â Â Â Â Â Â Â returnÂ jsonify({"error":Â "EmailÂ alreadyÂ exists"}),Â 403
Â Â Â Â users.append(user)

Â Â Â Â #Â è‡ªåŠ¨ç»‘å®šæ‰€æœ‰å…¶ä»–å‚æ•°åˆ°userå¯¹è±¡ä¸Š
Â Â Â Â forÂ key,Â valueÂ inÂ data.items():
Â Â Â Â Â Â Â Â ifÂ keyÂ !=Â "password":
Â Â Â Â Â Â Â Â Â Â Â Â setattr(user,Â key,Â value)

Â Â Â Â returnÂ jsonify(user.__dict__)

ifÂ __name__Â ==Â "__main__":
Â Â Â Â app.run()
```

æ­£å¸¸æ³¨å†Œï¼š

![](https://mmbiz.qpic.cn/mmbiz_png/gh2J6kIbISbMQNUu70qlnV5HCznypHDQ4G11l6ziavvSUWEB5faLmaibIXcNxiacV5pjCsxUBLS51YhAmibfAZPPpg/640?wx_fmt=png&from=appmsg)

image

åˆ©ç”¨

![](https://mmbiz.qpic.cn/mmbiz_png/gh2J6kIbISbMQNUu70qlnV5HCznypHDQBKOYL5Z5WviaC1MsSbWsyDGQZDMX1FPsWBU7IZgqtMKm9jN4S4fLb8Q/640?wx_fmt=png&from=appmsg)

image

---

### Labï¼ša mass assignment vulnerability

ä»¥ä¸‹æ˜¯`Burp`é¶åœºï¼š

Lab: Exploiting a mass assignment vulnerability | Web Security Academy (portswigger.net)

èµ°ä¸€åœˆåŠŸèƒ½ç‚¹å‘ç°åªæœ‰ä¸€ä¸ªæ¥å£

![](https://mmbiz.qp...